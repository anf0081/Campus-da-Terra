(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))c(d);new MutationObserver(d=>{for(const h of d)if(h.type==="childList")for(const m of h.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&c(m)}).observe(document,{childList:!0,subtree:!0});function o(d){const h={};return d.integrity&&(h.integrity=d.integrity),d.referrerPolicy&&(h.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?h.credentials="include":d.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function c(d){if(d.ep)return;d.ep=!0;const h=o(d);fetch(d.href,h)}})();function hm(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var gc={exports:{}},hi={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bh;function bx(){if(Bh)return hi;Bh=1;var l=Symbol.for("react.transitional.element"),s=Symbol.for("react.fragment");function o(c,d,h){var m=null;if(h!==void 0&&(m=""+h),d.key!==void 0&&(m=""+d.key),"key"in d){h={};for(var f in d)f!=="key"&&(h[f]=d[f])}else h=d;return d=h.ref,{$$typeof:l,type:c,key:m,ref:d!==void 0?d:null,props:h}}return hi.Fragment=s,hi.jsx=o,hi.jsxs=o,hi}var Lh;function Nx(){return Lh||(Lh=1,gc.exports=bx()),gc.exports}var n=Nx(),xc={exports:{}},we={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zh;function Sx(){if(zh)return we;zh=1;var l=Symbol.for("react.transitional.element"),s=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),c=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),h=Symbol.for("react.consumer"),m=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),x=Symbol.iterator;function S(D){return D===null||typeof D!="object"?null:(D=x&&D[x]||D["@@iterator"],typeof D=="function"?D:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,w={};function E(D,$,F){this.props=D,this.context=$,this.refs=w,this.updater=F||R}E.prototype.isReactComponent={},E.prototype.setState=function(D,$){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,$,"setState")},E.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function O(){}O.prototype=E.prototype;function H(D,$,F){this.props=D,this.context=$,this.refs=w,this.updater=F||R}var z=H.prototype=new O;z.constructor=H,N(z,E.prototype),z.isPureReactComponent=!0;var J=Array.isArray,W={H:null,A:null,T:null,S:null,V:null},L=Object.prototype.hasOwnProperty;function k(D,$,F,K,se,ve){return F=ve.ref,{$$typeof:l,type:D,key:$,ref:F!==void 0?F:null,props:ve}}function P(D,$){return k(D.type,$,void 0,void 0,void 0,D.props)}function U(D){return typeof D=="object"&&D!==null&&D.$$typeof===l}function ee(D){var $={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(F){return $[F]})}var I=/\/+/g;function ce(D,$){return typeof D=="object"&&D!==null&&D.key!=null?ee(""+D.key):$.toString(36)}function X(){}function oe(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(X,X):(D.status="pending",D.then(function($){D.status==="pending"&&(D.status="fulfilled",D.value=$)},function($){D.status==="pending"&&(D.status="rejected",D.reason=$)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function _(D,$,F,K,se){var ve=typeof D;(ve==="undefined"||ve==="boolean")&&(D=null);var me=!1;if(D===null)me=!0;else switch(ve){case"bigint":case"string":case"number":me=!0;break;case"object":switch(D.$$typeof){case l:case s:me=!0;break;case v:return me=D._init,_(me(D._payload),$,F,K,se)}}if(me)return se=se(D),me=K===""?"."+ce(D,0):K,J(se)?(F="",me!=null&&(F=me.replace(I,"$&/")+"/"),_(se,$,F,"",function(be){return be})):se!=null&&(U(se)&&(se=P(se,F+(se.key==null||D&&D.key===se.key?"":(""+se.key).replace(I,"$&/")+"/")+me)),$.push(se)),1;me=0;var Pe=K===""?".":K+":";if(J(D))for(var re=0;re<D.length;re++)K=D[re],ve=Pe+ce(K,re),me+=_(K,$,F,ve,se);else if(re=S(D),typeof re=="function")for(D=re.call(D),re=0;!(K=D.next()).done;)K=K.value,ve=Pe+ce(K,re++),me+=_(K,$,F,ve,se);else if(ve==="object"){if(typeof D.then=="function")return _(oe(D),$,F,K,se);throw $=String(D),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return me}function T(D,$,F){if(D==null)return D;var K=[],se=0;return _(D,K,"","",function(ve){return $.call(F,ve,se++)}),K}function q(D){if(D._status===-1){var $=D._result;$=$(),$.then(function(F){(D._status===0||D._status===-1)&&(D._status=1,D._result=F)},function(F){(D._status===0||D._status===-1)&&(D._status=2,D._result=F)}),D._status===-1&&(D._status=0,D._result=$)}if(D._status===1)return D._result.default;throw D._result}var te=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)};function ie(){}return we.Children={map:T,forEach:function(D,$,F){T(D,function(){$.apply(this,arguments)},F)},count:function(D){var $=0;return T(D,function(){$++}),$},toArray:function(D){return T(D,function($){return $})||[]},only:function(D){if(!U(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},we.Component=E,we.Fragment=o,we.Profiler=d,we.PureComponent=H,we.StrictMode=c,we.Suspense=y,we.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=W,we.__COMPILER_RUNTIME={__proto__:null,c:function(D){return W.H.useMemoCache(D)}},we.cache=function(D){return function(){return D.apply(null,arguments)}},we.cloneElement=function(D,$,F){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var K=N({},D.props),se=D.key,ve=void 0;if($!=null)for(me in $.ref!==void 0&&(ve=void 0),$.key!==void 0&&(se=""+$.key),$)!L.call($,me)||me==="key"||me==="__self"||me==="__source"||me==="ref"&&$.ref===void 0||(K[me]=$[me]);var me=arguments.length-2;if(me===1)K.children=F;else if(1<me){for(var Pe=Array(me),re=0;re<me;re++)Pe[re]=arguments[re+2];K.children=Pe}return k(D.type,se,void 0,void 0,ve,K)},we.createContext=function(D){return D={$$typeof:m,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:h,_context:D},D},we.createElement=function(D,$,F){var K,se={},ve=null;if($!=null)for(K in $.key!==void 0&&(ve=""+$.key),$)L.call($,K)&&K!=="key"&&K!=="__self"&&K!=="__source"&&(se[K]=$[K]);var me=arguments.length-2;if(me===1)se.children=F;else if(1<me){for(var Pe=Array(me),re=0;re<me;re++)Pe[re]=arguments[re+2];se.children=Pe}if(D&&D.defaultProps)for(K in me=D.defaultProps,me)se[K]===void 0&&(se[K]=me[K]);return k(D,ve,void 0,void 0,null,se)},we.createRef=function(){return{current:null}},we.forwardRef=function(D){return{$$typeof:f,render:D}},we.isValidElement=U,we.lazy=function(D){return{$$typeof:v,_payload:{_status:-1,_result:D},_init:q}},we.memo=function(D,$){return{$$typeof:g,type:D,compare:$===void 0?null:$}},we.startTransition=function(D){var $=W.T,F={};W.T=F;try{var K=D(),se=W.S;se!==null&&se(F,K),typeof K=="object"&&K!==null&&typeof K.then=="function"&&K.then(ie,te)}catch(ve){te(ve)}finally{W.T=$}},we.unstable_useCacheRefresh=function(){return W.H.useCacheRefresh()},we.use=function(D){return W.H.use(D)},we.useActionState=function(D,$,F){return W.H.useActionState(D,$,F)},we.useCallback=function(D,$){return W.H.useCallback(D,$)},we.useContext=function(D){return W.H.useContext(D)},we.useDebugValue=function(){},we.useDeferredValue=function(D,$){return W.H.useDeferredValue(D,$)},we.useEffect=function(D,$,F){var K=W.H;if(typeof F=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return K.useEffect(D,$)},we.useId=function(){return W.H.useId()},we.useImperativeHandle=function(D,$,F){return W.H.useImperativeHandle(D,$,F)},we.useInsertionEffect=function(D,$){return W.H.useInsertionEffect(D,$)},we.useLayoutEffect=function(D,$){return W.H.useLayoutEffect(D,$)},we.useMemo=function(D,$){return W.H.useMemo(D,$)},we.useOptimistic=function(D,$){return W.H.useOptimistic(D,$)},we.useReducer=function(D,$,F){return W.H.useReducer(D,$,F)},we.useRef=function(D){return W.H.useRef(D)},we.useState=function(D){return W.H.useState(D)},we.useSyncExternalStore=function(D,$,F){return W.H.useSyncExternalStore(D,$,F)},we.useTransition=function(){return W.H.useTransition()},we.version="19.1.1",we}var Mh;function Bc(){return Mh||(Mh=1,xc.exports=Sx()),xc.exports}var b=Bc();const wx=hm(b);var vc={exports:{}},mi={},yc={exports:{}},jc={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hh;function Ex(){return Hh||(Hh=1,(function(l){function s(T,q){var te=T.length;T.push(q);e:for(;0<te;){var ie=te-1>>>1,D=T[ie];if(0<d(D,q))T[ie]=q,T[te]=D,te=ie;else break e}}function o(T){return T.length===0?null:T[0]}function c(T){if(T.length===0)return null;var q=T[0],te=T.pop();if(te!==q){T[0]=te;e:for(var ie=0,D=T.length,$=D>>>1;ie<$;){var F=2*(ie+1)-1,K=T[F],se=F+1,ve=T[se];if(0>d(K,te))se<D&&0>d(ve,K)?(T[ie]=ve,T[se]=te,ie=se):(T[ie]=K,T[F]=te,ie=F);else if(se<D&&0>d(ve,te))T[ie]=ve,T[se]=te,ie=se;else break e}}return q}function d(T,q){var te=T.sortIndex-q.sortIndex;return te!==0?te:T.id-q.id}if(l.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var h=performance;l.unstable_now=function(){return h.now()}}else{var m=Date,f=m.now();l.unstable_now=function(){return m.now()-f}}var y=[],g=[],v=1,x=null,S=3,R=!1,N=!1,w=!1,E=!1,O=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;function J(T){for(var q=o(g);q!==null;){if(q.callback===null)c(g);else if(q.startTime<=T)c(g),q.sortIndex=q.expirationTime,s(y,q);else break;q=o(g)}}function W(T){if(w=!1,J(T),!N)if(o(y)!==null)N=!0,L||(L=!0,ce());else{var q=o(g);q!==null&&_(W,q.startTime-T)}}var L=!1,k=-1,P=5,U=-1;function ee(){return E?!0:!(l.unstable_now()-U<P)}function I(){if(E=!1,L){var T=l.unstable_now();U=T;var q=!0;try{e:{N=!1,w&&(w=!1,H(k),k=-1),R=!0;var te=S;try{t:{for(J(T),x=o(y);x!==null&&!(x.expirationTime>T&&ee());){var ie=x.callback;if(typeof ie=="function"){x.callback=null,S=x.priorityLevel;var D=ie(x.expirationTime<=T);if(T=l.unstable_now(),typeof D=="function"){x.callback=D,J(T),q=!0;break t}x===o(y)&&c(y),J(T)}else c(y);x=o(y)}if(x!==null)q=!0;else{var $=o(g);$!==null&&_(W,$.startTime-T),q=!1}}break e}finally{x=null,S=te,R=!1}q=void 0}}finally{q?ce():L=!1}}}var ce;if(typeof z=="function")ce=function(){z(I)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,oe=X.port2;X.port1.onmessage=I,ce=function(){oe.postMessage(null)}}else ce=function(){O(I,0)};function _(T,q){k=O(function(){T(l.unstable_now())},q)}l.unstable_IdlePriority=5,l.unstable_ImmediatePriority=1,l.unstable_LowPriority=4,l.unstable_NormalPriority=3,l.unstable_Profiling=null,l.unstable_UserBlockingPriority=2,l.unstable_cancelCallback=function(T){T.callback=null},l.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<T?Math.floor(1e3/T):5},l.unstable_getCurrentPriorityLevel=function(){return S},l.unstable_next=function(T){switch(S){case 1:case 2:case 3:var q=3;break;default:q=S}var te=S;S=q;try{return T()}finally{S=te}},l.unstable_requestPaint=function(){E=!0},l.unstable_runWithPriority=function(T,q){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var te=S;S=T;try{return q()}finally{S=te}},l.unstable_scheduleCallback=function(T,q,te){var ie=l.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?ie+te:ie):te=ie,T){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=te+D,T={id:v++,callback:q,priorityLevel:T,startTime:te,expirationTime:D,sortIndex:-1},te>ie?(T.sortIndex=te,s(g,T),o(y)===null&&T===o(g)&&(w?(H(k),k=-1):w=!0,_(W,te-ie))):(T.sortIndex=D,s(y,T),N||R||(N=!0,L||(L=!0,ce()))),T},l.unstable_shouldYield=ee,l.unstable_wrapCallback=function(T){var q=S;return function(){var te=S;S=q;try{return T.apply(this,arguments)}finally{S=te}}}})(jc)),jc}var qh;function Cx(){return qh||(qh=1,yc.exports=Ex()),yc.exports}var bc={exports:{}},xt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fh;function Dx(){if(Fh)return xt;Fh=1;var l=Bc();function s(y){var g="https://react.dev/errors/"+y;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)g+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+y+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(){}var c={d:{f:o,r:function(){throw Error(s(522))},D:o,C:o,L:o,m:o,X:o,S:o,M:o},p:0,findDOMNode:null},d=Symbol.for("react.portal");function h(y,g,v){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:d,key:x==null?null:""+x,children:y,containerInfo:g,implementation:v}}var m=l.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(y,g){if(y==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return xt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=c,xt.createPortal=function(y,g){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(s(299));return h(y,g,null,v)},xt.flushSync=function(y){var g=m.T,v=c.p;try{if(m.T=null,c.p=2,y)return y()}finally{m.T=g,c.p=v,c.d.f()}},xt.preconnect=function(y,g){typeof y=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,c.d.C(y,g))},xt.prefetchDNS=function(y){typeof y=="string"&&c.d.D(y)},xt.preinit=function(y,g){if(typeof y=="string"&&g&&typeof g.as=="string"){var v=g.as,x=f(v,g.crossOrigin),S=typeof g.integrity=="string"?g.integrity:void 0,R=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;v==="style"?c.d.S(y,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:x,integrity:S,fetchPriority:R}):v==="script"&&c.d.X(y,{crossOrigin:x,integrity:S,fetchPriority:R,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},xt.preinitModule=function(y,g){if(typeof y=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var v=f(g.as,g.crossOrigin);c.d.M(y,{crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&c.d.M(y)},xt.preload=function(y,g){if(typeof y=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var v=g.as,x=f(v,g.crossOrigin);c.d.L(y,v,{crossOrigin:x,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},xt.preloadModule=function(y,g){if(typeof y=="string")if(g){var v=f(g.as,g.crossOrigin);c.d.m(y,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else c.d.m(y)},xt.requestFormReset=function(y){c.d.r(y)},xt.unstable_batchedUpdates=function(y,g){return y(g)},xt.useFormState=function(y,g,v){return m.H.useFormState(y,g,v)},xt.useFormStatus=function(){return m.H.useHostTransitionStatus()},xt.version="19.1.1",xt}var Yh;function mm(){if(Yh)return bc.exports;Yh=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(s){console.error(s)}}return l(),bc.exports=Dx(),bc.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gh;function Tx(){if(Gh)return mi;Gh=1;var l=Cx(),s=Bc(),o=mm();function c(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function h(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function m(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function f(e){if(h(e)!==e)throw Error(c(188))}function y(e){var t=e.alternate;if(!t){if(t=h(e),t===null)throw Error(c(188));return t!==e?null:e}for(var a=e,i=t;;){var r=a.return;if(r===null)break;var u=r.alternate;if(u===null){if(i=r.return,i!==null){a=i;continue}break}if(r.child===u.child){for(u=r.child;u;){if(u===a)return f(r),e;if(u===i)return f(r),t;u=u.sibling}throw Error(c(188))}if(a.return!==i.return)a=r,i=u;else{for(var p=!1,j=r.child;j;){if(j===a){p=!0,a=r,i=u;break}if(j===i){p=!0,i=r,a=u;break}j=j.sibling}if(!p){for(j=u.child;j;){if(j===a){p=!0,a=u,i=r;break}if(j===i){p=!0,i=u,a=r;break}j=j.sibling}if(!p)throw Error(c(189))}}if(a.alternate!==i)throw Error(c(190))}if(a.tag!==3)throw Error(c(188));return a.stateNode.current===a?e:t}function g(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=g(e),t!==null)return t;e=e.sibling}return null}var v=Object.assign,x=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),R=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),H=Symbol.for("react.consumer"),z=Symbol.for("react.context"),J=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),U=Symbol.for("react.activity"),ee=Symbol.for("react.memo_cache_sentinel"),I=Symbol.iterator;function ce(e){return e===null||typeof e!="object"?null:(e=I&&e[I]||e["@@iterator"],typeof e=="function"?e:null)}var X=Symbol.for("react.client.reference");function oe(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===X?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case N:return"Fragment";case E:return"Profiler";case w:return"StrictMode";case W:return"Suspense";case L:return"SuspenseList";case U:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case R:return"Portal";case z:return(e.displayName||"Context")+".Provider";case H:return(e._context.displayName||"Context")+".Consumer";case J:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case k:return t=e.displayName||null,t!==null?t:oe(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return oe(e(t))}catch{}}return null}var _=Array.isArray,T=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q=o.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te={pending:!1,data:null,method:null,action:null},ie=[],D=-1;function $(e){return{current:e}}function F(e){0>D||(e.current=ie[D],ie[D]=null,D--)}function K(e,t){D++,ie[D]=e.current,e.current=t}var se=$(null),ve=$(null),me=$(null),Pe=$(null);function re(e,t){switch(K(me,t),K(ve,e),K(se,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?ch(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=ch(t),e=uh(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}F(se),K(se,e)}function be(){F(se),F(ve),F(me)}function Ke(e){e.memoizedState!==null&&K(Pe,e);var t=se.current,a=uh(t,e.type);t!==a&&(K(ve,e),K(se,a))}function fe(e){ve.current===e&&(F(se),F(ve)),Pe.current===e&&(F(Pe),oi._currentValue=te)}var ge=Object.prototype.hasOwnProperty,C=l.unstable_scheduleCallback,ue=l.unstable_cancelCallback,he=l.unstable_shouldYield,ke=l.unstable_requestPaint,Oe=l.unstable_now,at=l.unstable_getCurrentPriorityLevel,Mt=l.unstable_ImmediatePriority,Ea=l.unstable_UserBlockingPriority,na=l.unstable_NormalPriority,Di=l.unstable_LowPriority,Pc=l.unstable_IdlePriority,ap=l.log,lp=l.unstable_setDisableYieldValue,gl=null,At=null;function An(e){if(typeof ap=="function"&&lp(e),At&&typeof At.setStrictMode=="function")try{At.setStrictMode(gl,e)}catch{}}var kt=Math.clz32?Math.clz32:rp,ip=Math.log,sp=Math.LN2;function rp(e){return e>>>=0,e===0?32:31-(ip(e)/sp|0)|0}var Ti=256,Ai=4194304;function aa(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ki(e,t,a){var i=e.pendingLanes;if(i===0)return 0;var r=0,u=e.suspendedLanes,p=e.pingedLanes;e=e.warmLanes;var j=i&134217727;return j!==0?(i=j&~u,i!==0?r=aa(i):(p&=j,p!==0?r=aa(p):a||(a=j&~e,a!==0&&(r=aa(a))))):(j=i&~u,j!==0?r=aa(j):p!==0?r=aa(p):a||(a=i&~e,a!==0&&(r=aa(a)))),r===0?0:t!==0&&t!==r&&(t&u)===0&&(u=r&-r,a=t&-t,u>=a||u===32&&(a&4194048)!==0)?t:r}function xl(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function op(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qc(){var e=Ti;return Ti<<=1,(Ti&4194048)===0&&(Ti=256),e}function Vc(){var e=Ai;return Ai<<=1,(Ai&62914560)===0&&(Ai=4194304),e}function lr(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function vl(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function cp(e,t,a,i,r,u){var p=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var j=e.entanglements,A=e.expirationTimes,G=e.hiddenUpdates;for(a=p&~a;0<a;){var ne=31-kt(a),le=1<<ne;j[ne]=0,A[ne]=-1;var Q=G[ne];if(Q!==null)for(G[ne]=null,ne=0;ne<Q.length;ne++){var V=Q[ne];V!==null&&(V.lane&=-536870913)}a&=~le}i!==0&&Zc(e,i,0),u!==0&&r===0&&e.tag!==0&&(e.suspendedLanes|=u&~(p&~t))}function Zc(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-kt(t);e.entangledLanes|=t,e.entanglements[i]=e.entanglements[i]|1073741824|a&4194090}function Xc(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var i=31-kt(a),r=1<<i;r&t|e[i]&t&&(e[i]|=t),a&=~r}}function ir(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function sr(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function $c(){var e=q.p;return e!==0?e:(e=window.event,e===void 0?32:Ah(e.type))}function up(e,t){var a=q.p;try{return q.p=e,t()}finally{q.p=a}}var kn=Math.random().toString(36).slice(2),pt="__reactFiber$"+kn,Nt="__reactProps$"+kn,Ca="__reactContainer$"+kn,rr="__reactEvents$"+kn,dp="__reactListeners$"+kn,fp="__reactHandles$"+kn,Jc="__reactResources$"+kn,yl="__reactMarker$"+kn;function or(e){delete e[pt],delete e[Nt],delete e[rr],delete e[dp],delete e[fp]}function Da(e){var t=e[pt];if(t)return t;for(var a=e.parentNode;a;){if(t=a[Ca]||a[pt]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=mh(e);e!==null;){if(a=e[pt])return a;e=mh(e)}return t}e=a,a=e.parentNode}return null}function Ta(e){if(e=e[pt]||e[Ca]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function jl(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(c(33))}function Aa(e){var t=e[Jc];return t||(t=e[Jc]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function st(e){e[yl]=!0}var Kc=new Set,Wc={};function la(e,t){ka(e,t),ka(e+"Capture",t)}function ka(e,t){for(Wc[e]=t,e=0;e<t.length;e++)Kc.add(t[e])}var hp=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ic={},eu={};function mp(e){return ge.call(eu,e)?!0:ge.call(Ic,e)?!1:hp.test(e)?eu[e]=!0:(Ic[e]=!0,!1)}function Ri(e,t,a){if(mp(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var i=t.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+a)}}function Ui(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+a)}}function fn(e,t,a,i){if(i===null)e.removeAttribute(a);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(t,a,""+i)}}var cr,tu;function Ra(e){if(cr===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);cr=t&&t[1]||"",tu=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+cr+e+tu}var ur=!1;function dr(e,t){if(!e||ur)return"";ur=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var le=function(){throw Error()};if(Object.defineProperty(le.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(le,[])}catch(V){var Q=V}Reflect.construct(e,[],le)}else{try{le.call()}catch(V){Q=V}e.call(le.prototype)}}else{try{throw Error()}catch(V){Q=V}(le=e())&&typeof le.catch=="function"&&le.catch(function(){})}}catch(V){if(V&&Q&&typeof V.stack=="string")return[V.stack,Q.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var u=i.DetermineComponentFrameRoot(),p=u[0],j=u[1];if(p&&j){var A=p.split(`
`),G=j.split(`
`);for(r=i=0;i<A.length&&!A[i].includes("DetermineComponentFrameRoot");)i++;for(;r<G.length&&!G[r].includes("DetermineComponentFrameRoot");)r++;if(i===A.length||r===G.length)for(i=A.length-1,r=G.length-1;1<=i&&0<=r&&A[i]!==G[r];)r--;for(;1<=i&&0<=r;i--,r--)if(A[i]!==G[r]){if(i!==1||r!==1)do if(i--,r--,0>r||A[i]!==G[r]){var ne=`
`+A[i].replace(" at new "," at ");return e.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",e.displayName)),ne}while(1<=i&&0<=r);break}}}finally{ur=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Ra(a):""}function pp(e){switch(e.tag){case 26:case 27:case 5:return Ra(e.type);case 16:return Ra("Lazy");case 13:return Ra("Suspense");case 19:return Ra("SuspenseList");case 0:case 15:return dr(e.type,!1);case 11:return dr(e.type.render,!1);case 1:return dr(e.type,!0);case 31:return Ra("Activity");default:return""}}function nu(e){try{var t="";do t+=pp(e),e=e.return;while(e);return t}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function Ht(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function au(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function gp(e){var t=au(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var r=a.get,u=a.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(p){i=""+p,u.call(this,p)}}),Object.defineProperty(e,t,{enumerable:a.enumerable}),{getValue:function(){return i},setValue:function(p){i=""+p},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Oi(e){e._valueTracker||(e._valueTracker=gp(e))}function lu(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),i="";return e&&(i=au(e)?e.checked?"true":"false":e.value),e=i,e!==a?(t.setValue(e),!0):!1}function _i(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var xp=/[\n"\\]/g;function qt(e){return e.replace(xp,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function fr(e,t,a,i,r,u,p,j){e.name="",p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"?e.type=p:e.removeAttribute("type"),t!=null?p==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Ht(t)):e.value!==""+Ht(t)&&(e.value=""+Ht(t)):p!=="submit"&&p!=="reset"||e.removeAttribute("value"),t!=null?hr(e,p,Ht(t)):a!=null?hr(e,p,Ht(a)):i!=null&&e.removeAttribute("value"),r==null&&u!=null&&(e.defaultChecked=!!u),r!=null&&(e.checked=r&&typeof r!="function"&&typeof r!="symbol"),j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?e.name=""+Ht(j):e.removeAttribute("name")}function iu(e,t,a,i,r,u,p,j){if(u!=null&&typeof u!="function"&&typeof u!="symbol"&&typeof u!="boolean"&&(e.type=u),t!=null||a!=null){if(!(u!=="submit"&&u!=="reset"||t!=null))return;a=a!=null?""+Ht(a):"",t=t!=null?""+Ht(t):a,j||t===e.value||(e.value=t),e.defaultValue=t}i=i??r,i=typeof i!="function"&&typeof i!="symbol"&&!!i,e.checked=j?e.checked:!!i,e.defaultChecked=!!i,p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(e.name=p)}function hr(e,t,a){t==="number"&&_i(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Ua(e,t,a,i){if(e=e.options,t){t={};for(var r=0;r<a.length;r++)t["$"+a[r]]=!0;for(a=0;a<e.length;a++)r=t.hasOwnProperty("$"+e[a].value),e[a].selected!==r&&(e[a].selected=r),r&&i&&(e[a].defaultSelected=!0)}else{for(a=""+Ht(a),t=null,r=0;r<e.length;r++){if(e[r].value===a){e[r].selected=!0,i&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function su(e,t,a){if(t!=null&&(t=""+Ht(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+Ht(a):""}function ru(e,t,a,i){if(t==null){if(i!=null){if(a!=null)throw Error(c(92));if(_(i)){if(1<i.length)throw Error(c(93));i=i[0]}a=i}a==null&&(a=""),t=a}a=Ht(t),e.defaultValue=a,i=e.textContent,i===a&&i!==""&&i!==null&&(e.value=i)}function Oa(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var vp=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ou(e,t,a){var i=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?i?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":i?e.setProperty(t,a):typeof a!="number"||a===0||vp.has(t)?t==="float"?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function cu(e,t,a){if(t!=null&&typeof t!="object")throw Error(c(62));if(e=e.style,a!=null){for(var i in a)!a.hasOwnProperty(i)||t!=null&&t.hasOwnProperty(i)||(i.indexOf("--")===0?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="");for(var r in t)i=t[r],t.hasOwnProperty(r)&&a[r]!==i&&ou(e,r,i)}else for(var u in t)t.hasOwnProperty(u)&&ou(e,u,t[u])}function mr(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yp=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),jp=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Bi(e){return jp.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var pr=null;function gr(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var _a=null,Ba=null;function uu(e){var t=Ta(e);if(t&&(e=t.stateNode)){var a=e[Nt]||null;e:switch(e=t.stateNode,t.type){case"input":if(fr(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+qt(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var i=a[t];if(i!==e&&i.form===e.form){var r=i[Nt]||null;if(!r)throw Error(c(90));fr(i,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(t=0;t<a.length;t++)i=a[t],i.form===e.form&&lu(i)}break e;case"textarea":su(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&Ua(e,!!a.multiple,t,!1)}}}var xr=!1;function du(e,t,a){if(xr)return e(t,a);xr=!0;try{var i=e(t);return i}finally{if(xr=!1,(_a!==null||Ba!==null)&&(js(),_a&&(t=_a,e=Ba,Ba=_a=null,uu(t),e)))for(t=0;t<e.length;t++)uu(e[t])}}function bl(e,t){var a=e.stateNode;if(a===null)return null;var i=a[Nt]||null;if(i===null)return null;a=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(c(231,t,typeof a));return a}var hn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vr=!1;if(hn)try{var Nl={};Object.defineProperty(Nl,"passive",{get:function(){vr=!0}}),window.addEventListener("test",Nl,Nl),window.removeEventListener("test",Nl,Nl)}catch{vr=!1}var Rn=null,yr=null,Li=null;function fu(){if(Li)return Li;var e,t=yr,a=t.length,i,r="value"in Rn?Rn.value:Rn.textContent,u=r.length;for(e=0;e<a&&t[e]===r[e];e++);var p=a-e;for(i=1;i<=p&&t[a-i]===r[u-i];i++);return Li=r.slice(e,1<i?1-i:void 0)}function zi(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Mi(){return!0}function hu(){return!1}function St(e){function t(a,i,r,u,p){this._reactName=a,this._targetInst=r,this.type=i,this.nativeEvent=u,this.target=p,this.currentTarget=null;for(var j in e)e.hasOwnProperty(j)&&(a=e[j],this[j]=a?a(u):u[j]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?Mi:hu,this.isPropagationStopped=hu,this}return v(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Mi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Mi)},persist:function(){},isPersistent:Mi}),t}var ia={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hi=St(ia),Sl=v({},ia,{view:0,detail:0}),bp=St(Sl),jr,br,wl,qi=v({},Sl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sr,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==wl&&(wl&&e.type==="mousemove"?(jr=e.screenX-wl.screenX,br=e.screenY-wl.screenY):br=jr=0,wl=e),jr)},movementY:function(e){return"movementY"in e?e.movementY:br}}),mu=St(qi),Np=v({},qi,{dataTransfer:0}),Sp=St(Np),wp=v({},Sl,{relatedTarget:0}),Nr=St(wp),Ep=v({},ia,{animationName:0,elapsedTime:0,pseudoElement:0}),Cp=St(Ep),Dp=v({},ia,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Tp=St(Dp),Ap=v({},ia,{data:0}),pu=St(Ap),kp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Rp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Up={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Op(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Up[e])?!!t[e]:!1}function Sr(){return Op}var _p=v({},Sl,{key:function(e){if(e.key){var t=kp[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=zi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Rp[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sr,charCode:function(e){return e.type==="keypress"?zi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?zi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Bp=St(_p),Lp=v({},qi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gu=St(Lp),zp=v({},Sl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sr}),Mp=St(zp),Hp=v({},ia,{propertyName:0,elapsedTime:0,pseudoElement:0}),qp=St(Hp),Fp=v({},qi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Yp=St(Fp),Gp=v({},ia,{newState:0,oldState:0}),Pp=St(Gp),Qp=[9,13,27,32],wr=hn&&"CompositionEvent"in window,El=null;hn&&"documentMode"in document&&(El=document.documentMode);var Vp=hn&&"TextEvent"in window&&!El,xu=hn&&(!wr||El&&8<El&&11>=El),vu=" ",yu=!1;function ju(e,t){switch(e){case"keyup":return Qp.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var La=!1;function Zp(e,t){switch(e){case"compositionend":return bu(t);case"keypress":return t.which!==32?null:(yu=!0,vu);case"textInput":return e=t.data,e===vu&&yu?null:e;default:return null}}function Xp(e,t){if(La)return e==="compositionend"||!wr&&ju(e,t)?(e=fu(),Li=yr=Rn=null,La=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return xu&&t.locale!=="ko"?null:t.data;default:return null}}var $p={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Nu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!$p[e.type]:t==="textarea"}function Su(e,t,a,i){_a?Ba?Ba.push(i):Ba=[i]:_a=i,t=Cs(t,"onChange"),0<t.length&&(a=new Hi("onChange","change",null,a,i),e.push({event:a,listeners:t}))}var Cl=null,Dl=null;function Jp(e){lh(e,0)}function Fi(e){var t=jl(e);if(lu(t))return e}function wu(e,t){if(e==="change")return t}var Eu=!1;if(hn){var Er;if(hn){var Cr="oninput"in document;if(!Cr){var Cu=document.createElement("div");Cu.setAttribute("oninput","return;"),Cr=typeof Cu.oninput=="function"}Er=Cr}else Er=!1;Eu=Er&&(!document.documentMode||9<document.documentMode)}function Du(){Cl&&(Cl.detachEvent("onpropertychange",Tu),Dl=Cl=null)}function Tu(e){if(e.propertyName==="value"&&Fi(Dl)){var t=[];Su(t,Dl,e,gr(e)),du(Jp,t)}}function Kp(e,t,a){e==="focusin"?(Du(),Cl=t,Dl=a,Cl.attachEvent("onpropertychange",Tu)):e==="focusout"&&Du()}function Wp(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Fi(Dl)}function Ip(e,t){if(e==="click")return Fi(t)}function eg(e,t){if(e==="input"||e==="change")return Fi(t)}function tg(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Rt=typeof Object.is=="function"?Object.is:tg;function Tl(e,t){if(Rt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),i=Object.keys(t);if(a.length!==i.length)return!1;for(i=0;i<a.length;i++){var r=a[i];if(!ge.call(t,r)||!Rt(e[r],t[r]))return!1}return!0}function Au(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ku(e,t){var a=Au(e);e=0;for(var i;a;){if(a.nodeType===3){if(i=e+a.textContent.length,e<=t&&i>=t)return{node:a,offset:t-e};e=i}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Au(a)}}function Ru(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Ru(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Uu(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=_i(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=_i(e.document)}return t}function Dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var ng=hn&&"documentMode"in document&&11>=document.documentMode,za=null,Tr=null,Al=null,Ar=!1;function Ou(e,t,a){var i=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Ar||za==null||za!==_i(i)||(i=za,"selectionStart"in i&&Dr(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Al&&Tl(Al,i)||(Al=i,i=Cs(Tr,"onSelect"),0<i.length&&(t=new Hi("onSelect","select",null,t,a),e.push({event:t,listeners:i}),t.target=za)))}function sa(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var Ma={animationend:sa("Animation","AnimationEnd"),animationiteration:sa("Animation","AnimationIteration"),animationstart:sa("Animation","AnimationStart"),transitionrun:sa("Transition","TransitionRun"),transitionstart:sa("Transition","TransitionStart"),transitioncancel:sa("Transition","TransitionCancel"),transitionend:sa("Transition","TransitionEnd")},kr={},_u={};hn&&(_u=document.createElement("div").style,"AnimationEvent"in window||(delete Ma.animationend.animation,delete Ma.animationiteration.animation,delete Ma.animationstart.animation),"TransitionEvent"in window||delete Ma.transitionend.transition);function ra(e){if(kr[e])return kr[e];if(!Ma[e])return e;var t=Ma[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in _u)return kr[e]=t[a];return e}var Bu=ra("animationend"),Lu=ra("animationiteration"),zu=ra("animationstart"),ag=ra("transitionrun"),lg=ra("transitionstart"),ig=ra("transitioncancel"),Mu=ra("transitionend"),Hu=new Map,Rr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Rr.push("scrollEnd");function Xt(e,t){Hu.set(e,t),la(t,[e])}var qu=new WeakMap;function Ft(e,t){if(typeof e=="object"&&e!==null){var a=qu.get(e);return a!==void 0?a:(t={value:e,source:t,stack:nu(t)},qu.set(e,t),t)}return{value:e,source:t,stack:nu(t)}}var Yt=[],Ha=0,Ur=0;function Yi(){for(var e=Ha,t=Ur=Ha=0;t<e;){var a=Yt[t];Yt[t++]=null;var i=Yt[t];Yt[t++]=null;var r=Yt[t];Yt[t++]=null;var u=Yt[t];if(Yt[t++]=null,i!==null&&r!==null){var p=i.pending;p===null?r.next=r:(r.next=p.next,p.next=r),i.pending=r}u!==0&&Fu(a,r,u)}}function Gi(e,t,a,i){Yt[Ha++]=e,Yt[Ha++]=t,Yt[Ha++]=a,Yt[Ha++]=i,Ur|=i,e.lanes|=i,e=e.alternate,e!==null&&(e.lanes|=i)}function Or(e,t,a,i){return Gi(e,t,a,i),Pi(e)}function qa(e,t){return Gi(e,null,null,t),Pi(e)}function Fu(e,t,a){e.lanes|=a;var i=e.alternate;i!==null&&(i.lanes|=a);for(var r=!1,u=e.return;u!==null;)u.childLanes|=a,i=u.alternate,i!==null&&(i.childLanes|=a),u.tag===22&&(e=u.stateNode,e===null||e._visibility&1||(r=!0)),e=u,u=u.return;return e.tag===3?(u=e.stateNode,r&&t!==null&&(r=31-kt(a),e=u.hiddenUpdates,i=e[r],i===null?e[r]=[t]:i.push(t),t.lane=a|536870912),u):null}function Pi(e){if(50<ei)throw ei=0,qo=null,Error(c(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Fa={};function sg(e,t,a,i){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ut(e,t,a,i){return new sg(e,t,a,i)}function _r(e){return e=e.prototype,!(!e||!e.isReactComponent)}function mn(e,t){var a=e.alternate;return a===null?(a=Ut(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Yu(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Qi(e,t,a,i,r,u){var p=0;if(i=e,typeof e=="function")_r(e)&&(p=1);else if(typeof e=="string")p=ox(e,a,se.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case U:return e=Ut(31,a,t,r),e.elementType=U,e.lanes=u,e;case N:return oa(a.children,r,u,t);case w:p=8,r|=24;break;case E:return e=Ut(12,a,t,r|2),e.elementType=E,e.lanes=u,e;case W:return e=Ut(13,a,t,r),e.elementType=W,e.lanes=u,e;case L:return e=Ut(19,a,t,r),e.elementType=L,e.lanes=u,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case O:case z:p=10;break e;case H:p=9;break e;case J:p=11;break e;case k:p=14;break e;case P:p=16,i=null;break e}p=29,a=Error(c(130,e===null?"null":typeof e,"")),i=null}return t=Ut(p,a,t,r),t.elementType=e,t.type=i,t.lanes=u,t}function oa(e,t,a,i){return e=Ut(7,e,i,t),e.lanes=a,e}function Br(e,t,a){return e=Ut(6,e,null,t),e.lanes=a,e}function Lr(e,t,a){return t=Ut(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Ya=[],Ga=0,Vi=null,Zi=0,Gt=[],Pt=0,ca=null,pn=1,gn="";function ua(e,t){Ya[Ga++]=Zi,Ya[Ga++]=Vi,Vi=e,Zi=t}function Gu(e,t,a){Gt[Pt++]=pn,Gt[Pt++]=gn,Gt[Pt++]=ca,ca=e;var i=pn;e=gn;var r=32-kt(i)-1;i&=~(1<<r),a+=1;var u=32-kt(t)+r;if(30<u){var p=r-r%5;u=(i&(1<<p)-1).toString(32),i>>=p,r-=p,pn=1<<32-kt(t)+r|a<<r|i,gn=u+e}else pn=1<<u|a<<r|i,gn=e}function zr(e){e.return!==null&&(ua(e,1),Gu(e,1,0))}function Mr(e){for(;e===Vi;)Vi=Ya[--Ga],Ya[Ga]=null,Zi=Ya[--Ga],Ya[Ga]=null;for(;e===ca;)ca=Gt[--Pt],Gt[Pt]=null,gn=Gt[--Pt],Gt[Pt]=null,pn=Gt[--Pt],Gt[Pt]=null}var bt=null,$e=null,_e=!1,da=null,Wt=!1,Hr=Error(c(519));function fa(e){var t=Error(c(418,""));throw Ul(Ft(t,e)),Hr}function Pu(e){var t=e.stateNode,a=e.type,i=e.memoizedProps;switch(t[pt]=e,t[Nt]=i,a){case"dialog":Te("cancel",t),Te("close",t);break;case"iframe":case"object":case"embed":Te("load",t);break;case"video":case"audio":for(a=0;a<ni.length;a++)Te(ni[a],t);break;case"source":Te("error",t);break;case"img":case"image":case"link":Te("error",t),Te("load",t);break;case"details":Te("toggle",t);break;case"input":Te("invalid",t),iu(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0),Oi(t);break;case"select":Te("invalid",t);break;case"textarea":Te("invalid",t),ru(t,i.value,i.defaultValue,i.children),Oi(t)}a=i.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||i.suppressHydrationWarning===!0||oh(t.textContent,a)?(i.popover!=null&&(Te("beforetoggle",t),Te("toggle",t)),i.onScroll!=null&&Te("scroll",t),i.onScrollEnd!=null&&Te("scrollend",t),i.onClick!=null&&(t.onclick=Ds),t=!0):t=!1,t||fa(e)}function Qu(e){for(bt=e.return;bt;)switch(bt.tag){case 5:case 13:Wt=!1;return;case 27:case 3:Wt=!0;return;default:bt=bt.return}}function kl(e){if(e!==bt)return!1;if(!_e)return Qu(e),_e=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||nc(e.type,e.memoizedProps)),a=!a),a&&$e&&fa(e),Qu(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(a=e.data,a==="/$"){if(t===0){$e=Jt(e.nextSibling);break e}t--}else a!=="$"&&a!=="$!"&&a!=="$?"||t++;e=e.nextSibling}$e=null}}else t===27?(t=$e,Zn(e.type)?(e=sc,sc=null,$e=e):$e=t):$e=bt?Jt(e.stateNode.nextSibling):null;return!0}function Rl(){$e=bt=null,_e=!1}function Vu(){var e=da;return e!==null&&(Ct===null?Ct=e:Ct.push.apply(Ct,e),da=null),e}function Ul(e){da===null?da=[e]:da.push(e)}var qr=$(null),ha=null,xn=null;function Un(e,t,a){K(qr,t._currentValue),t._currentValue=a}function vn(e){e._currentValue=qr.current,F(qr)}function Fr(e,t,a){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===a)break;e=e.return}}function Yr(e,t,a,i){var r=e.child;for(r!==null&&(r.return=e);r!==null;){var u=r.dependencies;if(u!==null){var p=r.child;u=u.firstContext;e:for(;u!==null;){var j=u;u=r;for(var A=0;A<t.length;A++)if(j.context===t[A]){u.lanes|=a,j=u.alternate,j!==null&&(j.lanes|=a),Fr(u.return,a,e),i||(p=null);break e}u=j.next}}else if(r.tag===18){if(p=r.return,p===null)throw Error(c(341));p.lanes|=a,u=p.alternate,u!==null&&(u.lanes|=a),Fr(p,a,e),p=null}else p=r.child;if(p!==null)p.return=r;else for(p=r;p!==null;){if(p===e){p=null;break}if(r=p.sibling,r!==null){r.return=p.return,p=r;break}p=p.return}r=p}}function Ol(e,t,a,i){e=null;for(var r=t,u=!1;r!==null;){if(!u){if((r.flags&524288)!==0)u=!0;else if((r.flags&262144)!==0)break}if(r.tag===10){var p=r.alternate;if(p===null)throw Error(c(387));if(p=p.memoizedProps,p!==null){var j=r.type;Rt(r.pendingProps.value,p.value)||(e!==null?e.push(j):e=[j])}}else if(r===Pe.current){if(p=r.alternate,p===null)throw Error(c(387));p.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(e!==null?e.push(oi):e=[oi])}r=r.return}e!==null&&Yr(t,e,a,i),t.flags|=262144}function Xi(e){for(e=e.firstContext;e!==null;){if(!Rt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ma(e){ha=e,xn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function gt(e){return Zu(ha,e)}function $i(e,t){return ha===null&&ma(e),Zu(e,t)}function Zu(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},xn===null){if(e===null)throw Error(c(308));xn=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else xn=xn.next=t;return a}var rg=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},og=l.unstable_scheduleCallback,cg=l.unstable_NormalPriority,lt={$$typeof:z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Gr(){return{controller:new rg,data:new Map,refCount:0}}function _l(e){e.refCount--,e.refCount===0&&og(cg,function(){e.controller.abort()})}var Bl=null,Pr=0,Pa=0,Qa=null;function ug(e,t){if(Bl===null){var a=Bl=[];Pr=0,Pa=Zo(),Qa={status:"pending",value:void 0,then:function(i){a.push(i)}}}return Pr++,t.then(Xu,Xu),t}function Xu(){if(--Pr===0&&Bl!==null){Qa!==null&&(Qa.status="fulfilled");var e=Bl;Bl=null,Pa=0,Qa=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function dg(e,t){var a=[],i={status:"pending",value:null,reason:null,then:function(r){a.push(r)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var r=0;r<a.length;r++)(0,a[r])(t)},function(r){for(i.status="rejected",i.reason=r,r=0;r<a.length;r++)(0,a[r])(void 0)}),i}var $u=T.S;T.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&ug(e,t),$u!==null&&$u(e,t)};var pa=$(null);function Qr(){var e=pa.current;return e!==null?e:Ge.pooledCache}function Ji(e,t){t===null?K(pa,pa.current):K(pa,t.pool)}function Ju(){var e=Qr();return e===null?null:{parent:lt._currentValue,pool:e}}var Ll=Error(c(460)),Ku=Error(c(474)),Ki=Error(c(542)),Vr={then:function(){}};function Wu(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Wi(){}function Iu(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(Wi,Wi),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,td(e),e;default:if(typeof t.status=="string")t.then(Wi,Wi);else{if(e=Ge,e!==null&&100<e.shellSuspendCounter)throw Error(c(482));e=t,e.status="pending",e.then(function(i){if(t.status==="pending"){var r=t;r.status="fulfilled",r.value=i}},function(i){if(t.status==="pending"){var r=t;r.status="rejected",r.reason=i}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,td(e),e}throw zl=t,Ll}}var zl=null;function ed(){if(zl===null)throw Error(c(459));var e=zl;return zl=null,e}function td(e){if(e===Ll||e===Ki)throw Error(c(483))}var On=!1;function Zr(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Xr(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function _n(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Bn(e,t,a){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,(Le&2)!==0){var r=i.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),i.pending=t,t=Pi(e),Fu(e,null,a),t}return Gi(e,i,t,a),Pi(e)}function Ml(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var i=t.lanes;i&=e.pendingLanes,a|=i,t.lanes=a,Xc(e,a)}}function $r(e,t){var a=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,a===i)){var r=null,u=null;if(a=a.firstBaseUpdate,a!==null){do{var p={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};u===null?r=u=p:u=u.next=p,a=a.next}while(a!==null);u===null?r=u=t:u=u.next=t}else r=u=t;a={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:u,shared:i.shared,callbacks:i.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var Jr=!1;function Hl(){if(Jr){var e=Qa;if(e!==null)throw e}}function ql(e,t,a,i){Jr=!1;var r=e.updateQueue;On=!1;var u=r.firstBaseUpdate,p=r.lastBaseUpdate,j=r.shared.pending;if(j!==null){r.shared.pending=null;var A=j,G=A.next;A.next=null,p===null?u=G:p.next=G,p=A;var ne=e.alternate;ne!==null&&(ne=ne.updateQueue,j=ne.lastBaseUpdate,j!==p&&(j===null?ne.firstBaseUpdate=G:j.next=G,ne.lastBaseUpdate=A))}if(u!==null){var le=r.baseState;p=0,ne=G=A=null,j=u;do{var Q=j.lane&-536870913,V=Q!==j.lane;if(V?(Re&Q)===Q:(i&Q)===Q){Q!==0&&Q===Pa&&(Jr=!0),ne!==null&&(ne=ne.next={lane:0,tag:j.tag,payload:j.payload,callback:null,next:null});e:{var Ne=e,ye=j;Q=t;var qe=a;switch(ye.tag){case 1:if(Ne=ye.payload,typeof Ne=="function"){le=Ne.call(qe,le,Q);break e}le=Ne;break e;case 3:Ne.flags=Ne.flags&-65537|128;case 0:if(Ne=ye.payload,Q=typeof Ne=="function"?Ne.call(qe,le,Q):Ne,Q==null)break e;le=v({},le,Q);break e;case 2:On=!0}}Q=j.callback,Q!==null&&(e.flags|=64,V&&(e.flags|=8192),V=r.callbacks,V===null?r.callbacks=[Q]:V.push(Q))}else V={lane:Q,tag:j.tag,payload:j.payload,callback:j.callback,next:null},ne===null?(G=ne=V,A=le):ne=ne.next=V,p|=Q;if(j=j.next,j===null){if(j=r.shared.pending,j===null)break;V=j,j=V.next,V.next=null,r.lastBaseUpdate=V,r.shared.pending=null}}while(!0);ne===null&&(A=le),r.baseState=A,r.firstBaseUpdate=G,r.lastBaseUpdate=ne,u===null&&(r.shared.lanes=0),Gn|=p,e.lanes=p,e.memoizedState=le}}function nd(e,t){if(typeof e!="function")throw Error(c(191,e));e.call(t)}function ad(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)nd(a[e],t)}var Va=$(null),Ii=$(0);function ld(e,t){e=En,K(Ii,e),K(Va,t),En=e|t.baseLanes}function Kr(){K(Ii,En),K(Va,Va.current)}function Wr(){En=Ii.current,F(Va),F(Ii)}var Ln=0,Ee=null,Me=null,tt=null,es=!1,Za=!1,ga=!1,ts=0,Fl=0,Xa=null,fg=0;function We(){throw Error(c(321))}function Ir(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!Rt(e[a],t[a]))return!1;return!0}function eo(e,t,a,i,r,u){return Ln=u,Ee=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,T.H=e===null||e.memoizedState===null?Fd:Yd,ga=!1,u=a(i,r),ga=!1,Za&&(u=sd(t,a,i,r)),id(e),u}function id(e){T.H=rs;var t=Me!==null&&Me.next!==null;if(Ln=0,tt=Me=Ee=null,es=!1,Fl=0,Xa=null,t)throw Error(c(300));e===null||rt||(e=e.dependencies,e!==null&&Xi(e)&&(rt=!0))}function sd(e,t,a,i){Ee=e;var r=0;do{if(Za&&(Xa=null),Fl=0,Za=!1,25<=r)throw Error(c(301));if(r+=1,tt=Me=null,e.updateQueue!=null){var u=e.updateQueue;u.lastEffect=null,u.events=null,u.stores=null,u.memoCache!=null&&(u.memoCache.index=0)}T.H=yg,u=t(a,i)}while(Za);return u}function hg(){var e=T.H,t=e.useState()[0];return t=typeof t.then=="function"?Yl(t):t,e=e.useState()[0],(Me!==null?Me.memoizedState:null)!==e&&(Ee.flags|=1024),t}function to(){var e=ts!==0;return ts=0,e}function no(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function ao(e){if(es){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}es=!1}Ln=0,tt=Me=Ee=null,Za=!1,Fl=ts=0,Xa=null}function wt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tt===null?Ee.memoizedState=tt=e:tt=tt.next=e,tt}function nt(){if(Me===null){var e=Ee.alternate;e=e!==null?e.memoizedState:null}else e=Me.next;var t=tt===null?Ee.memoizedState:tt.next;if(t!==null)tt=t,Me=e;else{if(e===null)throw Ee.alternate===null?Error(c(467)):Error(c(310));Me=e,e={memoizedState:Me.memoizedState,baseState:Me.baseState,baseQueue:Me.baseQueue,queue:Me.queue,next:null},tt===null?Ee.memoizedState=tt=e:tt=tt.next=e}return tt}function lo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Yl(e){var t=Fl;return Fl+=1,Xa===null&&(Xa=[]),e=Iu(Xa,e,t),t=Ee,(tt===null?t.memoizedState:tt.next)===null&&(t=t.alternate,T.H=t===null||t.memoizedState===null?Fd:Yd),e}function ns(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Yl(e);if(e.$$typeof===z)return gt(e)}throw Error(c(438,String(e)))}function io(e){var t=null,a=Ee.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var i=Ee.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(t={data:i.data.map(function(r){return r.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=lo(),Ee.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),i=0;i<e;i++)a[i]=ee;return t.index++,a}function yn(e,t){return typeof t=="function"?t(e):t}function as(e){var t=nt();return so(t,Me,e)}function so(e,t,a){var i=e.queue;if(i===null)throw Error(c(311));i.lastRenderedReducer=a;var r=e.baseQueue,u=i.pending;if(u!==null){if(r!==null){var p=r.next;r.next=u.next,u.next=p}t.baseQueue=r=u,i.pending=null}if(u=e.baseState,r===null)e.memoizedState=u;else{t=r.next;var j=p=null,A=null,G=t,ne=!1;do{var le=G.lane&-536870913;if(le!==G.lane?(Re&le)===le:(Ln&le)===le){var Q=G.revertLane;if(Q===0)A!==null&&(A=A.next={lane:0,revertLane:0,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),le===Pa&&(ne=!0);else if((Ln&Q)===Q){G=G.next,Q===Pa&&(ne=!0);continue}else le={lane:0,revertLane:G.revertLane,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},A===null?(j=A=le,p=u):A=A.next=le,Ee.lanes|=Q,Gn|=Q;le=G.action,ga&&a(u,le),u=G.hasEagerState?G.eagerState:a(u,le)}else Q={lane:le,revertLane:G.revertLane,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},A===null?(j=A=Q,p=u):A=A.next=Q,Ee.lanes|=le,Gn|=le;G=G.next}while(G!==null&&G!==t);if(A===null?p=u:A.next=j,!Rt(u,e.memoizedState)&&(rt=!0,ne&&(a=Qa,a!==null)))throw a;e.memoizedState=u,e.baseState=p,e.baseQueue=A,i.lastRenderedState=u}return r===null&&(i.lanes=0),[e.memoizedState,i.dispatch]}function ro(e){var t=nt(),a=t.queue;if(a===null)throw Error(c(311));a.lastRenderedReducer=e;var i=a.dispatch,r=a.pending,u=t.memoizedState;if(r!==null){a.pending=null;var p=r=r.next;do u=e(u,p.action),p=p.next;while(p!==r);Rt(u,t.memoizedState)||(rt=!0),t.memoizedState=u,t.baseQueue===null&&(t.baseState=u),a.lastRenderedState=u}return[u,i]}function rd(e,t,a){var i=Ee,r=nt(),u=_e;if(u){if(a===void 0)throw Error(c(407));a=a()}else a=t();var p=!Rt((Me||r).memoizedState,a);p&&(r.memoizedState=a,rt=!0),r=r.queue;var j=ud.bind(null,i,r,e);if(Gl(2048,8,j,[e]),r.getSnapshot!==t||p||tt!==null&&tt.memoizedState.tag&1){if(i.flags|=2048,$a(9,ls(),cd.bind(null,i,r,a,t),null),Ge===null)throw Error(c(349));u||(Ln&124)!==0||od(i,t,a)}return a}function od(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=Ee.updateQueue,t===null?(t=lo(),Ee.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function cd(e,t,a,i){t.value=a,t.getSnapshot=i,dd(t)&&fd(e)}function ud(e,t,a){return a(function(){dd(t)&&fd(e)})}function dd(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!Rt(e,a)}catch{return!0}}function fd(e){var t=qa(e,2);t!==null&&zt(t,e,2)}function oo(e){var t=wt();if(typeof e=="function"){var a=e;if(e=a(),ga){An(!0);try{a()}finally{An(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:yn,lastRenderedState:e},t}function hd(e,t,a,i){return e.baseState=a,so(e,Me,typeof i=="function"?i:yn)}function mg(e,t,a,i,r){if(ss(e))throw Error(c(485));if(e=t.action,e!==null){var u={payload:r,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(p){u.listeners.push(p)}};T.T!==null?a(!0):u.isTransition=!1,i(u),a=t.pending,a===null?(u.next=t.pending=u,md(t,u)):(u.next=a.next,t.pending=a.next=u)}}function md(e,t){var a=t.action,i=t.payload,r=e.state;if(t.isTransition){var u=T.T,p={};T.T=p;try{var j=a(r,i),A=T.S;A!==null&&A(p,j),pd(e,t,j)}catch(G){co(e,t,G)}finally{T.T=u}}else try{u=a(r,i),pd(e,t,u)}catch(G){co(e,t,G)}}function pd(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(i){gd(e,t,i)},function(i){return co(e,t,i)}):gd(e,t,a)}function gd(e,t,a){t.status="fulfilled",t.value=a,xd(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,md(e,a)))}function co(e,t,a){var i=e.pending;if(e.pending=null,i!==null){i=i.next;do t.status="rejected",t.reason=a,xd(t),t=t.next;while(t!==i)}e.action=null}function xd(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function vd(e,t){return t}function yd(e,t){if(_e){var a=Ge.formState;if(a!==null){e:{var i=Ee;if(_e){if($e){t:{for(var r=$e,u=Wt;r.nodeType!==8;){if(!u){r=null;break t}if(r=Jt(r.nextSibling),r===null){r=null;break t}}u=r.data,r=u==="F!"||u==="F"?r:null}if(r){$e=Jt(r.nextSibling),i=r.data==="F!";break e}}fa(i)}i=!1}i&&(t=a[0])}}return a=wt(),a.memoizedState=a.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vd,lastRenderedState:t},a.queue=i,a=Md.bind(null,Ee,i),i.dispatch=a,i=oo(!1),u=po.bind(null,Ee,!1,i.queue),i=wt(),r={state:t,dispatch:null,action:e,pending:null},i.queue=r,a=mg.bind(null,Ee,r,u,a),r.dispatch=a,i.memoizedState=e,[t,a,!1]}function jd(e){var t=nt();return bd(t,Me,e)}function bd(e,t,a){if(t=so(e,t,vd)[0],e=as(yn)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var i=Yl(t)}catch(p){throw p===Ll?Ki:p}else i=t;t=nt();var r=t.queue,u=r.dispatch;return a!==t.memoizedState&&(Ee.flags|=2048,$a(9,ls(),pg.bind(null,r,a),null)),[i,u,e]}function pg(e,t){e.action=t}function Nd(e){var t=nt(),a=Me;if(a!==null)return bd(t,a,e);nt(),t=t.memoizedState,a=nt();var i=a.queue.dispatch;return a.memoizedState=e,[t,i,!1]}function $a(e,t,a,i){return e={tag:e,create:a,deps:i,inst:t,next:null},t=Ee.updateQueue,t===null&&(t=lo(),Ee.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(i=a.next,a.next=e,e.next=i,t.lastEffect=e),e}function ls(){return{destroy:void 0,resource:void 0}}function Sd(){return nt().memoizedState}function is(e,t,a,i){var r=wt();i=i===void 0?null:i,Ee.flags|=e,r.memoizedState=$a(1|t,ls(),a,i)}function Gl(e,t,a,i){var r=nt();i=i===void 0?null:i;var u=r.memoizedState.inst;Me!==null&&i!==null&&Ir(i,Me.memoizedState.deps)?r.memoizedState=$a(t,u,a,i):(Ee.flags|=e,r.memoizedState=$a(1|t,u,a,i))}function wd(e,t){is(8390656,8,e,t)}function Ed(e,t){Gl(2048,8,e,t)}function Cd(e,t){return Gl(4,2,e,t)}function Dd(e,t){return Gl(4,4,e,t)}function Td(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Ad(e,t,a){a=a!=null?a.concat([e]):null,Gl(4,4,Td.bind(null,t,e),a)}function uo(){}function kd(e,t){var a=nt();t=t===void 0?null:t;var i=a.memoizedState;return t!==null&&Ir(t,i[1])?i[0]:(a.memoizedState=[e,t],e)}function Rd(e,t){var a=nt();t=t===void 0?null:t;var i=a.memoizedState;if(t!==null&&Ir(t,i[1]))return i[0];if(i=e(),ga){An(!0);try{e()}finally{An(!1)}}return a.memoizedState=[i,t],i}function fo(e,t,a){return a===void 0||(Ln&1073741824)!==0?e.memoizedState=t:(e.memoizedState=a,e=Bf(),Ee.lanes|=e,Gn|=e,a)}function Ud(e,t,a,i){return Rt(a,t)?a:Va.current!==null?(e=fo(e,a,i),Rt(e,t)||(rt=!0),e):(Ln&42)===0?(rt=!0,e.memoizedState=a):(e=Bf(),Ee.lanes|=e,Gn|=e,t)}function Od(e,t,a,i,r){var u=q.p;q.p=u!==0&&8>u?u:8;var p=T.T,j={};T.T=j,po(e,!1,t,a);try{var A=r(),G=T.S;if(G!==null&&G(j,A),A!==null&&typeof A=="object"&&typeof A.then=="function"){var ne=dg(A,i);Pl(e,t,ne,Lt(e))}else Pl(e,t,i,Lt(e))}catch(le){Pl(e,t,{then:function(){},status:"rejected",reason:le},Lt())}finally{q.p=u,T.T=p}}function gg(){}function ho(e,t,a,i){if(e.tag!==5)throw Error(c(476));var r=_d(e).queue;Od(e,r,t,te,a===null?gg:function(){return Bd(e),a(i)})}function _d(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:te,baseState:te,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:yn,lastRenderedState:te},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:yn,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Bd(e){var t=_d(e).next.queue;Pl(e,t,{},Lt())}function mo(){return gt(oi)}function Ld(){return nt().memoizedState}function zd(){return nt().memoizedState}function xg(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=Lt();e=_n(a);var i=Bn(t,e,a);i!==null&&(zt(i,t,a),Ml(i,t,a)),t={cache:Gr()},e.payload=t;return}t=t.return}}function vg(e,t,a){var i=Lt();a={lane:i,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},ss(e)?Hd(t,a):(a=Or(e,t,a,i),a!==null&&(zt(a,e,i),qd(a,t,i)))}function Md(e,t,a){var i=Lt();Pl(e,t,a,i)}function Pl(e,t,a,i){var r={lane:i,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(ss(e))Hd(t,r);else{var u=e.alternate;if(e.lanes===0&&(u===null||u.lanes===0)&&(u=t.lastRenderedReducer,u!==null))try{var p=t.lastRenderedState,j=u(p,a);if(r.hasEagerState=!0,r.eagerState=j,Rt(j,p))return Gi(e,t,r,0),Ge===null&&Yi(),!1}catch{}finally{}if(a=Or(e,t,r,i),a!==null)return zt(a,e,i),qd(a,t,i),!0}return!1}function po(e,t,a,i){if(i={lane:2,revertLane:Zo(),action:i,hasEagerState:!1,eagerState:null,next:null},ss(e)){if(t)throw Error(c(479))}else t=Or(e,a,i,2),t!==null&&zt(t,e,2)}function ss(e){var t=e.alternate;return e===Ee||t!==null&&t===Ee}function Hd(e,t){Za=es=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function qd(e,t,a){if((a&4194048)!==0){var i=t.lanes;i&=e.pendingLanes,a|=i,t.lanes=a,Xc(e,a)}}var rs={readContext:gt,use:ns,useCallback:We,useContext:We,useEffect:We,useImperativeHandle:We,useLayoutEffect:We,useInsertionEffect:We,useMemo:We,useReducer:We,useRef:We,useState:We,useDebugValue:We,useDeferredValue:We,useTransition:We,useSyncExternalStore:We,useId:We,useHostTransitionStatus:We,useFormState:We,useActionState:We,useOptimistic:We,useMemoCache:We,useCacheRefresh:We},Fd={readContext:gt,use:ns,useCallback:function(e,t){return wt().memoizedState=[e,t===void 0?null:t],e},useContext:gt,useEffect:wd,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,is(4194308,4,Td.bind(null,t,e),a)},useLayoutEffect:function(e,t){return is(4194308,4,e,t)},useInsertionEffect:function(e,t){is(4,2,e,t)},useMemo:function(e,t){var a=wt();t=t===void 0?null:t;var i=e();if(ga){An(!0);try{e()}finally{An(!1)}}return a.memoizedState=[i,t],i},useReducer:function(e,t,a){var i=wt();if(a!==void 0){var r=a(t);if(ga){An(!0);try{a(t)}finally{An(!1)}}}else r=t;return i.memoizedState=i.baseState=r,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},i.queue=e,e=e.dispatch=vg.bind(null,Ee,e),[i.memoizedState,e]},useRef:function(e){var t=wt();return e={current:e},t.memoizedState=e},useState:function(e){e=oo(e);var t=e.queue,a=Md.bind(null,Ee,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:uo,useDeferredValue:function(e,t){var a=wt();return fo(a,e,t)},useTransition:function(){var e=oo(!1);return e=Od.bind(null,Ee,e.queue,!0,!1),wt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var i=Ee,r=wt();if(_e){if(a===void 0)throw Error(c(407));a=a()}else{if(a=t(),Ge===null)throw Error(c(349));(Re&124)!==0||od(i,t,a)}r.memoizedState=a;var u={value:a,getSnapshot:t};return r.queue=u,wd(ud.bind(null,i,u,e),[e]),i.flags|=2048,$a(9,ls(),cd.bind(null,i,u,a,t),null),a},useId:function(){var e=wt(),t=Ge.identifierPrefix;if(_e){var a=gn,i=pn;a=(i&~(1<<32-kt(i)-1)).toString(32)+a,t=""+t+"R"+a,a=ts++,0<a&&(t+="H"+a.toString(32)),t+=""}else a=fg++,t=""+t+"r"+a.toString(32)+"";return e.memoizedState=t},useHostTransitionStatus:mo,useFormState:yd,useActionState:yd,useOptimistic:function(e){var t=wt();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=po.bind(null,Ee,!0,a),a.dispatch=t,[e,t]},useMemoCache:io,useCacheRefresh:function(){return wt().memoizedState=xg.bind(null,Ee)}},Yd={readContext:gt,use:ns,useCallback:kd,useContext:gt,useEffect:Ed,useImperativeHandle:Ad,useInsertionEffect:Cd,useLayoutEffect:Dd,useMemo:Rd,useReducer:as,useRef:Sd,useState:function(){return as(yn)},useDebugValue:uo,useDeferredValue:function(e,t){var a=nt();return Ud(a,Me.memoizedState,e,t)},useTransition:function(){var e=as(yn)[0],t=nt().memoizedState;return[typeof e=="boolean"?e:Yl(e),t]},useSyncExternalStore:rd,useId:Ld,useHostTransitionStatus:mo,useFormState:jd,useActionState:jd,useOptimistic:function(e,t){var a=nt();return hd(a,Me,e,t)},useMemoCache:io,useCacheRefresh:zd},yg={readContext:gt,use:ns,useCallback:kd,useContext:gt,useEffect:Ed,useImperativeHandle:Ad,useInsertionEffect:Cd,useLayoutEffect:Dd,useMemo:Rd,useReducer:ro,useRef:Sd,useState:function(){return ro(yn)},useDebugValue:uo,useDeferredValue:function(e,t){var a=nt();return Me===null?fo(a,e,t):Ud(a,Me.memoizedState,e,t)},useTransition:function(){var e=ro(yn)[0],t=nt().memoizedState;return[typeof e=="boolean"?e:Yl(e),t]},useSyncExternalStore:rd,useId:Ld,useHostTransitionStatus:mo,useFormState:Nd,useActionState:Nd,useOptimistic:function(e,t){var a=nt();return Me!==null?hd(a,Me,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:io,useCacheRefresh:zd},Ja=null,Ql=0;function os(e){var t=Ql;return Ql+=1,Ja===null&&(Ja=[]),Iu(Ja,e,t)}function Vl(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function cs(e,t){throw t.$$typeof===x?Error(c(525)):(e=Object.prototype.toString.call(t),Error(c(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Gd(e){var t=e._init;return t(e._payload)}function Pd(e){function t(M,B){if(e){var Y=M.deletions;Y===null?(M.deletions=[B],M.flags|=16):Y.push(B)}}function a(M,B){if(!e)return null;for(;B!==null;)t(M,B),B=B.sibling;return null}function i(M){for(var B=new Map;M!==null;)M.key!==null?B.set(M.key,M):B.set(M.index,M),M=M.sibling;return B}function r(M,B){return M=mn(M,B),M.index=0,M.sibling=null,M}function u(M,B,Y){return M.index=Y,e?(Y=M.alternate,Y!==null?(Y=Y.index,Y<B?(M.flags|=67108866,B):Y):(M.flags|=67108866,B)):(M.flags|=1048576,B)}function p(M){return e&&M.alternate===null&&(M.flags|=67108866),M}function j(M,B,Y,ae){return B===null||B.tag!==6?(B=Br(Y,M.mode,ae),B.return=M,B):(B=r(B,Y),B.return=M,B)}function A(M,B,Y,ae){var pe=Y.type;return pe===N?ne(M,B,Y.props.children,ae,Y.key):B!==null&&(B.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===P&&Gd(pe)===B.type)?(B=r(B,Y.props),Vl(B,Y),B.return=M,B):(B=Qi(Y.type,Y.key,Y.props,null,M.mode,ae),Vl(B,Y),B.return=M,B)}function G(M,B,Y,ae){return B===null||B.tag!==4||B.stateNode.containerInfo!==Y.containerInfo||B.stateNode.implementation!==Y.implementation?(B=Lr(Y,M.mode,ae),B.return=M,B):(B=r(B,Y.children||[]),B.return=M,B)}function ne(M,B,Y,ae,pe){return B===null||B.tag!==7?(B=oa(Y,M.mode,ae,pe),B.return=M,B):(B=r(B,Y),B.return=M,B)}function le(M,B,Y){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=Br(""+B,M.mode,Y),B.return=M,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case S:return Y=Qi(B.type,B.key,B.props,null,M.mode,Y),Vl(Y,B),Y.return=M,Y;case R:return B=Lr(B,M.mode,Y),B.return=M,B;case P:var ae=B._init;return B=ae(B._payload),le(M,B,Y)}if(_(B)||ce(B))return B=oa(B,M.mode,Y,null),B.return=M,B;if(typeof B.then=="function")return le(M,os(B),Y);if(B.$$typeof===z)return le(M,$i(M,B),Y);cs(M,B)}return null}function Q(M,B,Y,ae){var pe=B!==null?B.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return pe!==null?null:j(M,B,""+Y,ae);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case S:return Y.key===pe?A(M,B,Y,ae):null;case R:return Y.key===pe?G(M,B,Y,ae):null;case P:return pe=Y._init,Y=pe(Y._payload),Q(M,B,Y,ae)}if(_(Y)||ce(Y))return pe!==null?null:ne(M,B,Y,ae,null);if(typeof Y.then=="function")return Q(M,B,os(Y),ae);if(Y.$$typeof===z)return Q(M,B,$i(M,Y),ae);cs(M,Y)}return null}function V(M,B,Y,ae,pe){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return M=M.get(Y)||null,j(B,M,""+ae,pe);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case S:return M=M.get(ae.key===null?Y:ae.key)||null,A(B,M,ae,pe);case R:return M=M.get(ae.key===null?Y:ae.key)||null,G(B,M,ae,pe);case P:var Ce=ae._init;return ae=Ce(ae._payload),V(M,B,Y,ae,pe)}if(_(ae)||ce(ae))return M=M.get(Y)||null,ne(B,M,ae,pe,null);if(typeof ae.then=="function")return V(M,B,Y,os(ae),pe);if(ae.$$typeof===z)return V(M,B,Y,$i(B,ae),pe);cs(B,ae)}return null}function Ne(M,B,Y,ae){for(var pe=null,Ce=null,xe=B,je=B=0,ct=null;xe!==null&&je<Y.length;je++){xe.index>je?(ct=xe,xe=null):ct=xe.sibling;var Ue=Q(M,xe,Y[je],ae);if(Ue===null){xe===null&&(xe=ct);break}e&&xe&&Ue.alternate===null&&t(M,xe),B=u(Ue,B,je),Ce===null?pe=Ue:Ce.sibling=Ue,Ce=Ue,xe=ct}if(je===Y.length)return a(M,xe),_e&&ua(M,je),pe;if(xe===null){for(;je<Y.length;je++)xe=le(M,Y[je],ae),xe!==null&&(B=u(xe,B,je),Ce===null?pe=xe:Ce.sibling=xe,Ce=xe);return _e&&ua(M,je),pe}for(xe=i(xe);je<Y.length;je++)ct=V(xe,M,je,Y[je],ae),ct!==null&&(e&&ct.alternate!==null&&xe.delete(ct.key===null?je:ct.key),B=u(ct,B,je),Ce===null?pe=ct:Ce.sibling=ct,Ce=ct);return e&&xe.forEach(function(Wn){return t(M,Wn)}),_e&&ua(M,je),pe}function ye(M,B,Y,ae){if(Y==null)throw Error(c(151));for(var pe=null,Ce=null,xe=B,je=B=0,ct=null,Ue=Y.next();xe!==null&&!Ue.done;je++,Ue=Y.next()){xe.index>je?(ct=xe,xe=null):ct=xe.sibling;var Wn=Q(M,xe,Ue.value,ae);if(Wn===null){xe===null&&(xe=ct);break}e&&xe&&Wn.alternate===null&&t(M,xe),B=u(Wn,B,je),Ce===null?pe=Wn:Ce.sibling=Wn,Ce=Wn,xe=ct}if(Ue.done)return a(M,xe),_e&&ua(M,je),pe;if(xe===null){for(;!Ue.done;je++,Ue=Y.next())Ue=le(M,Ue.value,ae),Ue!==null&&(B=u(Ue,B,je),Ce===null?pe=Ue:Ce.sibling=Ue,Ce=Ue);return _e&&ua(M,je),pe}for(xe=i(xe);!Ue.done;je++,Ue=Y.next())Ue=V(xe,M,je,Ue.value,ae),Ue!==null&&(e&&Ue.alternate!==null&&xe.delete(Ue.key===null?je:Ue.key),B=u(Ue,B,je),Ce===null?pe=Ue:Ce.sibling=Ue,Ce=Ue);return e&&xe.forEach(function(jx){return t(M,jx)}),_e&&ua(M,je),pe}function qe(M,B,Y,ae){if(typeof Y=="object"&&Y!==null&&Y.type===N&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case S:e:{for(var pe=Y.key;B!==null;){if(B.key===pe){if(pe=Y.type,pe===N){if(B.tag===7){a(M,B.sibling),ae=r(B,Y.props.children),ae.return=M,M=ae;break e}}else if(B.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===P&&Gd(pe)===B.type){a(M,B.sibling),ae=r(B,Y.props),Vl(ae,Y),ae.return=M,M=ae;break e}a(M,B);break}else t(M,B);B=B.sibling}Y.type===N?(ae=oa(Y.props.children,M.mode,ae,Y.key),ae.return=M,M=ae):(ae=Qi(Y.type,Y.key,Y.props,null,M.mode,ae),Vl(ae,Y),ae.return=M,M=ae)}return p(M);case R:e:{for(pe=Y.key;B!==null;){if(B.key===pe)if(B.tag===4&&B.stateNode.containerInfo===Y.containerInfo&&B.stateNode.implementation===Y.implementation){a(M,B.sibling),ae=r(B,Y.children||[]),ae.return=M,M=ae;break e}else{a(M,B);break}else t(M,B);B=B.sibling}ae=Lr(Y,M.mode,ae),ae.return=M,M=ae}return p(M);case P:return pe=Y._init,Y=pe(Y._payload),qe(M,B,Y,ae)}if(_(Y))return Ne(M,B,Y,ae);if(ce(Y)){if(pe=ce(Y),typeof pe!="function")throw Error(c(150));return Y=pe.call(Y),ye(M,B,Y,ae)}if(typeof Y.then=="function")return qe(M,B,os(Y),ae);if(Y.$$typeof===z)return qe(M,B,$i(M,Y),ae);cs(M,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,B!==null&&B.tag===6?(a(M,B.sibling),ae=r(B,Y),ae.return=M,M=ae):(a(M,B),ae=Br(Y,M.mode,ae),ae.return=M,M=ae),p(M)):a(M,B)}return function(M,B,Y,ae){try{Ql=0;var pe=qe(M,B,Y,ae);return Ja=null,pe}catch(xe){if(xe===Ll||xe===Ki)throw xe;var Ce=Ut(29,xe,null,M.mode);return Ce.lanes=ae,Ce.return=M,Ce}finally{}}}var Ka=Pd(!0),Qd=Pd(!1),Qt=$(null),It=null;function zn(e){var t=e.alternate;K(it,it.current&1),K(Qt,e),It===null&&(t===null||Va.current!==null||t.memoizedState!==null)&&(It=e)}function Vd(e){if(e.tag===22){if(K(it,it.current),K(Qt,e),It===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(It=e)}}else Mn()}function Mn(){K(it,it.current),K(Qt,Qt.current)}function jn(e){F(Qt),It===e&&(It=null),F(it)}var it=$(0);function us(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||ic(a)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function go(e,t,a,i){t=e.memoizedState,a=a(i,t),a=a==null?t:v({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var xo={enqueueSetState:function(e,t,a){e=e._reactInternals;var i=Lt(),r=_n(i);r.payload=t,a!=null&&(r.callback=a),t=Bn(e,r,i),t!==null&&(zt(t,e,i),Ml(t,e,i))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var i=Lt(),r=_n(i);r.tag=1,r.payload=t,a!=null&&(r.callback=a),t=Bn(e,r,i),t!==null&&(zt(t,e,i),Ml(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=Lt(),i=_n(a);i.tag=2,t!=null&&(i.callback=t),t=Bn(e,i,a),t!==null&&(zt(t,e,a),Ml(t,e,a))}};function Zd(e,t,a,i,r,u,p){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,u,p):t.prototype&&t.prototype.isPureReactComponent?!Tl(a,i)||!Tl(r,u):!0}function Xd(e,t,a,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,i),t.state!==e&&xo.enqueueReplaceState(t,t.state,null)}function xa(e,t){var a=t;if("ref"in t){a={};for(var i in t)i!=="ref"&&(a[i]=t[i])}if(e=e.defaultProps){a===t&&(a=v({},a));for(var r in e)a[r]===void 0&&(a[r]=e[r])}return a}var ds=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function $d(e){ds(e)}function Jd(e){console.error(e)}function Kd(e){ds(e)}function fs(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function Wd(e,t,a){try{var i=e.onCaughtError;i(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function vo(e,t,a){return a=_n(a),a.tag=3,a.payload={element:null},a.callback=function(){fs(e,t)},a}function Id(e){return e=_n(e),e.tag=3,e}function ef(e,t,a,i){var r=a.type.getDerivedStateFromError;if(typeof r=="function"){var u=i.value;e.payload=function(){return r(u)},e.callback=function(){Wd(t,a,i)}}var p=a.stateNode;p!==null&&typeof p.componentDidCatch=="function"&&(e.callback=function(){Wd(t,a,i),typeof r!="function"&&(Pn===null?Pn=new Set([this]):Pn.add(this));var j=i.stack;this.componentDidCatch(i.value,{componentStack:j!==null?j:""})})}function jg(e,t,a,i,r){if(a.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(t=a.alternate,t!==null&&Ol(t,a,r,!0),a=Qt.current,a!==null){switch(a.tag){case 13:return It===null?Yo():a.alternate===null&&Je===0&&(Je=3),a.flags&=-257,a.flags|=65536,a.lanes=r,i===Vr?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([i]):t.add(i),Po(e,i,r)),!1;case 22:return a.flags|=65536,i===Vr?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([i]):a.add(i)),Po(e,i,r)),!1}throw Error(c(435,a.tag))}return Po(e,i,r),Yo(),!1}if(_e)return t=Qt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=r,i!==Hr&&(e=Error(c(422),{cause:i}),Ul(Ft(e,a)))):(i!==Hr&&(t=Error(c(423),{cause:i}),Ul(Ft(t,a))),e=e.current.alternate,e.flags|=65536,r&=-r,e.lanes|=r,i=Ft(i,a),r=vo(e.stateNode,i,r),$r(e,r),Je!==4&&(Je=2)),!1;var u=Error(c(520),{cause:i});if(u=Ft(u,a),Il===null?Il=[u]:Il.push(u),Je!==4&&(Je=2),t===null)return!0;i=Ft(i,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=r&-r,a.lanes|=e,e=vo(a.stateNode,i,e),$r(a,e),!1;case 1:if(t=a.type,u=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||u!==null&&typeof u.componentDidCatch=="function"&&(Pn===null||!Pn.has(u))))return a.flags|=65536,r&=-r,a.lanes|=r,r=Id(r),ef(r,e,a,i),$r(a,r),!1}a=a.return}while(a!==null);return!1}var tf=Error(c(461)),rt=!1;function dt(e,t,a,i){t.child=e===null?Qd(t,null,a,i):Ka(t,e.child,a,i)}function nf(e,t,a,i,r){a=a.render;var u=t.ref;if("ref"in i){var p={};for(var j in i)j!=="ref"&&(p[j]=i[j])}else p=i;return ma(t),i=eo(e,t,a,p,u,r),j=to(),e!==null&&!rt?(no(e,t,r),bn(e,t,r)):(_e&&j&&zr(t),t.flags|=1,dt(e,t,i,r),t.child)}function af(e,t,a,i,r){if(e===null){var u=a.type;return typeof u=="function"&&!_r(u)&&u.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=u,lf(e,t,u,i,r)):(e=Qi(a.type,null,i,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(u=e.child,!Co(e,r)){var p=u.memoizedProps;if(a=a.compare,a=a!==null?a:Tl,a(p,i)&&e.ref===t.ref)return bn(e,t,r)}return t.flags|=1,e=mn(u,i),e.ref=t.ref,e.return=t,t.child=e}function lf(e,t,a,i,r){if(e!==null){var u=e.memoizedProps;if(Tl(u,i)&&e.ref===t.ref)if(rt=!1,t.pendingProps=i=u,Co(e,r))(e.flags&131072)!==0&&(rt=!0);else return t.lanes=e.lanes,bn(e,t,r)}return yo(e,t,a,i,r)}function sf(e,t,a){var i=t.pendingProps,r=i.children,u=e!==null?e.memoizedState:null;if(i.mode==="hidden"){if((t.flags&128)!==0){if(i=u!==null?u.baseLanes|a:a,e!==null){for(r=t.child=e.child,u=0;r!==null;)u=u|r.lanes|r.childLanes,r=r.sibling;t.childLanes=u&~i}else t.childLanes=0,t.child=null;return rf(e,t,i,a)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Ji(t,u!==null?u.cachePool:null),u!==null?ld(t,u):Kr(),Vd(t);else return t.lanes=t.childLanes=536870912,rf(e,t,u!==null?u.baseLanes|a:a,a)}else u!==null?(Ji(t,u.cachePool),ld(t,u),Mn(),t.memoizedState=null):(e!==null&&Ji(t,null),Kr(),Mn());return dt(e,t,r,a),t.child}function rf(e,t,a,i){var r=Qr();return r=r===null?null:{parent:lt._currentValue,pool:r},t.memoizedState={baseLanes:a,cachePool:r},e!==null&&Ji(t,null),Kr(),Vd(t),e!==null&&Ol(e,t,i,!0),null}function hs(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(c(284));(e===null||e.ref!==a)&&(t.flags|=4194816)}}function yo(e,t,a,i,r){return ma(t),a=eo(e,t,a,i,void 0,r),i=to(),e!==null&&!rt?(no(e,t,r),bn(e,t,r)):(_e&&i&&zr(t),t.flags|=1,dt(e,t,a,r),t.child)}function of(e,t,a,i,r,u){return ma(t),t.updateQueue=null,a=sd(t,i,a,r),id(e),i=to(),e!==null&&!rt?(no(e,t,u),bn(e,t,u)):(_e&&i&&zr(t),t.flags|=1,dt(e,t,a,u),t.child)}function cf(e,t,a,i,r){if(ma(t),t.stateNode===null){var u=Fa,p=a.contextType;typeof p=="object"&&p!==null&&(u=gt(p)),u=new a(i,u),t.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=xo,t.stateNode=u,u._reactInternals=t,u=t.stateNode,u.props=i,u.state=t.memoizedState,u.refs={},Zr(t),p=a.contextType,u.context=typeof p=="object"&&p!==null?gt(p):Fa,u.state=t.memoizedState,p=a.getDerivedStateFromProps,typeof p=="function"&&(go(t,a,p,i),u.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(p=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),p!==u.state&&xo.enqueueReplaceState(u,u.state,null),ql(t,i,u,r),Hl(),u.state=t.memoizedState),typeof u.componentDidMount=="function"&&(t.flags|=4194308),i=!0}else if(e===null){u=t.stateNode;var j=t.memoizedProps,A=xa(a,j);u.props=A;var G=u.context,ne=a.contextType;p=Fa,typeof ne=="object"&&ne!==null&&(p=gt(ne));var le=a.getDerivedStateFromProps;ne=typeof le=="function"||typeof u.getSnapshotBeforeUpdate=="function",j=t.pendingProps!==j,ne||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(j||G!==p)&&Xd(t,u,i,p),On=!1;var Q=t.memoizedState;u.state=Q,ql(t,i,u,r),Hl(),G=t.memoizedState,j||Q!==G||On?(typeof le=="function"&&(go(t,a,le,i),G=t.memoizedState),(A=On||Zd(t,a,A,i,Q,G,p))?(ne||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(t.flags|=4194308)):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=G),u.props=i,u.state=G,u.context=p,i=A):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{u=t.stateNode,Xr(e,t),p=t.memoizedProps,ne=xa(a,p),u.props=ne,le=t.pendingProps,Q=u.context,G=a.contextType,A=Fa,typeof G=="object"&&G!==null&&(A=gt(G)),j=a.getDerivedStateFromProps,(G=typeof j=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(p!==le||Q!==A)&&Xd(t,u,i,A),On=!1,Q=t.memoizedState,u.state=Q,ql(t,i,u,r),Hl();var V=t.memoizedState;p!==le||Q!==V||On||e!==null&&e.dependencies!==null&&Xi(e.dependencies)?(typeof j=="function"&&(go(t,a,j,i),V=t.memoizedState),(ne=On||Zd(t,a,ne,i,Q,V,A)||e!==null&&e.dependencies!==null&&Xi(e.dependencies))?(G||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(i,V,A),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(i,V,A)),typeof u.componentDidUpdate=="function"&&(t.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof u.componentDidUpdate!="function"||p===e.memoizedProps&&Q===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||p===e.memoizedProps&&Q===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=V),u.props=i,u.state=V,u.context=A,i=ne):(typeof u.componentDidUpdate!="function"||p===e.memoizedProps&&Q===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||p===e.memoizedProps&&Q===e.memoizedState||(t.flags|=1024),i=!1)}return u=i,hs(e,t),i=(t.flags&128)!==0,u||i?(u=t.stateNode,a=i&&typeof a.getDerivedStateFromError!="function"?null:u.render(),t.flags|=1,e!==null&&i?(t.child=Ka(t,e.child,null,r),t.child=Ka(t,null,a,r)):dt(e,t,a,r),t.memoizedState=u.state,e=t.child):e=bn(e,t,r),e}function uf(e,t,a,i){return Rl(),t.flags|=256,dt(e,t,a,i),t.child}var jo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function bo(e){return{baseLanes:e,cachePool:Ju()}}function No(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=Vt),e}function df(e,t,a){var i=t.pendingProps,r=!1,u=(t.flags&128)!==0,p;if((p=u)||(p=e!==null&&e.memoizedState===null?!1:(it.current&2)!==0),p&&(r=!0,t.flags&=-129),p=(t.flags&32)!==0,t.flags&=-33,e===null){if(_e){if(r?zn(t):Mn(),_e){var j=$e,A;if(A=j){e:{for(A=j,j=Wt;A.nodeType!==8;){if(!j){j=null;break e}if(A=Jt(A.nextSibling),A===null){j=null;break e}}j=A}j!==null?(t.memoizedState={dehydrated:j,treeContext:ca!==null?{id:pn,overflow:gn}:null,retryLane:536870912,hydrationErrors:null},A=Ut(18,null,null,0),A.stateNode=j,A.return=t,t.child=A,bt=t,$e=null,A=!0):A=!1}A||fa(t)}if(j=t.memoizedState,j!==null&&(j=j.dehydrated,j!==null))return ic(j)?t.lanes=32:t.lanes=536870912,null;jn(t)}return j=i.children,i=i.fallback,r?(Mn(),r=t.mode,j=ms({mode:"hidden",children:j},r),i=oa(i,r,a,null),j.return=t,i.return=t,j.sibling=i,t.child=j,r=t.child,r.memoizedState=bo(a),r.childLanes=No(e,p,a),t.memoizedState=jo,i):(zn(t),So(t,j))}if(A=e.memoizedState,A!==null&&(j=A.dehydrated,j!==null)){if(u)t.flags&256?(zn(t),t.flags&=-257,t=wo(e,t,a)):t.memoizedState!==null?(Mn(),t.child=e.child,t.flags|=128,t=null):(Mn(),r=i.fallback,j=t.mode,i=ms({mode:"visible",children:i.children},j),r=oa(r,j,a,null),r.flags|=2,i.return=t,r.return=t,i.sibling=r,t.child=i,Ka(t,e.child,null,a),i=t.child,i.memoizedState=bo(a),i.childLanes=No(e,p,a),t.memoizedState=jo,t=r);else if(zn(t),ic(j)){if(p=j.nextSibling&&j.nextSibling.dataset,p)var G=p.dgst;p=G,i=Error(c(419)),i.stack="",i.digest=p,Ul({value:i,source:null,stack:null}),t=wo(e,t,a)}else if(rt||Ol(e,t,a,!1),p=(a&e.childLanes)!==0,rt||p){if(p=Ge,p!==null&&(i=a&-a,i=(i&42)!==0?1:ir(i),i=(i&(p.suspendedLanes|a))!==0?0:i,i!==0&&i!==A.retryLane))throw A.retryLane=i,qa(e,i),zt(p,e,i),tf;j.data==="$?"||Yo(),t=wo(e,t,a)}else j.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=A.treeContext,$e=Jt(j.nextSibling),bt=t,_e=!0,da=null,Wt=!1,e!==null&&(Gt[Pt++]=pn,Gt[Pt++]=gn,Gt[Pt++]=ca,pn=e.id,gn=e.overflow,ca=t),t=So(t,i.children),t.flags|=4096);return t}return r?(Mn(),r=i.fallback,j=t.mode,A=e.child,G=A.sibling,i=mn(A,{mode:"hidden",children:i.children}),i.subtreeFlags=A.subtreeFlags&65011712,G!==null?r=mn(G,r):(r=oa(r,j,a,null),r.flags|=2),r.return=t,i.return=t,i.sibling=r,t.child=i,i=r,r=t.child,j=e.child.memoizedState,j===null?j=bo(a):(A=j.cachePool,A!==null?(G=lt._currentValue,A=A.parent!==G?{parent:G,pool:G}:A):A=Ju(),j={baseLanes:j.baseLanes|a,cachePool:A}),r.memoizedState=j,r.childLanes=No(e,p,a),t.memoizedState=jo,i):(zn(t),a=e.child,e=a.sibling,a=mn(a,{mode:"visible",children:i.children}),a.return=t,a.sibling=null,e!==null&&(p=t.deletions,p===null?(t.deletions=[e],t.flags|=16):p.push(e)),t.child=a,t.memoizedState=null,a)}function So(e,t){return t=ms({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function ms(e,t){return e=Ut(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function wo(e,t,a){return Ka(t,e.child,null,a),e=So(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function ff(e,t,a){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),Fr(e.return,t,a)}function Eo(e,t,a,i,r){var u=e.memoizedState;u===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:a,tailMode:r}:(u.isBackwards=t,u.rendering=null,u.renderingStartTime=0,u.last=i,u.tail=a,u.tailMode=r)}function hf(e,t,a){var i=t.pendingProps,r=i.revealOrder,u=i.tail;if(dt(e,t,i.children,a),i=it.current,(i&2)!==0)i=i&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ff(e,a,t);else if(e.tag===19)ff(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}switch(K(it,i),r){case"forwards":for(a=t.child,r=null;a!==null;)e=a.alternate,e!==null&&us(e)===null&&(r=a),a=a.sibling;a=r,a===null?(r=t.child,t.child=null):(r=a.sibling,a.sibling=null),Eo(t,!1,r,a,u);break;case"backwards":for(a=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&us(e)===null){t.child=r;break}e=r.sibling,r.sibling=a,a=r,r=e}Eo(t,!0,a,null,u);break;case"together":Eo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function bn(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),Gn|=t.lanes,(a&t.childLanes)===0)if(e!==null){if(Ol(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(c(153));if(t.child!==null){for(e=t.child,a=mn(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=mn(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function Co(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Xi(e)))}function bg(e,t,a){switch(t.tag){case 3:re(t,t.stateNode.containerInfo),Un(t,lt,e.memoizedState.cache),Rl();break;case 27:case 5:Ke(t);break;case 4:re(t,t.stateNode.containerInfo);break;case 10:Un(t,t.type,t.memoizedProps.value);break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(zn(t),t.flags|=128,null):(a&t.child.childLanes)!==0?df(e,t,a):(zn(t),e=bn(e,t,a),e!==null?e.sibling:null);zn(t);break;case 19:var r=(e.flags&128)!==0;if(i=(a&t.childLanes)!==0,i||(Ol(e,t,a,!1),i=(a&t.childLanes)!==0),r){if(i)return hf(e,t,a);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),K(it,it.current),i)break;return null;case 22:case 23:return t.lanes=0,sf(e,t,a);case 24:Un(t,lt,e.memoizedState.cache)}return bn(e,t,a)}function mf(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)rt=!0;else{if(!Co(e,a)&&(t.flags&128)===0)return rt=!1,bg(e,t,a);rt=(e.flags&131072)!==0}else rt=!1,_e&&(t.flags&1048576)!==0&&Gu(t,Zi,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var i=t.elementType,r=i._init;if(i=r(i._payload),t.type=i,typeof i=="function")_r(i)?(e=xa(i,e),t.tag=1,t=cf(null,t,i,e,a)):(t.tag=0,t=yo(null,t,i,e,a));else{if(i!=null){if(r=i.$$typeof,r===J){t.tag=11,t=nf(null,t,i,e,a);break e}else if(r===k){t.tag=14,t=af(null,t,i,e,a);break e}}throw t=oe(i)||i,Error(c(306,t,""))}}return t;case 0:return yo(e,t,t.type,t.pendingProps,a);case 1:return i=t.type,r=xa(i,t.pendingProps),cf(e,t,i,r,a);case 3:e:{if(re(t,t.stateNode.containerInfo),e===null)throw Error(c(387));i=t.pendingProps;var u=t.memoizedState;r=u.element,Xr(e,t),ql(t,i,null,a);var p=t.memoizedState;if(i=p.cache,Un(t,lt,i),i!==u.cache&&Yr(t,[lt],a,!0),Hl(),i=p.element,u.isDehydrated)if(u={element:i,isDehydrated:!1,cache:p.cache},t.updateQueue.baseState=u,t.memoizedState=u,t.flags&256){t=uf(e,t,i,a);break e}else if(i!==r){r=Ft(Error(c(424)),t),Ul(r),t=uf(e,t,i,a);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for($e=Jt(e.firstChild),bt=t,_e=!0,da=null,Wt=!0,a=Qd(t,null,i,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Rl(),i===r){t=bn(e,t,a);break e}dt(e,t,i,a)}t=t.child}return t;case 26:return hs(e,t),e===null?(a=vh(t.type,null,t.pendingProps,null))?t.memoizedState=a:_e||(a=t.type,e=t.pendingProps,i=Ts(me.current).createElement(a),i[pt]=t,i[Nt]=e,ht(i,a,e),st(i),t.stateNode=i):t.memoizedState=vh(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Ke(t),e===null&&_e&&(i=t.stateNode=ph(t.type,t.pendingProps,me.current),bt=t,Wt=!0,r=$e,Zn(t.type)?(sc=r,$e=Jt(i.firstChild)):$e=r),dt(e,t,t.pendingProps.children,a),hs(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&_e&&((r=i=$e)&&(i=$g(i,t.type,t.pendingProps,Wt),i!==null?(t.stateNode=i,bt=t,$e=Jt(i.firstChild),Wt=!1,r=!0):r=!1),r||fa(t)),Ke(t),r=t.type,u=t.pendingProps,p=e!==null?e.memoizedProps:null,i=u.children,nc(r,u)?i=null:p!==null&&nc(r,p)&&(t.flags|=32),t.memoizedState!==null&&(r=eo(e,t,hg,null,null,a),oi._currentValue=r),hs(e,t),dt(e,t,i,a),t.child;case 6:return e===null&&_e&&((e=a=$e)&&(a=Jg(a,t.pendingProps,Wt),a!==null?(t.stateNode=a,bt=t,$e=null,e=!0):e=!1),e||fa(t)),null;case 13:return df(e,t,a);case 4:return re(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=Ka(t,null,i,a):dt(e,t,i,a),t.child;case 11:return nf(e,t,t.type,t.pendingProps,a);case 7:return dt(e,t,t.pendingProps,a),t.child;case 8:return dt(e,t,t.pendingProps.children,a),t.child;case 12:return dt(e,t,t.pendingProps.children,a),t.child;case 10:return i=t.pendingProps,Un(t,t.type,i.value),dt(e,t,i.children,a),t.child;case 9:return r=t.type._context,i=t.pendingProps.children,ma(t),r=gt(r),i=i(r),t.flags|=1,dt(e,t,i,a),t.child;case 14:return af(e,t,t.type,t.pendingProps,a);case 15:return lf(e,t,t.type,t.pendingProps,a);case 19:return hf(e,t,a);case 31:return i=t.pendingProps,a=t.mode,i={mode:i.mode,children:i.children},e===null?(a=ms(i,a),a.ref=t.ref,t.child=a,a.return=t,t=a):(a=mn(e.child,i),a.ref=t.ref,t.child=a,a.return=t,t=a),t;case 22:return sf(e,t,a);case 24:return ma(t),i=gt(lt),e===null?(r=Qr(),r===null&&(r=Ge,u=Gr(),r.pooledCache=u,u.refCount++,u!==null&&(r.pooledCacheLanes|=a),r=u),t.memoizedState={parent:i,cache:r},Zr(t),Un(t,lt,r)):((e.lanes&a)!==0&&(Xr(e,t),ql(t,null,null,a),Hl()),r=e.memoizedState,u=t.memoizedState,r.parent!==i?(r={parent:i,cache:i},t.memoizedState=r,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=r),Un(t,lt,i)):(i=u.cache,Un(t,lt,i),i!==r.cache&&Yr(t,[lt],a,!0))),dt(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(c(156,t.tag))}function Nn(e){e.flags|=4}function pf(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Sh(t)){if(t=Qt.current,t!==null&&((Re&4194048)===Re?It!==null:(Re&62914560)!==Re&&(Re&536870912)===0||t!==It))throw zl=Vr,Ku;e.flags|=8192}}function ps(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Vc():536870912,e.lanes|=t,tl|=t)}function Zl(e,t){if(!_e)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var i=null;a!==null;)a.alternate!==null&&(i=a),a=a.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Ve(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,i=0;if(t)for(var r=e.child;r!==null;)a|=r.lanes|r.childLanes,i|=r.subtreeFlags&65011712,i|=r.flags&65011712,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)a|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=a,t}function Ng(e,t,a){var i=t.pendingProps;switch(Mr(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ve(t),null;case 1:return Ve(t),null;case 3:return a=t.stateNode,i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),vn(lt),be(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(kl(t)?Nn(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Vu())),Ve(t),null;case 26:return a=t.memoizedState,e===null?(Nn(t),a!==null?(Ve(t),pf(t,a)):(Ve(t),t.flags&=-16777217)):a?a!==e.memoizedState?(Nn(t),Ve(t),pf(t,a)):(Ve(t),t.flags&=-16777217):(e.memoizedProps!==i&&Nn(t),Ve(t),t.flags&=-16777217),null;case 27:fe(t),a=me.current;var r=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==i&&Nn(t);else{if(!i){if(t.stateNode===null)throw Error(c(166));return Ve(t),null}e=se.current,kl(t)?Pu(t):(e=ph(r,i,a),t.stateNode=e,Nn(t))}return Ve(t),null;case 5:if(fe(t),a=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&Nn(t);else{if(!i){if(t.stateNode===null)throw Error(c(166));return Ve(t),null}if(e=se.current,kl(t))Pu(t);else{switch(r=Ts(me.current),e){case 1:e=r.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:e=r.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":e=r.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":e=r.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":e=r.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof i.is=="string"?r.createElement("select",{is:i.is}):r.createElement("select"),i.multiple?e.multiple=!0:i.size&&(e.size=i.size);break;default:e=typeof i.is=="string"?r.createElement(a,{is:i.is}):r.createElement(a)}}e[pt]=t,e[Nt]=i;e:for(r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.tag!==27&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}t.stateNode=e;e:switch(ht(e,a,i),a){case"button":case"input":case"select":case"textarea":e=!!i.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Nn(t)}}return Ve(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==i&&Nn(t);else{if(typeof i!="string"&&t.stateNode===null)throw Error(c(166));if(e=me.current,kl(t)){if(e=t.stateNode,a=t.memoizedProps,i=null,r=bt,r!==null)switch(r.tag){case 27:case 5:i=r.memoizedProps}e[pt]=t,e=!!(e.nodeValue===a||i!==null&&i.suppressHydrationWarning===!0||oh(e.nodeValue,a)),e||fa(t)}else e=Ts(e).createTextNode(i),e[pt]=t,t.stateNode=e}return Ve(t),null;case 13:if(i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(r=kl(t),i!==null&&i.dehydrated!==null){if(e===null){if(!r)throw Error(c(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(c(317));r[pt]=t}else Rl(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ve(t),r=!1}else r=Vu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=r),r=!0;if(!r)return t.flags&256?(jn(t),t):(jn(t),null)}if(jn(t),(t.flags&128)!==0)return t.lanes=a,t;if(a=i!==null,e=e!==null&&e.memoizedState!==null,a){i=t.child,r=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(r=i.alternate.memoizedState.cachePool.pool);var u=null;i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==r&&(i.flags|=2048)}return a!==e&&a&&(t.child.flags|=8192),ps(t,t.updateQueue),Ve(t),null;case 4:return be(),e===null&&Ko(t.stateNode.containerInfo),Ve(t),null;case 10:return vn(t.type),Ve(t),null;case 19:if(F(it),r=t.memoizedState,r===null)return Ve(t),null;if(i=(t.flags&128)!==0,u=r.rendering,u===null)if(i)Zl(r,!1);else{if(Je!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(u=us(e),u!==null){for(t.flags|=128,Zl(r,!1),e=u.updateQueue,t.updateQueue=e,ps(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)Yu(a,e),a=a.sibling;return K(it,it.current&1|2),t.child}e=e.sibling}r.tail!==null&&Oe()>vs&&(t.flags|=128,i=!0,Zl(r,!1),t.lanes=4194304)}else{if(!i)if(e=us(u),e!==null){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,ps(t,e),Zl(r,!0),r.tail===null&&r.tailMode==="hidden"&&!u.alternate&&!_e)return Ve(t),null}else 2*Oe()-r.renderingStartTime>vs&&a!==536870912&&(t.flags|=128,i=!0,Zl(r,!1),t.lanes=4194304);r.isBackwards?(u.sibling=t.child,t.child=u):(e=r.last,e!==null?e.sibling=u:t.child=u,r.last=u)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=Oe(),t.sibling=null,e=it.current,K(it,i?e&1|2:e&1),t):(Ve(t),null);case 22:case 23:return jn(t),Wr(),i=t.memoizedState!==null,e!==null?e.memoizedState!==null!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?(a&536870912)!==0&&(t.flags&128)===0&&(Ve(t),t.subtreeFlags&6&&(t.flags|=8192)):Ve(t),a=t.updateQueue,a!==null&&ps(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==a&&(t.flags|=2048),e!==null&&F(pa),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),vn(lt),Ve(t),null;case 25:return null;case 30:return null}throw Error(c(156,t.tag))}function Sg(e,t){switch(Mr(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return vn(lt),be(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return fe(t),null;case 13:if(jn(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(c(340));Rl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return F(it),null;case 4:return be(),null;case 10:return vn(t.type),null;case 22:case 23:return jn(t),Wr(),e!==null&&F(pa),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return vn(lt),null;case 25:return null;default:return null}}function gf(e,t){switch(Mr(t),t.tag){case 3:vn(lt),be();break;case 26:case 27:case 5:fe(t);break;case 4:be();break;case 13:jn(t);break;case 19:F(it);break;case 10:vn(t.type);break;case 22:case 23:jn(t),Wr(),e!==null&&F(pa);break;case 24:vn(lt)}}function Xl(e,t){try{var a=t.updateQueue,i=a!==null?a.lastEffect:null;if(i!==null){var r=i.next;a=r;do{if((a.tag&e)===e){i=void 0;var u=a.create,p=a.inst;i=u(),p.destroy=i}a=a.next}while(a!==r)}}catch(j){Ye(t,t.return,j)}}function Hn(e,t,a){try{var i=t.updateQueue,r=i!==null?i.lastEffect:null;if(r!==null){var u=r.next;i=u;do{if((i.tag&e)===e){var p=i.inst,j=p.destroy;if(j!==void 0){p.destroy=void 0,r=t;var A=a,G=j;try{G()}catch(ne){Ye(r,A,ne)}}}i=i.next}while(i!==u)}}catch(ne){Ye(t,t.return,ne)}}function xf(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{ad(t,a)}catch(i){Ye(e,e.return,i)}}}function vf(e,t,a){a.props=xa(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(i){Ye(e,t,i)}}function $l(e,t){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;case 30:i=e.stateNode;break;default:i=e.stateNode}typeof a=="function"?e.refCleanup=a(i):a.current=i}}catch(r){Ye(e,t,r)}}function en(e,t){var a=e.ref,i=e.refCleanup;if(a!==null)if(typeof i=="function")try{i()}catch(r){Ye(e,t,r)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(r){Ye(e,t,r)}else a.current=null}function yf(e){var t=e.type,a=e.memoizedProps,i=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&i.focus();break e;case"img":a.src?i.src=a.src:a.srcSet&&(i.srcset=a.srcSet)}}catch(r){Ye(e,e.return,r)}}function Do(e,t,a){try{var i=e.stateNode;Pg(i,e.type,a,t),i[Nt]=t}catch(r){Ye(e,e.return,r)}}function jf(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Zn(e.type)||e.tag===4}function To(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||jf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Zn(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ao(e,t,a){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=Ds));else if(i!==4&&(i===27&&Zn(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for(Ao(e,t,a),e=e.sibling;e!==null;)Ao(e,t,a),e=e.sibling}function gs(e,t,a){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(i!==4&&(i===27&&Zn(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(gs(e,t,a),e=e.sibling;e!==null;)gs(e,t,a),e=e.sibling}function bf(e){var t=e.stateNode,a=e.memoizedProps;try{for(var i=e.type,r=t.attributes;r.length;)t.removeAttributeNode(r[0]);ht(t,i,a),t[pt]=e,t[Nt]=a}catch(u){Ye(e,e.return,u)}}var Sn=!1,Ie=!1,ko=!1,Nf=typeof WeakSet=="function"?WeakSet:Set,ot=null;function wg(e,t){if(e=e.containerInfo,ec=_s,e=Uu(e),Dr(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var i=a.getSelection&&a.getSelection();if(i&&i.rangeCount!==0){a=i.anchorNode;var r=i.anchorOffset,u=i.focusNode;i=i.focusOffset;try{a.nodeType,u.nodeType}catch{a=null;break e}var p=0,j=-1,A=-1,G=0,ne=0,le=e,Q=null;t:for(;;){for(var V;le!==a||r!==0&&le.nodeType!==3||(j=p+r),le!==u||i!==0&&le.nodeType!==3||(A=p+i),le.nodeType===3&&(p+=le.nodeValue.length),(V=le.firstChild)!==null;)Q=le,le=V;for(;;){if(le===e)break t;if(Q===a&&++G===r&&(j=p),Q===u&&++ne===i&&(A=p),(V=le.nextSibling)!==null)break;le=Q,Q=le.parentNode}le=V}a=j===-1||A===-1?null:{start:j,end:A}}else a=null}a=a||{start:0,end:0}}else a=null;for(tc={focusedElem:e,selectionRange:a},_s=!1,ot=t;ot!==null;)if(t=ot,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,ot=e;else for(;ot!==null;){switch(t=ot,u=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&u!==null){e=void 0,a=t,r=u.memoizedProps,u=u.memoizedState,i=a.stateNode;try{var Ne=xa(a.type,r,a.elementType===a.type);e=i.getSnapshotBeforeUpdate(Ne,u),i.__reactInternalSnapshotBeforeUpdate=e}catch(ye){Ye(a,a.return,ye)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,a=e.nodeType,a===9)lc(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":lc(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(c(163))}if(e=t.sibling,e!==null){e.return=t.return,ot=e;break}ot=t.return}}function Sf(e,t,a){var i=a.flags;switch(a.tag){case 0:case 11:case 15:qn(e,a),i&4&&Xl(5,a);break;case 1:if(qn(e,a),i&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(p){Ye(a,a.return,p)}else{var r=xa(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(r,t,e.__reactInternalSnapshotBeforeUpdate)}catch(p){Ye(a,a.return,p)}}i&64&&xf(a),i&512&&$l(a,a.return);break;case 3:if(qn(e,a),i&64&&(e=a.updateQueue,e!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{ad(e,t)}catch(p){Ye(a,a.return,p)}}break;case 27:t===null&&i&4&&bf(a);case 26:case 5:qn(e,a),t===null&&i&4&&yf(a),i&512&&$l(a,a.return);break;case 12:qn(e,a);break;case 13:qn(e,a),i&4&&Cf(e,a),i&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=Og.bind(null,a),Kg(e,a))));break;case 22:if(i=a.memoizedState!==null||Sn,!i){t=t!==null&&t.memoizedState!==null||Ie,r=Sn;var u=Ie;Sn=i,(Ie=t)&&!u?Fn(e,a,(a.subtreeFlags&8772)!==0):qn(e,a),Sn=r,Ie=u}break;case 30:break;default:qn(e,a)}}function wf(e){var t=e.alternate;t!==null&&(e.alternate=null,wf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&or(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Qe=null,Et=!1;function wn(e,t,a){for(a=a.child;a!==null;)Ef(e,t,a),a=a.sibling}function Ef(e,t,a){if(At&&typeof At.onCommitFiberUnmount=="function")try{At.onCommitFiberUnmount(gl,a)}catch{}switch(a.tag){case 26:Ie||en(a,t),wn(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Ie||en(a,t);var i=Qe,r=Et;Zn(a.type)&&(Qe=a.stateNode,Et=!1),wn(e,t,a),li(a.stateNode),Qe=i,Et=r;break;case 5:Ie||en(a,t);case 6:if(i=Qe,r=Et,Qe=null,wn(e,t,a),Qe=i,Et=r,Qe!==null)if(Et)try{(Qe.nodeType===9?Qe.body:Qe.nodeName==="HTML"?Qe.ownerDocument.body:Qe).removeChild(a.stateNode)}catch(u){Ye(a,t,u)}else try{Qe.removeChild(a.stateNode)}catch(u){Ye(a,t,u)}break;case 18:Qe!==null&&(Et?(e=Qe,hh(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),fi(e)):hh(Qe,a.stateNode));break;case 4:i=Qe,r=Et,Qe=a.stateNode.containerInfo,Et=!0,wn(e,t,a),Qe=i,Et=r;break;case 0:case 11:case 14:case 15:Ie||Hn(2,a,t),Ie||Hn(4,a,t),wn(e,t,a);break;case 1:Ie||(en(a,t),i=a.stateNode,typeof i.componentWillUnmount=="function"&&vf(a,t,i)),wn(e,t,a);break;case 21:wn(e,t,a);break;case 22:Ie=(i=Ie)||a.memoizedState!==null,wn(e,t,a),Ie=i;break;default:wn(e,t,a)}}function Cf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{fi(e)}catch(a){Ye(t,t.return,a)}}function Eg(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Nf),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Nf),t;default:throw Error(c(435,e.tag))}}function Ro(e,t){var a=Eg(e);t.forEach(function(i){var r=_g.bind(null,e,i);a.has(i)||(a.add(i),i.then(r,r))})}function Ot(e,t){var a=t.deletions;if(a!==null)for(var i=0;i<a.length;i++){var r=a[i],u=e,p=t,j=p;e:for(;j!==null;){switch(j.tag){case 27:if(Zn(j.type)){Qe=j.stateNode,Et=!1;break e}break;case 5:Qe=j.stateNode,Et=!1;break e;case 3:case 4:Qe=j.stateNode.containerInfo,Et=!0;break e}j=j.return}if(Qe===null)throw Error(c(160));Ef(u,p,r),Qe=null,Et=!1,u=r.alternate,u!==null&&(u.return=null),r.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)Df(t,e),t=t.sibling}var $t=null;function Df(e,t){var a=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ot(t,e),_t(e),i&4&&(Hn(3,e,e.return),Xl(3,e),Hn(5,e,e.return));break;case 1:Ot(t,e),_t(e),i&512&&(Ie||a===null||en(a,a.return)),i&64&&Sn&&(e=e.updateQueue,e!==null&&(i=e.callbacks,i!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?i:a.concat(i))));break;case 26:var r=$t;if(Ot(t,e),_t(e),i&512&&(Ie||a===null||en(a,a.return)),i&4){var u=a!==null?a.memoizedState:null;if(i=e.memoizedState,a===null)if(i===null)if(e.stateNode===null){e:{i=e.type,a=e.memoizedProps,r=r.ownerDocument||r;t:switch(i){case"title":u=r.getElementsByTagName("title")[0],(!u||u[yl]||u[pt]||u.namespaceURI==="http://www.w3.org/2000/svg"||u.hasAttribute("itemprop"))&&(u=r.createElement(i),r.head.insertBefore(u,r.querySelector("head > title"))),ht(u,i,a),u[pt]=e,st(u),i=u;break e;case"link":var p=bh("link","href",r).get(i+(a.href||""));if(p){for(var j=0;j<p.length;j++)if(u=p[j],u.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&u.getAttribute("rel")===(a.rel==null?null:a.rel)&&u.getAttribute("title")===(a.title==null?null:a.title)&&u.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){p.splice(j,1);break t}}u=r.createElement(i),ht(u,i,a),r.head.appendChild(u);break;case"meta":if(p=bh("meta","content",r).get(i+(a.content||""))){for(j=0;j<p.length;j++)if(u=p[j],u.getAttribute("content")===(a.content==null?null:""+a.content)&&u.getAttribute("name")===(a.name==null?null:a.name)&&u.getAttribute("property")===(a.property==null?null:a.property)&&u.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&u.getAttribute("charset")===(a.charSet==null?null:a.charSet)){p.splice(j,1);break t}}u=r.createElement(i),ht(u,i,a),r.head.appendChild(u);break;default:throw Error(c(468,i))}u[pt]=e,st(u),i=u}e.stateNode=i}else Nh(r,e.type,e.stateNode);else e.stateNode=jh(r,i,e.memoizedProps);else u!==i?(u===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):u.count--,i===null?Nh(r,e.type,e.stateNode):jh(r,i,e.memoizedProps)):i===null&&e.stateNode!==null&&Do(e,e.memoizedProps,a.memoizedProps)}break;case 27:Ot(t,e),_t(e),i&512&&(Ie||a===null||en(a,a.return)),a!==null&&i&4&&Do(e,e.memoizedProps,a.memoizedProps);break;case 5:if(Ot(t,e),_t(e),i&512&&(Ie||a===null||en(a,a.return)),e.flags&32){r=e.stateNode;try{Oa(r,"")}catch(V){Ye(e,e.return,V)}}i&4&&e.stateNode!=null&&(r=e.memoizedProps,Do(e,r,a!==null?a.memoizedProps:r)),i&1024&&(ko=!0);break;case 6:if(Ot(t,e),_t(e),i&4){if(e.stateNode===null)throw Error(c(162));i=e.memoizedProps,a=e.stateNode;try{a.nodeValue=i}catch(V){Ye(e,e.return,V)}}break;case 3:if(Rs=null,r=$t,$t=As(t.containerInfo),Ot(t,e),$t=r,_t(e),i&4&&a!==null&&a.memoizedState.isDehydrated)try{fi(t.containerInfo)}catch(V){Ye(e,e.return,V)}ko&&(ko=!1,Tf(e));break;case 4:i=$t,$t=As(e.stateNode.containerInfo),Ot(t,e),_t(e),$t=i;break;case 12:Ot(t,e),_t(e);break;case 13:Ot(t,e),_t(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(zo=Oe()),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Ro(e,i)));break;case 22:r=e.memoizedState!==null;var A=a!==null&&a.memoizedState!==null,G=Sn,ne=Ie;if(Sn=G||r,Ie=ne||A,Ot(t,e),Ie=ne,Sn=G,_t(e),i&8192)e:for(t=e.stateNode,t._visibility=r?t._visibility&-2:t._visibility|1,r&&(a===null||A||Sn||Ie||va(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){A=a=t;try{if(u=A.stateNode,r)p=u.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none";else{j=A.stateNode;var le=A.memoizedProps.style,Q=le!=null&&le.hasOwnProperty("display")?le.display:null;j.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(V){Ye(A,A.return,V)}}}else if(t.tag===6){if(a===null){A=t;try{A.stateNode.nodeValue=r?"":A.memoizedProps}catch(V){Ye(A,A.return,V)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}i&4&&(i=e.updateQueue,i!==null&&(a=i.retryQueue,a!==null&&(i.retryQueue=null,Ro(e,a))));break;case 19:Ot(t,e),_t(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Ro(e,i)));break;case 30:break;case 21:break;default:Ot(t,e),_t(e)}}function _t(e){var t=e.flags;if(t&2){try{for(var a,i=e.return;i!==null;){if(jf(i)){a=i;break}i=i.return}if(a==null)throw Error(c(160));switch(a.tag){case 27:var r=a.stateNode,u=To(e);gs(e,u,r);break;case 5:var p=a.stateNode;a.flags&32&&(Oa(p,""),a.flags&=-33);var j=To(e);gs(e,j,p);break;case 3:case 4:var A=a.stateNode.containerInfo,G=To(e);Ao(e,G,A);break;default:throw Error(c(161))}}catch(ne){Ye(e,e.return,ne)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Tf(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Tf(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function qn(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Sf(e,t.alternate,t),t=t.sibling}function va(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Hn(4,t,t.return),va(t);break;case 1:en(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&vf(t,t.return,a),va(t);break;case 27:li(t.stateNode);case 26:case 5:en(t,t.return),va(t);break;case 22:t.memoizedState===null&&va(t);break;case 30:va(t);break;default:va(t)}e=e.sibling}}function Fn(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var i=t.alternate,r=e,u=t,p=u.flags;switch(u.tag){case 0:case 11:case 15:Fn(r,u,a),Xl(4,u);break;case 1:if(Fn(r,u,a),i=u,r=i.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(G){Ye(i,i.return,G)}if(i=u,r=i.updateQueue,r!==null){var j=i.stateNode;try{var A=r.shared.hiddenCallbacks;if(A!==null)for(r.shared.hiddenCallbacks=null,r=0;r<A.length;r++)nd(A[r],j)}catch(G){Ye(i,i.return,G)}}a&&p&64&&xf(u),$l(u,u.return);break;case 27:bf(u);case 26:case 5:Fn(r,u,a),a&&i===null&&p&4&&yf(u),$l(u,u.return);break;case 12:Fn(r,u,a);break;case 13:Fn(r,u,a),a&&p&4&&Cf(r,u);break;case 22:u.memoizedState===null&&Fn(r,u,a),$l(u,u.return);break;case 30:break;default:Fn(r,u,a)}t=t.sibling}}function Uo(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&_l(a))}function Oo(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&_l(e))}function tn(e,t,a,i){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Af(e,t,a,i),t=t.sibling}function Af(e,t,a,i){var r=t.flags;switch(t.tag){case 0:case 11:case 15:tn(e,t,a,i),r&2048&&Xl(9,t);break;case 1:tn(e,t,a,i);break;case 3:tn(e,t,a,i),r&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&_l(e)));break;case 12:if(r&2048){tn(e,t,a,i),e=t.stateNode;try{var u=t.memoizedProps,p=u.id,j=u.onPostCommit;typeof j=="function"&&j(p,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(A){Ye(t,t.return,A)}}else tn(e,t,a,i);break;case 13:tn(e,t,a,i);break;case 23:break;case 22:u=t.stateNode,p=t.alternate,t.memoizedState!==null?u._visibility&2?tn(e,t,a,i):Jl(e,t):u._visibility&2?tn(e,t,a,i):(u._visibility|=2,Wa(e,t,a,i,(t.subtreeFlags&10256)!==0)),r&2048&&Uo(p,t);break;case 24:tn(e,t,a,i),r&2048&&Oo(t.alternate,t);break;default:tn(e,t,a,i)}}function Wa(e,t,a,i,r){for(r=r&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var u=e,p=t,j=a,A=i,G=p.flags;switch(p.tag){case 0:case 11:case 15:Wa(u,p,j,A,r),Xl(8,p);break;case 23:break;case 22:var ne=p.stateNode;p.memoizedState!==null?ne._visibility&2?Wa(u,p,j,A,r):Jl(u,p):(ne._visibility|=2,Wa(u,p,j,A,r)),r&&G&2048&&Uo(p.alternate,p);break;case 24:Wa(u,p,j,A,r),r&&G&2048&&Oo(p.alternate,p);break;default:Wa(u,p,j,A,r)}t=t.sibling}}function Jl(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,i=t,r=i.flags;switch(i.tag){case 22:Jl(a,i),r&2048&&Uo(i.alternate,i);break;case 24:Jl(a,i),r&2048&&Oo(i.alternate,i);break;default:Jl(a,i)}t=t.sibling}}var Kl=8192;function Ia(e){if(e.subtreeFlags&Kl)for(e=e.child;e!==null;)kf(e),e=e.sibling}function kf(e){switch(e.tag){case 26:Ia(e),e.flags&Kl&&e.memoizedState!==null&&ux($t,e.memoizedState,e.memoizedProps);break;case 5:Ia(e);break;case 3:case 4:var t=$t;$t=As(e.stateNode.containerInfo),Ia(e),$t=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=Kl,Kl=16777216,Ia(e),Kl=t):Ia(e));break;default:Ia(e)}}function Rf(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Wl(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var i=t[a];ot=i,Of(i,e)}Rf(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Uf(e),e=e.sibling}function Uf(e){switch(e.tag){case 0:case 11:case 15:Wl(e),e.flags&2048&&Hn(9,e,e.return);break;case 3:Wl(e);break;case 12:Wl(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,xs(e)):Wl(e);break;default:Wl(e)}}function xs(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var i=t[a];ot=i,Of(i,e)}Rf(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Hn(8,t,t.return),xs(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,xs(t));break;default:xs(t)}e=e.sibling}}function Of(e,t){for(;ot!==null;){var a=ot;switch(a.tag){case 0:case 11:case 15:Hn(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var i=a.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:_l(a.memoizedState.cache)}if(i=a.child,i!==null)i.return=a,ot=i;else e:for(a=e;ot!==null;){i=ot;var r=i.sibling,u=i.return;if(wf(i),i===a){ot=null;break e}if(r!==null){r.return=u,ot=r;break e}ot=u}}}var Cg={getCacheForType:function(e){var t=gt(lt),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a}},Dg=typeof WeakMap=="function"?WeakMap:Map,Le=0,Ge=null,De=null,Re=0,ze=0,Bt=null,Yn=!1,el=!1,_o=!1,En=0,Je=0,Gn=0,ya=0,Bo=0,Vt=0,tl=0,Il=null,Ct=null,Lo=!1,zo=0,vs=1/0,ys=null,Pn=null,ft=0,Qn=null,nl=null,al=0,Mo=0,Ho=null,_f=null,ei=0,qo=null;function Lt(){if((Le&2)!==0&&Re!==0)return Re&-Re;if(T.T!==null){var e=Pa;return e!==0?e:Zo()}return $c()}function Bf(){Vt===0&&(Vt=(Re&536870912)===0||_e?Qc():536870912);var e=Qt.current;return e!==null&&(e.flags|=32),Vt}function zt(e,t,a){(e===Ge&&(ze===2||ze===9)||e.cancelPendingCommit!==null)&&(ll(e,0),Vn(e,Re,Vt,!1)),vl(e,a),((Le&2)===0||e!==Ge)&&(e===Ge&&((Le&2)===0&&(ya|=a),Je===4&&Vn(e,Re,Vt,!1)),nn(e))}function Lf(e,t,a){if((Le&6)!==0)throw Error(c(327));var i=!a&&(t&124)===0&&(t&e.expiredLanes)===0||xl(e,t),r=i?kg(e,t):Go(e,t,!0),u=i;do{if(r===0){el&&!i&&Vn(e,t,0,!1);break}else{if(a=e.current.alternate,u&&!Tg(a)){r=Go(e,t,!1),u=!1;continue}if(r===2){if(u=t,e.errorRecoveryDisabledLanes&u)var p=0;else p=e.pendingLanes&-536870913,p=p!==0?p:p&536870912?536870912:0;if(p!==0){t=p;e:{var j=e;r=Il;var A=j.current.memoizedState.isDehydrated;if(A&&(ll(j,p).flags|=256),p=Go(j,p,!1),p!==2){if(_o&&!A){j.errorRecoveryDisabledLanes|=u,ya|=u,r=4;break e}u=Ct,Ct=r,u!==null&&(Ct===null?Ct=u:Ct.push.apply(Ct,u))}r=p}if(u=!1,r!==2)continue}}if(r===1){ll(e,0),Vn(e,t,0,!0);break}e:{switch(i=e,u=r,u){case 0:case 1:throw Error(c(345));case 4:if((t&4194048)!==t)break;case 6:Vn(i,t,Vt,!Yn);break e;case 2:Ct=null;break;case 3:case 5:break;default:throw Error(c(329))}if((t&62914560)===t&&(r=zo+300-Oe(),10<r)){if(Vn(i,t,Vt,!Yn),ki(i,0,!0)!==0)break e;i.timeoutHandle=dh(zf.bind(null,i,a,Ct,ys,Lo,t,Vt,ya,tl,Yn,u,2,-0,0),r);break e}zf(i,a,Ct,ys,Lo,t,Vt,ya,tl,Yn,u,0,-0,0)}}break}while(!0);nn(e)}function zf(e,t,a,i,r,u,p,j,A,G,ne,le,Q,V){if(e.timeoutHandle=-1,le=t.subtreeFlags,(le&8192||(le&16785408)===16785408)&&(ri={stylesheets:null,count:0,unsuspend:cx},kf(t),le=dx(),le!==null)){e.cancelPendingCommit=le(Pf.bind(null,e,t,u,a,i,r,p,j,A,ne,1,Q,V)),Vn(e,u,p,!G);return}Pf(e,t,u,a,i,r,p,j,A)}function Tg(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var i=0;i<a.length;i++){var r=a[i],u=r.getSnapshot;r=r.value;try{if(!Rt(u(),r))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Vn(e,t,a,i){t&=~Bo,t&=~ya,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var r=t;0<r;){var u=31-kt(r),p=1<<u;i[u]=-1,r&=~p}a!==0&&Zc(e,a,t)}function js(){return(Le&6)===0?(ti(0),!1):!0}function Fo(){if(De!==null){if(ze===0)var e=De.return;else e=De,xn=ha=null,ao(e),Ja=null,Ql=0,e=De;for(;e!==null;)gf(e.alternate,e),e=e.return;De=null}}function ll(e,t){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,Vg(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Fo(),Ge=e,De=a=mn(e.current,null),Re=t,ze=0,Bt=null,Yn=!1,el=xl(e,t),_o=!1,tl=Vt=Bo=ya=Gn=Je=0,Ct=Il=null,Lo=!1,(t&8)!==0&&(t|=t&32);var i=e.entangledLanes;if(i!==0)for(e=e.entanglements,i&=t;0<i;){var r=31-kt(i),u=1<<r;t|=e[r],i&=~u}return En=t,Yi(),a}function Mf(e,t){Ee=null,T.H=rs,t===Ll||t===Ki?(t=ed(),ze=3):t===Ku?(t=ed(),ze=4):ze=t===tf?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Bt=t,De===null&&(Je=1,fs(e,Ft(t,e.current)))}function Hf(){var e=T.H;return T.H=rs,e===null?rs:e}function qf(){var e=T.A;return T.A=Cg,e}function Yo(){Je=4,Yn||(Re&4194048)!==Re&&Qt.current!==null||(el=!0),(Gn&134217727)===0&&(ya&134217727)===0||Ge===null||Vn(Ge,Re,Vt,!1)}function Go(e,t,a){var i=Le;Le|=2;var r=Hf(),u=qf();(Ge!==e||Re!==t)&&(ys=null,ll(e,t)),t=!1;var p=Je;e:do try{if(ze!==0&&De!==null){var j=De,A=Bt;switch(ze){case 8:Fo(),p=6;break e;case 3:case 2:case 9:case 6:Qt.current===null&&(t=!0);var G=ze;if(ze=0,Bt=null,il(e,j,A,G),a&&el){p=0;break e}break;default:G=ze,ze=0,Bt=null,il(e,j,A,G)}}Ag(),p=Je;break}catch(ne){Mf(e,ne)}while(!0);return t&&e.shellSuspendCounter++,xn=ha=null,Le=i,T.H=r,T.A=u,De===null&&(Ge=null,Re=0,Yi()),p}function Ag(){for(;De!==null;)Ff(De)}function kg(e,t){var a=Le;Le|=2;var i=Hf(),r=qf();Ge!==e||Re!==t?(ys=null,vs=Oe()+500,ll(e,t)):el=xl(e,t);e:do try{if(ze!==0&&De!==null){t=De;var u=Bt;t:switch(ze){case 1:ze=0,Bt=null,il(e,t,u,1);break;case 2:case 9:if(Wu(u)){ze=0,Bt=null,Yf(t);break}t=function(){ze!==2&&ze!==9||Ge!==e||(ze=7),nn(e)},u.then(t,t);break e;case 3:ze=7;break e;case 4:ze=5;break e;case 7:Wu(u)?(ze=0,Bt=null,Yf(t)):(ze=0,Bt=null,il(e,t,u,7));break;case 5:var p=null;switch(De.tag){case 26:p=De.memoizedState;case 5:case 27:var j=De;if(!p||Sh(p)){ze=0,Bt=null;var A=j.sibling;if(A!==null)De=A;else{var G=j.return;G!==null?(De=G,bs(G)):De=null}break t}}ze=0,Bt=null,il(e,t,u,5);break;case 6:ze=0,Bt=null,il(e,t,u,6);break;case 8:Fo(),Je=6;break e;default:throw Error(c(462))}}Rg();break}catch(ne){Mf(e,ne)}while(!0);return xn=ha=null,T.H=i,T.A=r,Le=a,De!==null?0:(Ge=null,Re=0,Yi(),Je)}function Rg(){for(;De!==null&&!he();)Ff(De)}function Ff(e){var t=mf(e.alternate,e,En);e.memoizedProps=e.pendingProps,t===null?bs(e):De=t}function Yf(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=of(a,t,t.pendingProps,t.type,void 0,Re);break;case 11:t=of(a,t,t.pendingProps,t.type.render,t.ref,Re);break;case 5:ao(t);default:gf(a,t),t=De=Yu(t,En),t=mf(a,t,En)}e.memoizedProps=e.pendingProps,t===null?bs(e):De=t}function il(e,t,a,i){xn=ha=null,ao(t),Ja=null,Ql=0;var r=t.return;try{if(jg(e,r,t,a,Re)){Je=1,fs(e,Ft(a,e.current)),De=null;return}}catch(u){if(r!==null)throw De=r,u;Je=1,fs(e,Ft(a,e.current)),De=null;return}t.flags&32768?(_e||i===1?e=!0:el||(Re&536870912)!==0?e=!1:(Yn=e=!0,(i===2||i===9||i===3||i===6)&&(i=Qt.current,i!==null&&i.tag===13&&(i.flags|=16384))),Gf(t,e)):bs(t)}function bs(e){var t=e;do{if((t.flags&32768)!==0){Gf(t,Yn);return}e=t.return;var a=Ng(t.alternate,t,En);if(a!==null){De=a;return}if(t=t.sibling,t!==null){De=t;return}De=t=e}while(t!==null);Je===0&&(Je=5)}function Gf(e,t){do{var a=Sg(e.alternate,e);if(a!==null){a.flags&=32767,De=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){De=e;return}De=e=a}while(e!==null);Je=6,De=null}function Pf(e,t,a,i,r,u,p,j,A){e.cancelPendingCommit=null;do Ns();while(ft!==0);if((Le&6)!==0)throw Error(c(327));if(t!==null){if(t===e.current)throw Error(c(177));if(u=t.lanes|t.childLanes,u|=Ur,cp(e,a,u,p,j,A),e===Ge&&(De=Ge=null,Re=0),nl=t,Qn=e,al=a,Mo=u,Ho=r,_f=i,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Bg(na,function(){return $f(),null})):(e.callbackNode=null,e.callbackPriority=0),i=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||i){i=T.T,T.T=null,r=q.p,q.p=2,p=Le,Le|=4;try{wg(e,t,a)}finally{Le=p,q.p=r,T.T=i}}ft=1,Qf(),Vf(),Zf()}}function Qf(){if(ft===1){ft=0;var e=Qn,t=nl,a=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||a){a=T.T,T.T=null;var i=q.p;q.p=2;var r=Le;Le|=4;try{Df(t,e);var u=tc,p=Uu(e.containerInfo),j=u.focusedElem,A=u.selectionRange;if(p!==j&&j&&j.ownerDocument&&Ru(j.ownerDocument.documentElement,j)){if(A!==null&&Dr(j)){var G=A.start,ne=A.end;if(ne===void 0&&(ne=G),"selectionStart"in j)j.selectionStart=G,j.selectionEnd=Math.min(ne,j.value.length);else{var le=j.ownerDocument||document,Q=le&&le.defaultView||window;if(Q.getSelection){var V=Q.getSelection(),Ne=j.textContent.length,ye=Math.min(A.start,Ne),qe=A.end===void 0?ye:Math.min(A.end,Ne);!V.extend&&ye>qe&&(p=qe,qe=ye,ye=p);var M=ku(j,ye),B=ku(j,qe);if(M&&B&&(V.rangeCount!==1||V.anchorNode!==M.node||V.anchorOffset!==M.offset||V.focusNode!==B.node||V.focusOffset!==B.offset)){var Y=le.createRange();Y.setStart(M.node,M.offset),V.removeAllRanges(),ye>qe?(V.addRange(Y),V.extend(B.node,B.offset)):(Y.setEnd(B.node,B.offset),V.addRange(Y))}}}}for(le=[],V=j;V=V.parentNode;)V.nodeType===1&&le.push({element:V,left:V.scrollLeft,top:V.scrollTop});for(typeof j.focus=="function"&&j.focus(),j=0;j<le.length;j++){var ae=le[j];ae.element.scrollLeft=ae.left,ae.element.scrollTop=ae.top}}_s=!!ec,tc=ec=null}finally{Le=r,q.p=i,T.T=a}}e.current=t,ft=2}}function Vf(){if(ft===2){ft=0;var e=Qn,t=nl,a=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||a){a=T.T,T.T=null;var i=q.p;q.p=2;var r=Le;Le|=4;try{Sf(e,t.alternate,t)}finally{Le=r,q.p=i,T.T=a}}ft=3}}function Zf(){if(ft===4||ft===3){ft=0,ke();var e=Qn,t=nl,a=al,i=_f;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?ft=5:(ft=0,nl=Qn=null,Xf(e,e.pendingLanes));var r=e.pendingLanes;if(r===0&&(Pn=null),sr(a),t=t.stateNode,At&&typeof At.onCommitFiberRoot=="function")try{At.onCommitFiberRoot(gl,t,void 0,(t.current.flags&128)===128)}catch{}if(i!==null){t=T.T,r=q.p,q.p=2,T.T=null;try{for(var u=e.onRecoverableError,p=0;p<i.length;p++){var j=i[p];u(j.value,{componentStack:j.stack})}}finally{T.T=t,q.p=r}}(al&3)!==0&&Ns(),nn(e),r=e.pendingLanes,(a&4194090)!==0&&(r&42)!==0?e===qo?ei++:(ei=0,qo=e):ei=0,ti(0)}}function Xf(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,_l(t)))}function Ns(e){return Qf(),Vf(),Zf(),$f()}function $f(){if(ft!==5)return!1;var e=Qn,t=Mo;Mo=0;var a=sr(al),i=T.T,r=q.p;try{q.p=32>a?32:a,T.T=null,a=Ho,Ho=null;var u=Qn,p=al;if(ft=0,nl=Qn=null,al=0,(Le&6)!==0)throw Error(c(331));var j=Le;if(Le|=4,Uf(u.current),Af(u,u.current,p,a),Le=j,ti(0,!1),At&&typeof At.onPostCommitFiberRoot=="function")try{At.onPostCommitFiberRoot(gl,u)}catch{}return!0}finally{q.p=r,T.T=i,Xf(e,t)}}function Jf(e,t,a){t=Ft(a,t),t=vo(e.stateNode,t,2),e=Bn(e,t,2),e!==null&&(vl(e,2),nn(e))}function Ye(e,t,a){if(e.tag===3)Jf(e,e,a);else for(;t!==null;){if(t.tag===3){Jf(t,e,a);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Pn===null||!Pn.has(i))){e=Ft(a,e),a=Id(2),i=Bn(t,a,2),i!==null&&(ef(a,i,t,e),vl(i,2),nn(i));break}}t=t.return}}function Po(e,t,a){var i=e.pingCache;if(i===null){i=e.pingCache=new Dg;var r=new Set;i.set(t,r)}else r=i.get(t),r===void 0&&(r=new Set,i.set(t,r));r.has(a)||(_o=!0,r.add(a),e=Ug.bind(null,e,t,a),t.then(e,e))}function Ug(e,t,a){var i=e.pingCache;i!==null&&i.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Ge===e&&(Re&a)===a&&(Je===4||Je===3&&(Re&62914560)===Re&&300>Oe()-zo?(Le&2)===0&&ll(e,0):Bo|=a,tl===Re&&(tl=0)),nn(e)}function Kf(e,t){t===0&&(t=Vc()),e=qa(e,t),e!==null&&(vl(e,t),nn(e))}function Og(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),Kf(e,a)}function _g(e,t){var a=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;r!==null&&(a=r.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(c(314))}i!==null&&i.delete(t),Kf(e,a)}function Bg(e,t){return C(e,t)}var Ss=null,sl=null,Qo=!1,ws=!1,Vo=!1,ja=0;function nn(e){e!==sl&&e.next===null&&(sl===null?Ss=sl=e:sl=sl.next=e),ws=!0,Qo||(Qo=!0,zg())}function ti(e,t){if(!Vo&&ws){Vo=!0;do for(var a=!1,i=Ss;i!==null;){if(e!==0){var r=i.pendingLanes;if(r===0)var u=0;else{var p=i.suspendedLanes,j=i.pingedLanes;u=(1<<31-kt(42|e)+1)-1,u&=r&~(p&~j),u=u&201326741?u&201326741|1:u?u|2:0}u!==0&&(a=!0,th(i,u))}else u=Re,u=ki(i,i===Ge?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),(u&3)===0||xl(i,u)||(a=!0,th(i,u));i=i.next}while(a);Vo=!1}}function Lg(){Wf()}function Wf(){ws=Qo=!1;var e=0;ja!==0&&(Qg()&&(e=ja),ja=0);for(var t=Oe(),a=null,i=Ss;i!==null;){var r=i.next,u=If(i,t);u===0?(i.next=null,a===null?Ss=r:a.next=r,r===null&&(sl=a)):(a=i,(e!==0||(u&3)!==0)&&(ws=!0)),i=r}ti(e)}function If(e,t){for(var a=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,u=e.pendingLanes&-62914561;0<u;){var p=31-kt(u),j=1<<p,A=r[p];A===-1?((j&a)===0||(j&i)!==0)&&(r[p]=op(j,t)):A<=t&&(e.expiredLanes|=j),u&=~j}if(t=Ge,a=Re,a=ki(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i=e.callbackNode,a===0||e===t&&(ze===2||ze===9)||e.cancelPendingCommit!==null)return i!==null&&i!==null&&ue(i),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||xl(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(i!==null&&ue(i),sr(a)){case 2:case 8:a=Ea;break;case 32:a=na;break;case 268435456:a=Pc;break;default:a=na}return i=eh.bind(null,e),a=C(a,i),e.callbackPriority=t,e.callbackNode=a,t}return i!==null&&i!==null&&ue(i),e.callbackPriority=2,e.callbackNode=null,2}function eh(e,t){if(ft!==0&&ft!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Ns()&&e.callbackNode!==a)return null;var i=Re;return i=ki(e,e===Ge?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i===0?null:(Lf(e,i,t),If(e,Oe()),e.callbackNode!=null&&e.callbackNode===a?eh.bind(null,e):null)}function th(e,t){if(Ns())return null;Lf(e,t,!0)}function zg(){Zg(function(){(Le&6)!==0?C(Mt,Lg):Wf()})}function Zo(){return ja===0&&(ja=Qc()),ja}function nh(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Bi(""+e)}function ah(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function Mg(e,t,a,i,r){if(t==="submit"&&a&&a.stateNode===r){var u=nh((r[Nt]||null).action),p=i.submitter;p&&(t=(t=p[Nt]||null)?nh(t.formAction):p.getAttribute("formAction"),t!==null&&(u=t,p=null));var j=new Hi("action","action",null,i,r);e.push({event:j,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(ja!==0){var A=p?ah(r,p):new FormData(r);ho(a,{pending:!0,data:A,method:r.method,action:u},null,A)}}else typeof u=="function"&&(j.preventDefault(),A=p?ah(r,p):new FormData(r),ho(a,{pending:!0,data:A,method:r.method,action:u},u,A))},currentTarget:r}]})}}for(var Xo=0;Xo<Rr.length;Xo++){var $o=Rr[Xo],Hg=$o.toLowerCase(),qg=$o[0].toUpperCase()+$o.slice(1);Xt(Hg,"on"+qg)}Xt(Bu,"onAnimationEnd"),Xt(Lu,"onAnimationIteration"),Xt(zu,"onAnimationStart"),Xt("dblclick","onDoubleClick"),Xt("focusin","onFocus"),Xt("focusout","onBlur"),Xt(ag,"onTransitionRun"),Xt(lg,"onTransitionStart"),Xt(ig,"onTransitionCancel"),Xt(Mu,"onTransitionEnd"),ka("onMouseEnter",["mouseout","mouseover"]),ka("onMouseLeave",["mouseout","mouseover"]),ka("onPointerEnter",["pointerout","pointerover"]),ka("onPointerLeave",["pointerout","pointerover"]),la("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),la("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),la("onBeforeInput",["compositionend","keypress","textInput","paste"]),la("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),la("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),la("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ni="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fg=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ni));function lh(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var i=e[a],r=i.event;i=i.listeners;e:{var u=void 0;if(t)for(var p=i.length-1;0<=p;p--){var j=i[p],A=j.instance,G=j.currentTarget;if(j=j.listener,A!==u&&r.isPropagationStopped())break e;u=j,r.currentTarget=G;try{u(r)}catch(ne){ds(ne)}r.currentTarget=null,u=A}else for(p=0;p<i.length;p++){if(j=i[p],A=j.instance,G=j.currentTarget,j=j.listener,A!==u&&r.isPropagationStopped())break e;u=j,r.currentTarget=G;try{u(r)}catch(ne){ds(ne)}r.currentTarget=null,u=A}}}}function Te(e,t){var a=t[rr];a===void 0&&(a=t[rr]=new Set);var i=e+"__bubble";a.has(i)||(ih(t,e,2,!1),a.add(i))}function Jo(e,t,a){var i=0;t&&(i|=4),ih(a,e,i,t)}var Es="_reactListening"+Math.random().toString(36).slice(2);function Ko(e){if(!e[Es]){e[Es]=!0,Kc.forEach(function(a){a!=="selectionchange"&&(Fg.has(a)||Jo(a,!1,e),Jo(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Es]||(t[Es]=!0,Jo("selectionchange",!1,t))}}function ih(e,t,a,i){switch(Ah(t)){case 2:var r=mx;break;case 8:r=px;break;default:r=dc}a=r.bind(null,t,a,e),r=void 0,!vr||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),i?r!==void 0?e.addEventListener(t,a,{capture:!0,passive:r}):e.addEventListener(t,a,!0):r!==void 0?e.addEventListener(t,a,{passive:r}):e.addEventListener(t,a,!1)}function Wo(e,t,a,i,r){var u=i;if((t&1)===0&&(t&2)===0&&i!==null)e:for(;;){if(i===null)return;var p=i.tag;if(p===3||p===4){var j=i.stateNode.containerInfo;if(j===r)break;if(p===4)for(p=i.return;p!==null;){var A=p.tag;if((A===3||A===4)&&p.stateNode.containerInfo===r)return;p=p.return}for(;j!==null;){if(p=Da(j),p===null)return;if(A=p.tag,A===5||A===6||A===26||A===27){i=u=p;continue e}j=j.parentNode}}i=i.return}du(function(){var G=u,ne=gr(a),le=[];e:{var Q=Hu.get(e);if(Q!==void 0){var V=Hi,Ne=e;switch(e){case"keypress":if(zi(a)===0)break e;case"keydown":case"keyup":V=Bp;break;case"focusin":Ne="focus",V=Nr;break;case"focusout":Ne="blur",V=Nr;break;case"beforeblur":case"afterblur":V=Nr;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":V=mu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":V=Sp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":V=Mp;break;case Bu:case Lu:case zu:V=Cp;break;case Mu:V=qp;break;case"scroll":case"scrollend":V=bp;break;case"wheel":V=Yp;break;case"copy":case"cut":case"paste":V=Tp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":V=gu;break;case"toggle":case"beforetoggle":V=Pp}var ye=(t&4)!==0,qe=!ye&&(e==="scroll"||e==="scrollend"),M=ye?Q!==null?Q+"Capture":null:Q;ye=[];for(var B=G,Y;B!==null;){var ae=B;if(Y=ae.stateNode,ae=ae.tag,ae!==5&&ae!==26&&ae!==27||Y===null||M===null||(ae=bl(B,M),ae!=null&&ye.push(ai(B,ae,Y))),qe)break;B=B.return}0<ye.length&&(Q=new V(Q,Ne,null,a,ne),le.push({event:Q,listeners:ye}))}}if((t&7)===0){e:{if(Q=e==="mouseover"||e==="pointerover",V=e==="mouseout"||e==="pointerout",Q&&a!==pr&&(Ne=a.relatedTarget||a.fromElement)&&(Da(Ne)||Ne[Ca]))break e;if((V||Q)&&(Q=ne.window===ne?ne:(Q=ne.ownerDocument)?Q.defaultView||Q.parentWindow:window,V?(Ne=a.relatedTarget||a.toElement,V=G,Ne=Ne?Da(Ne):null,Ne!==null&&(qe=h(Ne),ye=Ne.tag,Ne!==qe||ye!==5&&ye!==27&&ye!==6)&&(Ne=null)):(V=null,Ne=G),V!==Ne)){if(ye=mu,ae="onMouseLeave",M="onMouseEnter",B="mouse",(e==="pointerout"||e==="pointerover")&&(ye=gu,ae="onPointerLeave",M="onPointerEnter",B="pointer"),qe=V==null?Q:jl(V),Y=Ne==null?Q:jl(Ne),Q=new ye(ae,B+"leave",V,a,ne),Q.target=qe,Q.relatedTarget=Y,ae=null,Da(ne)===G&&(ye=new ye(M,B+"enter",Ne,a,ne),ye.target=Y,ye.relatedTarget=qe,ae=ye),qe=ae,V&&Ne)t:{for(ye=V,M=Ne,B=0,Y=ye;Y;Y=rl(Y))B++;for(Y=0,ae=M;ae;ae=rl(ae))Y++;for(;0<B-Y;)ye=rl(ye),B--;for(;0<Y-B;)M=rl(M),Y--;for(;B--;){if(ye===M||M!==null&&ye===M.alternate)break t;ye=rl(ye),M=rl(M)}ye=null}else ye=null;V!==null&&sh(le,Q,V,ye,!1),Ne!==null&&qe!==null&&sh(le,qe,Ne,ye,!0)}}e:{if(Q=G?jl(G):window,V=Q.nodeName&&Q.nodeName.toLowerCase(),V==="select"||V==="input"&&Q.type==="file")var pe=wu;else if(Nu(Q))if(Eu)pe=eg;else{pe=Wp;var Ce=Kp}else V=Q.nodeName,!V||V.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?G&&mr(G.elementType)&&(pe=wu):pe=Ip;if(pe&&(pe=pe(e,G))){Su(le,pe,a,ne);break e}Ce&&Ce(e,Q,G),e==="focusout"&&G&&Q.type==="number"&&G.memoizedProps.value!=null&&hr(Q,"number",Q.value)}switch(Ce=G?jl(G):window,e){case"focusin":(Nu(Ce)||Ce.contentEditable==="true")&&(za=Ce,Tr=G,Al=null);break;case"focusout":Al=Tr=za=null;break;case"mousedown":Ar=!0;break;case"contextmenu":case"mouseup":case"dragend":Ar=!1,Ou(le,a,ne);break;case"selectionchange":if(ng)break;case"keydown":case"keyup":Ou(le,a,ne)}var xe;if(wr)e:{switch(e){case"compositionstart":var je="onCompositionStart";break e;case"compositionend":je="onCompositionEnd";break e;case"compositionupdate":je="onCompositionUpdate";break e}je=void 0}else La?ju(e,a)&&(je="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(je="onCompositionStart");je&&(xu&&a.locale!=="ko"&&(La||je!=="onCompositionStart"?je==="onCompositionEnd"&&La&&(xe=fu()):(Rn=ne,yr="value"in Rn?Rn.value:Rn.textContent,La=!0)),Ce=Cs(G,je),0<Ce.length&&(je=new pu(je,e,null,a,ne),le.push({event:je,listeners:Ce}),xe?je.data=xe:(xe=bu(a),xe!==null&&(je.data=xe)))),(xe=Vp?Zp(e,a):Xp(e,a))&&(je=Cs(G,"onBeforeInput"),0<je.length&&(Ce=new pu("onBeforeInput","beforeinput",null,a,ne),le.push({event:Ce,listeners:je}),Ce.data=xe)),Mg(le,e,G,a,ne)}lh(le,t)})}function ai(e,t,a){return{instance:e,listener:t,currentTarget:a}}function Cs(e,t){for(var a=t+"Capture",i=[];e!==null;){var r=e,u=r.stateNode;if(r=r.tag,r!==5&&r!==26&&r!==27||u===null||(r=bl(e,a),r!=null&&i.unshift(ai(e,r,u)),r=bl(e,t),r!=null&&i.push(ai(e,r,u))),e.tag===3)return i;e=e.return}return[]}function rl(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function sh(e,t,a,i,r){for(var u=t._reactName,p=[];a!==null&&a!==i;){var j=a,A=j.alternate,G=j.stateNode;if(j=j.tag,A!==null&&A===i)break;j!==5&&j!==26&&j!==27||G===null||(A=G,r?(G=bl(a,u),G!=null&&p.unshift(ai(a,G,A))):r||(G=bl(a,u),G!=null&&p.push(ai(a,G,A)))),a=a.return}p.length!==0&&e.push({event:t,listeners:p})}var Yg=/\r\n?/g,Gg=/\u0000|\uFFFD/g;function rh(e){return(typeof e=="string"?e:""+e).replace(Yg,`
`).replace(Gg,"")}function oh(e,t){return t=rh(t),rh(e)===t}function Ds(){}function He(e,t,a,i,r,u){switch(a){case"children":typeof i=="string"?t==="body"||t==="textarea"&&i===""||Oa(e,i):(typeof i=="number"||typeof i=="bigint")&&t!=="body"&&Oa(e,""+i);break;case"className":Ui(e,"class",i);break;case"tabIndex":Ui(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":Ui(e,a,i);break;case"style":cu(e,i,u);break;case"data":if(t!=="object"){Ui(e,"data",i);break}case"src":case"href":if(i===""&&(t!=="a"||a!=="href")){e.removeAttribute(a);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(a);break}i=Bi(""+i),e.setAttribute(a,i);break;case"action":case"formAction":if(typeof i=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof u=="function"&&(a==="formAction"?(t!=="input"&&He(e,t,"name",r.name,r,null),He(e,t,"formEncType",r.formEncType,r,null),He(e,t,"formMethod",r.formMethod,r,null),He(e,t,"formTarget",r.formTarget,r,null)):(He(e,t,"encType",r.encType,r,null),He(e,t,"method",r.method,r,null),He(e,t,"target",r.target,r,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(a);break}i=Bi(""+i),e.setAttribute(a,i);break;case"onClick":i!=null&&(e.onclick=Ds);break;case"onScroll":i!=null&&Te("scroll",e);break;case"onScrollEnd":i!=null&&Te("scrollend",e);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(c(61));if(a=i.__html,a!=null){if(r.children!=null)throw Error(c(60));e.innerHTML=a}}break;case"multiple":e.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":e.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){e.removeAttribute("xlink:href");break}a=Bi(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(a,""+i):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":i===!0?e.setAttribute(a,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(a,i):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?e.setAttribute(a,i):e.removeAttribute(a);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?e.removeAttribute(a):e.setAttribute(a,i);break;case"popover":Te("beforetoggle",e),Te("toggle",e),Ri(e,"popover",i);break;case"xlinkActuate":fn(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":fn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":fn(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":fn(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":fn(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":fn(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":fn(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":fn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":fn(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":Ri(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=yp.get(a)||a,Ri(e,a,i))}}function Io(e,t,a,i,r,u){switch(a){case"style":cu(e,i,u);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(c(61));if(a=i.__html,a!=null){if(r.children!=null)throw Error(c(60));e.innerHTML=a}}break;case"children":typeof i=="string"?Oa(e,i):(typeof i=="number"||typeof i=="bigint")&&Oa(e,""+i);break;case"onScroll":i!=null&&Te("scroll",e);break;case"onScrollEnd":i!=null&&Te("scrollend",e);break;case"onClick":i!=null&&(e.onclick=Ds);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Wc.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(r=a.endsWith("Capture"),t=a.slice(2,r?a.length-7:void 0),u=e[Nt]||null,u=u!=null?u[a]:null,typeof u=="function"&&e.removeEventListener(t,u,r),typeof i=="function")){typeof u!="function"&&u!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,i,r);break e}a in e?e[a]=i:i===!0?e.setAttribute(a,""):Ri(e,a,i)}}}function ht(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Te("error",e),Te("load",e);var i=!1,r=!1,u;for(u in a)if(a.hasOwnProperty(u)){var p=a[u];if(p!=null)switch(u){case"src":i=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(c(137,t));default:He(e,t,u,p,a,null)}}r&&He(e,t,"srcSet",a.srcSet,a,null),i&&He(e,t,"src",a.src,a,null);return;case"input":Te("invalid",e);var j=u=p=r=null,A=null,G=null;for(i in a)if(a.hasOwnProperty(i)){var ne=a[i];if(ne!=null)switch(i){case"name":r=ne;break;case"type":p=ne;break;case"checked":A=ne;break;case"defaultChecked":G=ne;break;case"value":u=ne;break;case"defaultValue":j=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(c(137,t));break;default:He(e,t,i,ne,a,null)}}iu(e,u,j,A,G,p,r,!1),Oi(e);return;case"select":Te("invalid",e),i=p=u=null;for(r in a)if(a.hasOwnProperty(r)&&(j=a[r],j!=null))switch(r){case"value":u=j;break;case"defaultValue":p=j;break;case"multiple":i=j;default:He(e,t,r,j,a,null)}t=u,a=p,e.multiple=!!i,t!=null?Ua(e,!!i,t,!1):a!=null&&Ua(e,!!i,a,!0);return;case"textarea":Te("invalid",e),u=r=i=null;for(p in a)if(a.hasOwnProperty(p)&&(j=a[p],j!=null))switch(p){case"value":i=j;break;case"defaultValue":r=j;break;case"children":u=j;break;case"dangerouslySetInnerHTML":if(j!=null)throw Error(c(91));break;default:He(e,t,p,j,a,null)}ru(e,i,r,u),Oi(e);return;case"option":for(A in a)if(a.hasOwnProperty(A)&&(i=a[A],i!=null))switch(A){case"selected":e.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:He(e,t,A,i,a,null)}return;case"dialog":Te("beforetoggle",e),Te("toggle",e),Te("cancel",e),Te("close",e);break;case"iframe":case"object":Te("load",e);break;case"video":case"audio":for(i=0;i<ni.length;i++)Te(ni[i],e);break;case"image":Te("error",e),Te("load",e);break;case"details":Te("toggle",e);break;case"embed":case"source":case"link":Te("error",e),Te("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in a)if(a.hasOwnProperty(G)&&(i=a[G],i!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(c(137,t));default:He(e,t,G,i,a,null)}return;default:if(mr(t)){for(ne in a)a.hasOwnProperty(ne)&&(i=a[ne],i!==void 0&&Io(e,t,ne,i,a,void 0));return}}for(j in a)a.hasOwnProperty(j)&&(i=a[j],i!=null&&He(e,t,j,i,a,null))}function Pg(e,t,a,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,u=null,p=null,j=null,A=null,G=null,ne=null;for(V in a){var le=a[V];if(a.hasOwnProperty(V)&&le!=null)switch(V){case"checked":break;case"value":break;case"defaultValue":A=le;default:i.hasOwnProperty(V)||He(e,t,V,null,i,le)}}for(var Q in i){var V=i[Q];if(le=a[Q],i.hasOwnProperty(Q)&&(V!=null||le!=null))switch(Q){case"type":u=V;break;case"name":r=V;break;case"checked":G=V;break;case"defaultChecked":ne=V;break;case"value":p=V;break;case"defaultValue":j=V;break;case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(c(137,t));break;default:V!==le&&He(e,t,Q,V,i,le)}}fr(e,p,j,A,G,ne,u,r);return;case"select":V=p=j=Q=null;for(u in a)if(A=a[u],a.hasOwnProperty(u)&&A!=null)switch(u){case"value":break;case"multiple":V=A;default:i.hasOwnProperty(u)||He(e,t,u,null,i,A)}for(r in i)if(u=i[r],A=a[r],i.hasOwnProperty(r)&&(u!=null||A!=null))switch(r){case"value":Q=u;break;case"defaultValue":j=u;break;case"multiple":p=u;default:u!==A&&He(e,t,r,u,i,A)}t=j,a=p,i=V,Q!=null?Ua(e,!!a,Q,!1):!!i!=!!a&&(t!=null?Ua(e,!!a,t,!0):Ua(e,!!a,a?[]:"",!1));return;case"textarea":V=Q=null;for(j in a)if(r=a[j],a.hasOwnProperty(j)&&r!=null&&!i.hasOwnProperty(j))switch(j){case"value":break;case"children":break;default:He(e,t,j,null,i,r)}for(p in i)if(r=i[p],u=a[p],i.hasOwnProperty(p)&&(r!=null||u!=null))switch(p){case"value":Q=r;break;case"defaultValue":V=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(c(91));break;default:r!==u&&He(e,t,p,r,i,u)}su(e,Q,V);return;case"option":for(var Ne in a)if(Q=a[Ne],a.hasOwnProperty(Ne)&&Q!=null&&!i.hasOwnProperty(Ne))switch(Ne){case"selected":e.selected=!1;break;default:He(e,t,Ne,null,i,Q)}for(A in i)if(Q=i[A],V=a[A],i.hasOwnProperty(A)&&Q!==V&&(Q!=null||V!=null))switch(A){case"selected":e.selected=Q&&typeof Q!="function"&&typeof Q!="symbol";break;default:He(e,t,A,Q,i,V)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ye in a)Q=a[ye],a.hasOwnProperty(ye)&&Q!=null&&!i.hasOwnProperty(ye)&&He(e,t,ye,null,i,Q);for(G in i)if(Q=i[G],V=a[G],i.hasOwnProperty(G)&&Q!==V&&(Q!=null||V!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(c(137,t));break;default:He(e,t,G,Q,i,V)}return;default:if(mr(t)){for(var qe in a)Q=a[qe],a.hasOwnProperty(qe)&&Q!==void 0&&!i.hasOwnProperty(qe)&&Io(e,t,qe,void 0,i,Q);for(ne in i)Q=i[ne],V=a[ne],!i.hasOwnProperty(ne)||Q===V||Q===void 0&&V===void 0||Io(e,t,ne,Q,i,V);return}}for(var M in a)Q=a[M],a.hasOwnProperty(M)&&Q!=null&&!i.hasOwnProperty(M)&&He(e,t,M,null,i,Q);for(le in i)Q=i[le],V=a[le],!i.hasOwnProperty(le)||Q===V||Q==null&&V==null||He(e,t,le,Q,i,V)}var ec=null,tc=null;function Ts(e){return e.nodeType===9?e:e.ownerDocument}function ch(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function uh(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function nc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ac=null;function Qg(){var e=window.event;return e&&e.type==="popstate"?e===ac?!1:(ac=e,!0):(ac=null,!1)}var dh=typeof setTimeout=="function"?setTimeout:void 0,Vg=typeof clearTimeout=="function"?clearTimeout:void 0,fh=typeof Promise=="function"?Promise:void 0,Zg=typeof queueMicrotask=="function"?queueMicrotask:typeof fh<"u"?function(e){return fh.resolve(null).then(e).catch(Xg)}:dh;function Xg(e){setTimeout(function(){throw e})}function Zn(e){return e==="head"}function hh(e,t){var a=t,i=0,r=0;do{var u=a.nextSibling;if(e.removeChild(a),u&&u.nodeType===8)if(a=u.data,a==="/$"){if(0<i&&8>i){a=i;var p=e.ownerDocument;if(a&1&&li(p.documentElement),a&2&&li(p.body),a&4)for(a=p.head,li(a),p=a.firstChild;p;){var j=p.nextSibling,A=p.nodeName;p[yl]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&p.rel.toLowerCase()==="stylesheet"||a.removeChild(p),p=j}}if(r===0){e.removeChild(u),fi(t);return}r--}else a==="$"||a==="$?"||a==="$!"?r++:i=a.charCodeAt(0)-48;else i=0;a=u}while(a);fi(t)}function lc(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":lc(a),or(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function $g(e,t,a,i){for(;e.nodeType===1;){var r=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(i){if(!e[yl])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(u=e.getAttribute("rel"),u==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(u!==r.rel||e.getAttribute("href")!==(r.href==null||r.href===""?null:r.href)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||e.getAttribute("title")!==(r.title==null?null:r.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(u=e.getAttribute("src"),(u!==(r.src==null?null:r.src)||e.getAttribute("type")!==(r.type==null?null:r.type)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&u&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var u=r.name==null?null:""+r.name;if(r.type==="hidden"&&e.getAttribute("name")===u)return e}else return e;if(e=Jt(e.nextSibling),e===null)break}return null}function Jg(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Jt(e.nextSibling),e===null))return null;return e}function ic(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function Kg(e,t){var a=e.ownerDocument;if(e.data!=="$?"||a.readyState==="complete")t();else{var i=function(){t(),a.removeEventListener("DOMContentLoaded",i)};a.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}function Jt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var sc=null;function mh(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(t===0)return e;t--}else a==="/$"&&t++}e=e.previousSibling}return null}function ph(e,t,a){switch(t=Ts(a),e){case"html":if(e=t.documentElement,!e)throw Error(c(452));return e;case"head":if(e=t.head,!e)throw Error(c(453));return e;case"body":if(e=t.body,!e)throw Error(c(454));return e;default:throw Error(c(451))}}function li(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);or(e)}var Zt=new Map,gh=new Set;function As(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Cn=q.d;q.d={f:Wg,r:Ig,D:ex,C:tx,L:nx,m:ax,X:ix,S:lx,M:sx};function Wg(){var e=Cn.f(),t=js();return e||t}function Ig(e){var t=Ta(e);t!==null&&t.tag===5&&t.type==="form"?Bd(t):Cn.r(e)}var ol=typeof document>"u"?null:document;function xh(e,t,a){var i=ol;if(i&&typeof t=="string"&&t){var r=qt(t);r='link[rel="'+e+'"][href="'+r+'"]',typeof a=="string"&&(r+='[crossorigin="'+a+'"]'),gh.has(r)||(gh.add(r),e={rel:e,crossOrigin:a,href:t},i.querySelector(r)===null&&(t=i.createElement("link"),ht(t,"link",e),st(t),i.head.appendChild(t)))}}function ex(e){Cn.D(e),xh("dns-prefetch",e,null)}function tx(e,t){Cn.C(e,t),xh("preconnect",e,t)}function nx(e,t,a){Cn.L(e,t,a);var i=ol;if(i&&e&&t){var r='link[rel="preload"][as="'+qt(t)+'"]';t==="image"&&a&&a.imageSrcSet?(r+='[imagesrcset="'+qt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(r+='[imagesizes="'+qt(a.imageSizes)+'"]')):r+='[href="'+qt(e)+'"]';var u=r;switch(t){case"style":u=cl(e);break;case"script":u=ul(e)}Zt.has(u)||(e=v({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),Zt.set(u,e),i.querySelector(r)!==null||t==="style"&&i.querySelector(ii(u))||t==="script"&&i.querySelector(si(u))||(t=i.createElement("link"),ht(t,"link",e),st(t),i.head.appendChild(t)))}}function ax(e,t){Cn.m(e,t);var a=ol;if(a&&e){var i=t&&typeof t.as=="string"?t.as:"script",r='link[rel="modulepreload"][as="'+qt(i)+'"][href="'+qt(e)+'"]',u=r;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":u=ul(e)}if(!Zt.has(u)&&(e=v({rel:"modulepreload",href:e},t),Zt.set(u,e),a.querySelector(r)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(si(u)))return}i=a.createElement("link"),ht(i,"link",e),st(i),a.head.appendChild(i)}}}function lx(e,t,a){Cn.S(e,t,a);var i=ol;if(i&&e){var r=Aa(i).hoistableStyles,u=cl(e);t=t||"default";var p=r.get(u);if(!p){var j={loading:0,preload:null};if(p=i.querySelector(ii(u)))j.loading=5;else{e=v({rel:"stylesheet",href:e,"data-precedence":t},a),(a=Zt.get(u))&&rc(e,a);var A=p=i.createElement("link");st(A),ht(A,"link",e),A._p=new Promise(function(G,ne){A.onload=G,A.onerror=ne}),A.addEventListener("load",function(){j.loading|=1}),A.addEventListener("error",function(){j.loading|=2}),j.loading|=4,ks(p,t,i)}p={type:"stylesheet",instance:p,count:1,state:j},r.set(u,p)}}}function ix(e,t){Cn.X(e,t);var a=ol;if(a&&e){var i=Aa(a).hoistableScripts,r=ul(e),u=i.get(r);u||(u=a.querySelector(si(r)),u||(e=v({src:e,async:!0},t),(t=Zt.get(r))&&oc(e,t),u=a.createElement("script"),st(u),ht(u,"link",e),a.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},i.set(r,u))}}function sx(e,t){Cn.M(e,t);var a=ol;if(a&&e){var i=Aa(a).hoistableScripts,r=ul(e),u=i.get(r);u||(u=a.querySelector(si(r)),u||(e=v({src:e,async:!0,type:"module"},t),(t=Zt.get(r))&&oc(e,t),u=a.createElement("script"),st(u),ht(u,"link",e),a.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},i.set(r,u))}}function vh(e,t,a,i){var r=(r=me.current)?As(r):null;if(!r)throw Error(c(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=cl(a.href),a=Aa(r).hoistableStyles,i=a.get(t),i||(i={type:"style",instance:null,count:0,state:null},a.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=cl(a.href);var u=Aa(r).hoistableStyles,p=u.get(e);if(p||(r=r.ownerDocument||r,p={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,p),(u=r.querySelector(ii(e)))&&!u._p&&(p.instance=u,p.state.loading=5),Zt.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Zt.set(e,a),u||rx(r,e,a,p.state))),t&&i===null)throw Error(c(528,""));return p}if(t&&i!==null)throw Error(c(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=ul(a),a=Aa(r).hoistableScripts,i=a.get(t),i||(i={type:"script",instance:null,count:0,state:null},a.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(c(444,e))}}function cl(e){return'href="'+qt(e)+'"'}function ii(e){return'link[rel="stylesheet"]['+e+"]"}function yh(e){return v({},e,{"data-precedence":e.precedence,precedence:null})}function rx(e,t,a,i){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?i.loading=1:(t=e.createElement("link"),i.preload=t,t.addEventListener("load",function(){return i.loading|=1}),t.addEventListener("error",function(){return i.loading|=2}),ht(t,"link",a),st(t),e.head.appendChild(t))}function ul(e){return'[src="'+qt(e)+'"]'}function si(e){return"script[async]"+e}function jh(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+qt(a.href)+'"]');if(i)return t.instance=i,st(i),i;var r=v({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return i=(e.ownerDocument||e).createElement("style"),st(i),ht(i,"style",r),ks(i,a.precedence,e),t.instance=i;case"stylesheet":r=cl(a.href);var u=e.querySelector(ii(r));if(u)return t.state.loading|=4,t.instance=u,st(u),u;i=yh(a),(r=Zt.get(r))&&rc(i,r),u=(e.ownerDocument||e).createElement("link"),st(u);var p=u;return p._p=new Promise(function(j,A){p.onload=j,p.onerror=A}),ht(u,"link",i),t.state.loading|=4,ks(u,a.precedence,e),t.instance=u;case"script":return u=ul(a.src),(r=e.querySelector(si(u)))?(t.instance=r,st(r),r):(i=a,(r=Zt.get(u))&&(i=v({},a),oc(i,r)),e=e.ownerDocument||e,r=e.createElement("script"),st(r),ht(r,"link",i),e.head.appendChild(r),t.instance=r);case"void":return null;default:throw Error(c(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(i=t.instance,t.state.loading|=4,ks(i,a.precedence,e));return t.instance}function ks(e,t,a){for(var i=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=i.length?i[i.length-1]:null,u=r,p=0;p<i.length;p++){var j=i[p];if(j.dataset.precedence===t)u=j;else if(u!==r)break}u?u.parentNode.insertBefore(e,u.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function rc(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function oc(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Rs=null;function bh(e,t,a){if(Rs===null){var i=new Map,r=Rs=new Map;r.set(a,i)}else r=Rs,i=r.get(a),i||(i=new Map,r.set(a,i));if(i.has(e))return i;for(i.set(e,null),a=a.getElementsByTagName(e),r=0;r<a.length;r++){var u=a[r];if(!(u[yl]||u[pt]||e==="link"&&u.getAttribute("rel")==="stylesheet")&&u.namespaceURI!=="http://www.w3.org/2000/svg"){var p=u.getAttribute(t)||"";p=e+p;var j=i.get(p);j?j.push(u):i.set(p,[u])}}return i}function Nh(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function ox(e,t,a){if(a===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Sh(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var ri=null;function cx(){}function ux(e,t,a){if(ri===null)throw Error(c(475));var i=ri;if(t.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(t.state.loading&4)===0){if(t.instance===null){var r=cl(a.href),u=e.querySelector(ii(r));if(u){e=u._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(i.count++,i=Us.bind(i),e.then(i,i)),t.state.loading|=4,t.instance=u,st(u);return}u=e.ownerDocument||e,a=yh(a),(r=Zt.get(r))&&rc(a,r),u=u.createElement("link"),st(u);var p=u;p._p=new Promise(function(j,A){p.onload=j,p.onerror=A}),ht(u,"link",a),t.instance=u}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(t,e),(e=t.state.preload)&&(t.state.loading&3)===0&&(i.count++,t=Us.bind(i),e.addEventListener("load",t),e.addEventListener("error",t))}}function dx(){if(ri===null)throw Error(c(475));var e=ri;return e.stylesheets&&e.count===0&&cc(e,e.stylesheets),0<e.count?function(t){var a=setTimeout(function(){if(e.stylesheets&&cc(e,e.stylesheets),e.unsuspend){var i=e.unsuspend;e.unsuspend=null,i()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(a)}}:null}function Us(){if(this.count--,this.count===0){if(this.stylesheets)cc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Os=null;function cc(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Os=new Map,t.forEach(fx,e),Os=null,Us.call(e))}function fx(e,t){if(!(t.state.loading&4)){var a=Os.get(e);if(a)var i=a.get(null);else{a=new Map,Os.set(e,a);for(var r=e.querySelectorAll("link[data-precedence],style[data-precedence]"),u=0;u<r.length;u++){var p=r[u];(p.nodeName==="LINK"||p.getAttribute("media")!=="not all")&&(a.set(p.dataset.precedence,p),i=p)}i&&a.set(null,i)}r=t.instance,p=r.getAttribute("data-precedence"),u=a.get(p)||i,u===i&&a.set(null,r),a.set(p,r),this.count++,i=Us.bind(this),r.addEventListener("load",i),r.addEventListener("error",i),u?u.parentNode.insertBefore(r,u.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(r,e.firstChild)),t.state.loading|=4}}var oi={$$typeof:z,Provider:null,Consumer:null,_currentValue:te,_currentValue2:te,_threadCount:0};function hx(e,t,a,i,r,u,p,j){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=lr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=lr(0),this.hiddenUpdates=lr(null),this.identifierPrefix=i,this.onUncaughtError=r,this.onCaughtError=u,this.onRecoverableError=p,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=j,this.incompleteTransitions=new Map}function wh(e,t,a,i,r,u,p,j,A,G,ne,le){return e=new hx(e,t,a,p,j,A,G,le),t=1,u===!0&&(t|=24),u=Ut(3,null,null,t),e.current=u,u.stateNode=e,t=Gr(),t.refCount++,e.pooledCache=t,t.refCount++,u.memoizedState={element:i,isDehydrated:a,cache:t},Zr(u),e}function Eh(e){return e?(e=Fa,e):Fa}function Ch(e,t,a,i,r,u){r=Eh(r),i.context===null?i.context=r:i.pendingContext=r,i=_n(t),i.payload={element:a},u=u===void 0?null:u,u!==null&&(i.callback=u),a=Bn(e,i,t),a!==null&&(zt(a,e,t),Ml(a,e,t))}function Dh(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function uc(e,t){Dh(e,t),(e=e.alternate)&&Dh(e,t)}function Th(e){if(e.tag===13){var t=qa(e,67108864);t!==null&&zt(t,e,67108864),uc(e,67108864)}}var _s=!0;function mx(e,t,a,i){var r=T.T;T.T=null;var u=q.p;try{q.p=2,dc(e,t,a,i)}finally{q.p=u,T.T=r}}function px(e,t,a,i){var r=T.T;T.T=null;var u=q.p;try{q.p=8,dc(e,t,a,i)}finally{q.p=u,T.T=r}}function dc(e,t,a,i){if(_s){var r=fc(i);if(r===null)Wo(e,t,i,Bs,a),kh(e,i);else if(xx(r,e,t,a,i))i.stopPropagation();else if(kh(e,i),t&4&&-1<gx.indexOf(e)){for(;r!==null;){var u=Ta(r);if(u!==null)switch(u.tag){case 3:if(u=u.stateNode,u.current.memoizedState.isDehydrated){var p=aa(u.pendingLanes);if(p!==0){var j=u;for(j.pendingLanes|=2,j.entangledLanes|=2;p;){var A=1<<31-kt(p);j.entanglements[1]|=A,p&=~A}nn(u),(Le&6)===0&&(vs=Oe()+500,ti(0))}}break;case 13:j=qa(u,2),j!==null&&zt(j,u,2),js(),uc(u,2)}if(u=fc(i),u===null&&Wo(e,t,i,Bs,a),u===r)break;r=u}r!==null&&i.stopPropagation()}else Wo(e,t,i,null,a)}}function fc(e){return e=gr(e),hc(e)}var Bs=null;function hc(e){if(Bs=null,e=Da(e),e!==null){var t=h(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=m(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Bs=e,null}function Ah(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(at()){case Mt:return 2;case Ea:return 8;case na:case Di:return 32;case Pc:return 268435456;default:return 32}default:return 32}}var mc=!1,Xn=null,$n=null,Jn=null,ci=new Map,ui=new Map,Kn=[],gx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function kh(e,t){switch(e){case"focusin":case"focusout":Xn=null;break;case"dragenter":case"dragleave":$n=null;break;case"mouseover":case"mouseout":Jn=null;break;case"pointerover":case"pointerout":ci.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ui.delete(t.pointerId)}}function di(e,t,a,i,r,u){return e===null||e.nativeEvent!==u?(e={blockedOn:t,domEventName:a,eventSystemFlags:i,nativeEvent:u,targetContainers:[r]},t!==null&&(t=Ta(t),t!==null&&Th(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function xx(e,t,a,i,r){switch(t){case"focusin":return Xn=di(Xn,e,t,a,i,r),!0;case"dragenter":return $n=di($n,e,t,a,i,r),!0;case"mouseover":return Jn=di(Jn,e,t,a,i,r),!0;case"pointerover":var u=r.pointerId;return ci.set(u,di(ci.get(u)||null,e,t,a,i,r)),!0;case"gotpointercapture":return u=r.pointerId,ui.set(u,di(ui.get(u)||null,e,t,a,i,r)),!0}return!1}function Rh(e){var t=Da(e.target);if(t!==null){var a=h(t);if(a!==null){if(t=a.tag,t===13){if(t=m(a),t!==null){e.blockedOn=t,up(e.priority,function(){if(a.tag===13){var i=Lt();i=ir(i);var r=qa(a,i);r!==null&&zt(r,a,i),uc(a,i)}});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ls(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=fc(e.nativeEvent);if(a===null){a=e.nativeEvent;var i=new a.constructor(a.type,a);pr=i,a.target.dispatchEvent(i),pr=null}else return t=Ta(a),t!==null&&Th(t),e.blockedOn=a,!1;t.shift()}return!0}function Uh(e,t,a){Ls(e)&&a.delete(t)}function vx(){mc=!1,Xn!==null&&Ls(Xn)&&(Xn=null),$n!==null&&Ls($n)&&($n=null),Jn!==null&&Ls(Jn)&&(Jn=null),ci.forEach(Uh),ui.forEach(Uh)}function zs(e,t){e.blockedOn===t&&(e.blockedOn=null,mc||(mc=!0,l.unstable_scheduleCallback(l.unstable_NormalPriority,vx)))}var Ms=null;function Oh(e){Ms!==e&&(Ms=e,l.unstable_scheduleCallback(l.unstable_NormalPriority,function(){Ms===e&&(Ms=null);for(var t=0;t<e.length;t+=3){var a=e[t],i=e[t+1],r=e[t+2];if(typeof i!="function"){if(hc(i||a)===null)continue;break}var u=Ta(a);u!==null&&(e.splice(t,3),t-=3,ho(u,{pending:!0,data:r,method:a.method,action:i},i,r))}}))}function fi(e){function t(A){return zs(A,e)}Xn!==null&&zs(Xn,e),$n!==null&&zs($n,e),Jn!==null&&zs(Jn,e),ci.forEach(t),ui.forEach(t);for(var a=0;a<Kn.length;a++){var i=Kn[a];i.blockedOn===e&&(i.blockedOn=null)}for(;0<Kn.length&&(a=Kn[0],a.blockedOn===null);)Rh(a),a.blockedOn===null&&Kn.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(i=0;i<a.length;i+=3){var r=a[i],u=a[i+1],p=r[Nt]||null;if(typeof u=="function")p||Oh(a);else if(p){var j=null;if(u&&u.hasAttribute("formAction")){if(r=u,p=u[Nt]||null)j=p.formAction;else if(hc(r)!==null)continue}else j=p.action;typeof j=="function"?a[i+1]=j:(a.splice(i,3),i-=3),Oh(a)}}}function pc(e){this._internalRoot=e}Hs.prototype.render=pc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(c(409));var a=t.current,i=Lt();Ch(a,i,e,t,null,null)},Hs.prototype.unmount=pc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ch(e.current,2,null,e,null,null),js(),t[Ca]=null}};function Hs(e){this._internalRoot=e}Hs.prototype.unstable_scheduleHydration=function(e){if(e){var t=$c();e={blockedOn:null,target:e,priority:t};for(var a=0;a<Kn.length&&t!==0&&t<Kn[a].priority;a++);Kn.splice(a,0,e),a===0&&Rh(e)}};var _h=s.version;if(_h!=="19.1.1")throw Error(c(527,_h,"19.1.1"));q.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(c(188)):(e=Object.keys(e).join(","),Error(c(268,e)));return e=y(t),e=e!==null?g(e):null,e=e===null?null:e.stateNode,e};var yx={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:T,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qs.isDisabled&&qs.supportsFiber)try{gl=qs.inject(yx),At=qs}catch{}}return mi.createRoot=function(e,t){if(!d(e))throw Error(c(299));var a=!1,i="",r=$d,u=Jd,p=Kd,j=null;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onUncaughtError!==void 0&&(r=t.onUncaughtError),t.onCaughtError!==void 0&&(u=t.onCaughtError),t.onRecoverableError!==void 0&&(p=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(j=t.unstable_transitionCallbacks)),t=wh(e,1,!1,null,null,a,i,r,u,p,j,null),e[Ca]=t.current,Ko(e),new pc(t)},mi.hydrateRoot=function(e,t,a){if(!d(e))throw Error(c(299));var i=!1,r="",u=$d,p=Jd,j=Kd,A=null,G=null;return a!=null&&(a.unstable_strictMode===!0&&(i=!0),a.identifierPrefix!==void 0&&(r=a.identifierPrefix),a.onUncaughtError!==void 0&&(u=a.onUncaughtError),a.onCaughtError!==void 0&&(p=a.onCaughtError),a.onRecoverableError!==void 0&&(j=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(A=a.unstable_transitionCallbacks),a.formState!==void 0&&(G=a.formState)),t=wh(e,1,!0,t,a??null,i,r,u,p,j,A,G),t.context=Eh(null),a=t.current,i=Lt(),i=ir(i),r=_n(i),r.callback=null,Bn(a,r,i),a=i,t.current.lanes=a,vl(t,a),nn(t),e[Ca]=t.current,Ko(e),new Hs(t)},mi.version="19.1.1",mi}var Ph;function Ax(){if(Ph)return vc.exports;Ph=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(s){console.error(s)}}return l(),vc.exports=Tx(),vc.exports}var kx=Ax();const Rx=hm(kx);/**
 * react-router v7.9.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Qh="popstate";function Ux(l={}){function s(c,d){let{pathname:h,search:m,hash:f}=c.location;return Dc("",{pathname:h,search:m,hash:f},d.state&&d.state.usr||null,d.state&&d.state.key||"default")}function o(c,d){return typeof d=="string"?d:yi(d)}return _x(s,o,null,l)}function Xe(l,s){if(l===!1||l===null||typeof l>"u")throw new Error(s)}function on(l,s){if(!l){typeof console<"u"&&console.warn(s);try{throw new Error(s)}catch{}}}function Ox(){return Math.random().toString(36).substring(2,10)}function Vh(l,s){return{usr:l.state,key:l.key,idx:s}}function Dc(l,s,o=null,c){return{pathname:typeof l=="string"?l:l.pathname,search:"",hash:"",...typeof s=="string"?fl(s):s,state:o,key:s&&s.key||c||Ox()}}function yi({pathname:l="/",search:s="",hash:o=""}){return s&&s!=="?"&&(l+=s.charAt(0)==="?"?s:"?"+s),o&&o!=="#"&&(l+=o.charAt(0)==="#"?o:"#"+o),l}function fl(l){let s={};if(l){let o=l.indexOf("#");o>=0&&(s.hash=l.substring(o),l=l.substring(0,o));let c=l.indexOf("?");c>=0&&(s.search=l.substring(c),l=l.substring(0,c)),l&&(s.pathname=l)}return s}function _x(l,s,o,c={}){let{window:d=document.defaultView,v5Compat:h=!1}=c,m=d.history,f="POP",y=null,g=v();g==null&&(g=0,m.replaceState({...m.state,idx:g},""));function v(){return(m.state||{idx:null}).idx}function x(){f="POP";let E=v(),O=E==null?null:E-g;g=E,y&&y({action:f,location:w.location,delta:O})}function S(E,O){f="PUSH";let H=Dc(w.location,E,O);g=v()+1;let z=Vh(H,g),J=w.createHref(H);try{m.pushState(z,"",J)}catch(W){if(W instanceof DOMException&&W.name==="DataCloneError")throw W;d.location.assign(J)}h&&y&&y({action:f,location:w.location,delta:1})}function R(E,O){f="REPLACE";let H=Dc(w.location,E,O);g=v();let z=Vh(H,g),J=w.createHref(H);m.replaceState(z,"",J),h&&y&&y({action:f,location:w.location,delta:0})}function N(E){return Bx(E)}let w={get action(){return f},get location(){return l(d,m)},listen(E){if(y)throw new Error("A history only accepts one active listener");return d.addEventListener(Qh,x),y=E,()=>{d.removeEventListener(Qh,x),y=null}},createHref(E){return s(d,E)},createURL:N,encodeLocation(E){let O=N(E);return{pathname:O.pathname,search:O.search,hash:O.hash}},push:S,replace:R,go(E){return m.go(E)}};return w}function Bx(l,s=!1){let o="http://localhost";typeof window<"u"&&(o=window.location.origin!=="null"?window.location.origin:window.location.href),Xe(o,"No window.location.(origin|href) available to create URL");let c=typeof l=="string"?l:yi(l);return c=c.replace(/ $/,"%20"),!s&&c.startsWith("//")&&(c=o+c),new URL(c,o)}function pm(l,s,o="/"){return Lx(l,s,o,!1)}function Lx(l,s,o,c){let d=typeof s=="string"?fl(s):s,h=Tn(d.pathname||"/",o);if(h==null)return null;let m=gm(l);zx(m);let f=null;for(let y=0;f==null&&y<m.length;++y){let g=Xx(h);f=Vx(m[y],g,c)}return f}function gm(l,s=[],o=[],c="",d=!1){let h=(m,f,y=d,g)=>{let v={relativePath:g===void 0?m.path||"":g,caseSensitive:m.caseSensitive===!0,childrenIndex:f,route:m};if(v.relativePath.startsWith("/")){if(!v.relativePath.startsWith(c)&&y)return;Xe(v.relativePath.startsWith(c),`Absolute route path "${v.relativePath}" nested under path "${c}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(c.length)}let x=Dn([c,v.relativePath]),S=o.concat(v);m.children&&m.children.length>0&&(Xe(m.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${x}".`),gm(m.children,s,S,x,y)),!(m.path==null&&!m.index)&&s.push({path:x,score:Px(x,m.index),routesMeta:S})};return l.forEach((m,f)=>{var y;if(m.path===""||!((y=m.path)!=null&&y.includes("?")))h(m,f);else for(let g of xm(m.path))h(m,f,!0,g)}),s}function xm(l){let s=l.split("/");if(s.length===0)return[];let[o,...c]=s,d=o.endsWith("?"),h=o.replace(/\?$/,"");if(c.length===0)return d?[h,""]:[h];let m=xm(c.join("/")),f=[];return f.push(...m.map(y=>y===""?h:[h,y].join("/"))),d&&f.push(...m),f.map(y=>l.startsWith("/")&&y===""?"/":y)}function zx(l){l.sort((s,o)=>s.score!==o.score?o.score-s.score:Qx(s.routesMeta.map(c=>c.childrenIndex),o.routesMeta.map(c=>c.childrenIndex)))}var Mx=/^:[\w-]+$/,Hx=3,qx=2,Fx=1,Yx=10,Gx=-2,Zh=l=>l==="*";function Px(l,s){let o=l.split("/"),c=o.length;return o.some(Zh)&&(c+=Gx),s&&(c+=qx),o.filter(d=>!Zh(d)).reduce((d,h)=>d+(Mx.test(h)?Hx:h===""?Fx:Yx),c)}function Qx(l,s){return l.length===s.length&&l.slice(0,-1).every((c,d)=>c===s[d])?l[l.length-1]-s[s.length-1]:0}function Vx(l,s,o=!1){let{routesMeta:c}=l,d={},h="/",m=[];for(let f=0;f<c.length;++f){let y=c[f],g=f===c.length-1,v=h==="/"?s:s.slice(h.length)||"/",x=Xs({path:y.relativePath,caseSensitive:y.caseSensitive,end:g},v),S=y.route;if(!x&&g&&o&&!c[c.length-1].route.index&&(x=Xs({path:y.relativePath,caseSensitive:y.caseSensitive,end:!1},v)),!x)return null;Object.assign(d,x.params),m.push({params:d,pathname:Dn([h,x.pathname]),pathnameBase:Wx(Dn([h,x.pathnameBase])),route:S}),x.pathnameBase!=="/"&&(h=Dn([h,x.pathnameBase]))}return m}function Xs(l,s){typeof l=="string"&&(l={path:l,caseSensitive:!1,end:!0});let[o,c]=Zx(l.path,l.caseSensitive,l.end),d=s.match(o);if(!d)return null;let h=d[0],m=h.replace(/(.)\/+$/,"$1"),f=d.slice(1);return{params:c.reduce((g,{paramName:v,isOptional:x},S)=>{if(v==="*"){let N=f[S]||"";m=h.slice(0,h.length-N.length).replace(/(.)\/+$/,"$1")}const R=f[S];return x&&!R?g[v]=void 0:g[v]=(R||"").replace(/%2F/g,"/"),g},{}),pathname:h,pathnameBase:m,pattern:l}}function Zx(l,s=!1,o=!0){on(l==="*"||!l.endsWith("*")||l.endsWith("/*"),`Route path "${l}" will be treated as if it were "${l.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${l.replace(/\*$/,"/*")}".`);let c=[],d="^"+l.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(m,f,y)=>(c.push({paramName:f,isOptional:y!=null}),y?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return l.endsWith("*")?(c.push({paramName:"*"}),d+=l==="*"||l==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):o?d+="\\/*$":l!==""&&l!=="/"&&(d+="(?:(?=\\/|$))"),[new RegExp(d,s?void 0:"i"),c]}function Xx(l){try{return l.split("/").map(s=>decodeURIComponent(s).replace(/\//g,"%2F")).join("/")}catch(s){return on(!1,`The URL path "${l}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${s}).`),l}}function Tn(l,s){if(s==="/")return l;if(!l.toLowerCase().startsWith(s.toLowerCase()))return null;let o=s.endsWith("/")?s.length-1:s.length,c=l.charAt(o);return c&&c!=="/"?null:l.slice(o)||"/"}function $x(l,s="/"){let{pathname:o,search:c="",hash:d=""}=typeof l=="string"?fl(l):l;return{pathname:o?o.startsWith("/")?o:Jx(o,s):s,search:Ix(c),hash:ev(d)}}function Jx(l,s){let o=s.replace(/\/+$/,"").split("/");return l.split("/").forEach(d=>{d===".."?o.length>1&&o.pop():d!=="."&&o.push(d)}),o.length>1?o.join("/"):"/"}function Nc(l,s,o,c){return`Cannot include a '${l}' character in a manually specified \`to.${s}\` field [${JSON.stringify(c)}].  Please separate it out to the \`to.${o}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Kx(l){return l.filter((s,o)=>o===0||s.route.path&&s.route.path.length>0)}function vm(l){let s=Kx(l);return s.map((o,c)=>c===s.length-1?o.pathname:o.pathnameBase)}function ym(l,s,o,c=!1){let d;typeof l=="string"?d=fl(l):(d={...l},Xe(!d.pathname||!d.pathname.includes("?"),Nc("?","pathname","search",d)),Xe(!d.pathname||!d.pathname.includes("#"),Nc("#","pathname","hash",d)),Xe(!d.search||!d.search.includes("#"),Nc("#","search","hash",d)));let h=l===""||d.pathname==="",m=h?"/":d.pathname,f;if(m==null)f=o;else{let x=s.length-1;if(!c&&m.startsWith("..")){let S=m.split("/");for(;S[0]==="..";)S.shift(),x-=1;d.pathname=S.join("/")}f=x>=0?s[x]:"/"}let y=$x(d,f),g=m&&m!=="/"&&m.endsWith("/"),v=(h||m===".")&&o.endsWith("/");return!y.pathname.endsWith("/")&&(g||v)&&(y.pathname+="/"),y}var Dn=l=>l.join("/").replace(/\/\/+/g,"/"),Wx=l=>l.replace(/\/+$/,"").replace(/^\/*/,"/"),Ix=l=>!l||l==="?"?"":l.startsWith("?")?l:"?"+l,ev=l=>!l||l==="#"?"":l.startsWith("#")?l:"#"+l;function tv(l){return l!=null&&typeof l.status=="number"&&typeof l.statusText=="string"&&typeof l.internal=="boolean"&&"data"in l}var jm=["POST","PUT","PATCH","DELETE"];new Set(jm);var nv=["GET",...jm];new Set(nv);var hl=b.createContext(null);hl.displayName="DataRouter";var Js=b.createContext(null);Js.displayName="DataRouterState";b.createContext(!1);var bm=b.createContext({isTransitioning:!1});bm.displayName="ViewTransition";var av=b.createContext(new Map);av.displayName="Fetchers";var lv=b.createContext(null);lv.displayName="Await";var cn=b.createContext(null);cn.displayName="Navigation";var ji=b.createContext(null);ji.displayName="Location";var un=b.createContext({outlet:null,matches:[],isDataRoute:!1});un.displayName="Route";var Lc=b.createContext(null);Lc.displayName="RouteError";function iv(l,{relative:s}={}){Xe(bi(),"useHref() may be used only in the context of a <Router> component.");let{basename:o,navigator:c}=b.useContext(cn),{hash:d,pathname:h,search:m}=Ni(l,{relative:s}),f=h;return o!=="/"&&(f=h==="/"?o:Dn([o,h])),c.createHref({pathname:f,search:m,hash:d})}function bi(){return b.useContext(ji)!=null}function dn(){return Xe(bi(),"useLocation() may be used only in the context of a <Router> component."),b.useContext(ji).location}var Nm="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Sm(l){b.useContext(cn).static||b.useLayoutEffect(l)}function ta(){let{isDataRoute:l}=b.useContext(un);return l?yv():sv()}function sv(){Xe(bi(),"useNavigate() may be used only in the context of a <Router> component.");let l=b.useContext(hl),{basename:s,navigator:o}=b.useContext(cn),{matches:c}=b.useContext(un),{pathname:d}=dn(),h=JSON.stringify(vm(c)),m=b.useRef(!1);return Sm(()=>{m.current=!0}),b.useCallback((y,g={})=>{if(on(m.current,Nm),!m.current)return;if(typeof y=="number"){o.go(y);return}let v=ym(y,JSON.parse(h),d,g.relative==="path");l==null&&s!=="/"&&(v.pathname=v.pathname==="/"?s:Dn([s,v.pathname])),(g.replace?o.replace:o.push)(v,g.state,g)},[s,o,h,d,l])}b.createContext(null);function rv(){let{matches:l}=b.useContext(un),s=l[l.length-1];return s?s.params:{}}function Ni(l,{relative:s}={}){let{matches:o}=b.useContext(un),{pathname:c}=dn(),d=JSON.stringify(vm(o));return b.useMemo(()=>ym(l,JSON.parse(d),c,s==="path"),[l,d,c,s])}function ov(l,s){return wm(l,s)}function wm(l,s,o,c,d){var H;Xe(bi(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:h}=b.useContext(cn),{matches:m}=b.useContext(un),f=m[m.length-1],y=f?f.params:{},g=f?f.pathname:"/",v=f?f.pathnameBase:"/",x=f&&f.route;{let z=x&&x.path||"";Em(g,!x||z.endsWith("*")||z.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${z}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${z}"> to <Route path="${z==="/"?"*":`${z}/*`}">.`)}let S=dn(),R;if(s){let z=typeof s=="string"?fl(s):s;Xe(v==="/"||((H=z.pathname)==null?void 0:H.startsWith(v)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${v}" but pathname "${z.pathname}" was given in the \`location\` prop.`),R=z}else R=S;let N=R.pathname||"/",w=N;if(v!=="/"){let z=v.replace(/^\//,"").split("/");w="/"+N.replace(/^\//,"").split("/").slice(z.length).join("/")}let E=pm(l,{pathname:w});on(x||E!=null,`No routes matched location "${R.pathname}${R.search}${R.hash}" `),on(E==null||E[E.length-1].route.element!==void 0||E[E.length-1].route.Component!==void 0||E[E.length-1].route.lazy!==void 0,`Matched leaf route at location "${R.pathname}${R.search}${R.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let O=hv(E&&E.map(z=>Object.assign({},z,{params:Object.assign({},y,z.params),pathname:Dn([v,h.encodeLocation?h.encodeLocation(z.pathname).pathname:z.pathname]),pathnameBase:z.pathnameBase==="/"?v:Dn([v,h.encodeLocation?h.encodeLocation(z.pathnameBase).pathname:z.pathnameBase])})),m,o,c,d);return s&&O?b.createElement(ji.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...R},navigationType:"POP"}},O):O}function cv(){let l=vv(),s=tv(l)?`${l.status} ${l.statusText}`:l instanceof Error?l.message:JSON.stringify(l),o=l instanceof Error?l.stack:null,c="rgba(200,200,200, 0.5)",d={padding:"0.5rem",backgroundColor:c},h={padding:"2px 4px",backgroundColor:c},m=null;return console.error("Error handled by React Router default ErrorBoundary:",l),m=b.createElement(b.Fragment,null,b.createElement("p",null," Hey developer "),b.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",b.createElement("code",{style:h},"ErrorBoundary")," or"," ",b.createElement("code",{style:h},"errorElement")," prop on your route.")),b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},s),o?b.createElement("pre",{style:d},o):null,m)}var uv=b.createElement(cv,null),dv=class extends b.Component{constructor(l){super(l),this.state={location:l.location,revalidation:l.revalidation,error:l.error}}static getDerivedStateFromError(l){return{error:l}}static getDerivedStateFromProps(l,s){return s.location!==l.location||s.revalidation!=="idle"&&l.revalidation==="idle"?{error:l.error,location:l.location,revalidation:l.revalidation}:{error:l.error!==void 0?l.error:s.error,location:s.location,revalidation:l.revalidation||s.revalidation}}componentDidCatch(l,s){this.props.unstable_onError?this.props.unstable_onError(l,s):console.error("React Router caught the following error during render",l)}render(){return this.state.error!==void 0?b.createElement(un.Provider,{value:this.props.routeContext},b.createElement(Lc.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function fv({routeContext:l,match:s,children:o}){let c=b.useContext(hl);return c&&c.static&&c.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(c.staticContext._deepestRenderedBoundaryId=s.route.id),b.createElement(un.Provider,{value:l},o)}function hv(l,s=[],o=null,c=null,d=null){if(l==null){if(!o)return null;if(o.errors)l=o.matches;else if(s.length===0&&!o.initialized&&o.matches.length>0)l=o.matches;else return null}let h=l,m=o==null?void 0:o.errors;if(m!=null){let g=h.findIndex(v=>v.route.id&&(m==null?void 0:m[v.route.id])!==void 0);Xe(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(m).join(",")}`),h=h.slice(0,Math.min(h.length,g+1))}let f=!1,y=-1;if(o)for(let g=0;g<h.length;g++){let v=h[g];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(y=g),v.route.id){let{loaderData:x,errors:S}=o,R=v.route.loader&&!x.hasOwnProperty(v.route.id)&&(!S||S[v.route.id]===void 0);if(v.route.lazy||R){f=!0,y>=0?h=h.slice(0,y+1):h=[h[0]];break}}}return h.reduceRight((g,v,x)=>{let S,R=!1,N=null,w=null;o&&(S=m&&v.route.id?m[v.route.id]:void 0,N=v.route.errorElement||uv,f&&(y<0&&x===0?(Em("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),R=!0,w=null):y===x&&(R=!0,w=v.route.hydrateFallbackElement||null)));let E=s.concat(h.slice(0,x+1)),O=()=>{let H;return S?H=N:R?H=w:v.route.Component?H=b.createElement(v.route.Component,null):v.route.element?H=v.route.element:H=g,b.createElement(fv,{match:v,routeContext:{outlet:g,matches:E,isDataRoute:o!=null},children:H})};return o&&(v.route.ErrorBoundary||v.route.errorElement||x===0)?b.createElement(dv,{location:o.location,revalidation:o.revalidation,component:N,error:S,children:O(),routeContext:{outlet:null,matches:E,isDataRoute:!0},unstable_onError:c}):O()},null)}function zc(l){return`${l} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function mv(l){let s=b.useContext(hl);return Xe(s,zc(l)),s}function pv(l){let s=b.useContext(Js);return Xe(s,zc(l)),s}function gv(l){let s=b.useContext(un);return Xe(s,zc(l)),s}function Mc(l){let s=gv(l),o=s.matches[s.matches.length-1];return Xe(o.route.id,`${l} can only be used on routes that contain a unique "id"`),o.route.id}function xv(){return Mc("useRouteId")}function vv(){var c;let l=b.useContext(Lc),s=pv("useRouteError"),o=Mc("useRouteError");return l!==void 0?l:(c=s.errors)==null?void 0:c[o]}function yv(){let{router:l}=mv("useNavigate"),s=Mc("useNavigate"),o=b.useRef(!1);return Sm(()=>{o.current=!0}),b.useCallback(async(d,h={})=>{on(o.current,Nm),o.current&&(typeof d=="number"?l.navigate(d):await l.navigate(d,{fromRouteId:s,...h}))},[l,s])}var Xh={};function Em(l,s,o){!s&&!Xh[l]&&(Xh[l]=!0,on(!1,o))}b.memo(jv);function jv({routes:l,future:s,state:o,unstable_onError:c}){return wm(l,void 0,o,c,s)}function ln(l){Xe(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function bv({basename:l="/",children:s=null,location:o,navigationType:c="POP",navigator:d,static:h=!1}){Xe(!bi(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let m=l.replace(/^\/*/,"/"),f=b.useMemo(()=>({basename:m,navigator:d,static:h,future:{}}),[m,d,h]);typeof o=="string"&&(o=fl(o));let{pathname:y="/",search:g="",hash:v="",state:x=null,key:S="default"}=o,R=b.useMemo(()=>{let N=Tn(y,m);return N==null?null:{location:{pathname:N,search:g,hash:v,state:x,key:S},navigationType:c}},[m,y,g,v,x,S,c]);return on(R!=null,`<Router basename="${m}"> is not able to match the URL "${y}${g}${v}" because it does not start with the basename, so the <Router> won't render anything.`),R==null?null:b.createElement(cn.Provider,{value:f},b.createElement(ji.Provider,{children:s,value:R}))}function Nv({children:l,location:s}){return ov(Tc(l),s)}function Tc(l,s=[]){let o=[];return b.Children.forEach(l,(c,d)=>{if(!b.isValidElement(c))return;let h=[...s,d];if(c.type===b.Fragment){o.push.apply(o,Tc(c.props.children,h));return}Xe(c.type===ln,`[${typeof c.type=="string"?c.type:c.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Xe(!c.props.index||!c.props.children,"An index route cannot have child routes.");let m={id:c.props.id||h.join("-"),caseSensitive:c.props.caseSensitive,element:c.props.element,Component:c.props.Component,index:c.props.index,path:c.props.path,loader:c.props.loader,action:c.props.action,hydrateFallbackElement:c.props.hydrateFallbackElement,HydrateFallback:c.props.HydrateFallback,errorElement:c.props.errorElement,ErrorBoundary:c.props.ErrorBoundary,hasErrorBoundary:c.props.hasErrorBoundary===!0||c.props.ErrorBoundary!=null||c.props.errorElement!=null,shouldRevalidate:c.props.shouldRevalidate,handle:c.props.handle,lazy:c.props.lazy};c.props.children&&(m.children=Tc(c.props.children,h)),o.push(m)}),o}var Gs="get",Ps="application/x-www-form-urlencoded";function Ks(l){return l!=null&&typeof l.tagName=="string"}function Sv(l){return Ks(l)&&l.tagName.toLowerCase()==="button"}function wv(l){return Ks(l)&&l.tagName.toLowerCase()==="form"}function Ev(l){return Ks(l)&&l.tagName.toLowerCase()==="input"}function Cv(l){return!!(l.metaKey||l.altKey||l.ctrlKey||l.shiftKey)}function Dv(l,s){return l.button===0&&(!s||s==="_self")&&!Cv(l)}var Fs=null;function Tv(){if(Fs===null)try{new FormData(document.createElement("form"),0),Fs=!1}catch{Fs=!0}return Fs}var Av=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Sc(l){return l!=null&&!Av.has(l)?(on(!1,`"${l}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ps}"`),null):l}function kv(l,s){let o,c,d,h,m;if(wv(l)){let f=l.getAttribute("action");c=f?Tn(f,s):null,o=l.getAttribute("method")||Gs,d=Sc(l.getAttribute("enctype"))||Ps,h=new FormData(l)}else if(Sv(l)||Ev(l)&&(l.type==="submit"||l.type==="image")){let f=l.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let y=l.getAttribute("formaction")||f.getAttribute("action");if(c=y?Tn(y,s):null,o=l.getAttribute("formmethod")||f.getAttribute("method")||Gs,d=Sc(l.getAttribute("formenctype"))||Sc(f.getAttribute("enctype"))||Ps,h=new FormData(f,l),!Tv()){let{name:g,type:v,value:x}=l;if(v==="image"){let S=g?`${g}.`:"";h.append(`${S}x`,"0"),h.append(`${S}y`,"0")}else g&&h.append(g,x)}}else{if(Ks(l))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');o=Gs,c=null,d=Ps,m=l}return h&&d==="text/plain"&&(m=h,h=void 0),{action:c,method:o.toLowerCase(),encType:d,formData:h,body:m}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Hc(l,s){if(l===!1||l===null||typeof l>"u")throw new Error(s)}function Rv(l,s,o){let c=typeof l=="string"?new URL(l,typeof window>"u"?"server://singlefetch/":window.location.origin):l;return c.pathname==="/"?c.pathname=`_root.${o}`:s&&Tn(c.pathname,s)==="/"?c.pathname=`${s.replace(/\/$/,"")}/_root.${o}`:c.pathname=`${c.pathname.replace(/\/$/,"")}.${o}`,c}async function Uv(l,s){if(l.id in s)return s[l.id];try{let o=await import(l.module);return s[l.id]=o,o}catch(o){return console.error(`Error loading route module \`${l.module}\`, reloading page...`),console.error(o),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Ov(l){return l==null?!1:l.href==null?l.rel==="preload"&&typeof l.imageSrcSet=="string"&&typeof l.imageSizes=="string":typeof l.rel=="string"&&typeof l.href=="string"}async function _v(l,s,o){let c=await Promise.all(l.map(async d=>{let h=s.routes[d.route.id];if(h){let m=await Uv(h,o);return m.links?m.links():[]}return[]}));return Mv(c.flat(1).filter(Ov).filter(d=>d.rel==="stylesheet"||d.rel==="preload").map(d=>d.rel==="stylesheet"?{...d,rel:"prefetch",as:"style"}:{...d,rel:"prefetch"}))}function $h(l,s,o,c,d,h){let m=(y,g)=>o[g]?y.route.id!==o[g].route.id:!0,f=(y,g)=>{var v;return o[g].pathname!==y.pathname||((v=o[g].route.path)==null?void 0:v.endsWith("*"))&&o[g].params["*"]!==y.params["*"]};return h==="assets"?s.filter((y,g)=>m(y,g)||f(y,g)):h==="data"?s.filter((y,g)=>{var x;let v=c.routes[y.route.id];if(!v||!v.hasLoader)return!1;if(m(y,g)||f(y,g))return!0;if(y.route.shouldRevalidate){let S=y.route.shouldRevalidate({currentUrl:new URL(d.pathname+d.search+d.hash,window.origin),currentParams:((x=o[0])==null?void 0:x.params)||{},nextUrl:new URL(l,window.origin),nextParams:y.params,defaultShouldRevalidate:!0});if(typeof S=="boolean")return S}return!0}):[]}function Bv(l,s,{includeHydrateFallback:o}={}){return Lv(l.map(c=>{let d=s.routes[c.route.id];if(!d)return[];let h=[d.module];return d.clientActionModule&&(h=h.concat(d.clientActionModule)),d.clientLoaderModule&&(h=h.concat(d.clientLoaderModule)),o&&d.hydrateFallbackModule&&(h=h.concat(d.hydrateFallbackModule)),d.imports&&(h=h.concat(d.imports)),h}).flat(1))}function Lv(l){return[...new Set(l)]}function zv(l){let s={},o=Object.keys(l).sort();for(let c of o)s[c]=l[c];return s}function Mv(l,s){let o=new Set;return new Set(s),l.reduce((c,d)=>{let h=JSON.stringify(zv(d));return o.has(h)||(o.add(h),c.push({key:h,link:d})),c},[])}function Cm(){let l=b.useContext(hl);return Hc(l,"You must render this element inside a <DataRouterContext.Provider> element"),l}function Hv(){let l=b.useContext(Js);return Hc(l,"You must render this element inside a <DataRouterStateContext.Provider> element"),l}var qc=b.createContext(void 0);qc.displayName="FrameworkContext";function Dm(){let l=b.useContext(qc);return Hc(l,"You must render this element inside a <HydratedRouter> element"),l}function qv(l,s){let o=b.useContext(qc),[c,d]=b.useState(!1),[h,m]=b.useState(!1),{onFocus:f,onBlur:y,onMouseEnter:g,onMouseLeave:v,onTouchStart:x}=s,S=b.useRef(null);b.useEffect(()=>{if(l==="render"&&m(!0),l==="viewport"){let w=O=>{O.forEach(H=>{m(H.isIntersecting)})},E=new IntersectionObserver(w,{threshold:.5});return S.current&&E.observe(S.current),()=>{E.disconnect()}}},[l]),b.useEffect(()=>{if(c){let w=setTimeout(()=>{m(!0)},100);return()=>{clearTimeout(w)}}},[c]);let R=()=>{d(!0)},N=()=>{d(!1),m(!1)};return o?l!=="intent"?[h,S,{}]:[h,S,{onFocus:pi(f,R),onBlur:pi(y,N),onMouseEnter:pi(g,R),onMouseLeave:pi(v,N),onTouchStart:pi(x,R)}]:[!1,S,{}]}function pi(l,s){return o=>{l&&l(o),o.defaultPrevented||s(o)}}function Fv({page:l,...s}){let{router:o}=Cm(),c=b.useMemo(()=>pm(o.routes,l,o.basename),[o.routes,l,o.basename]);return c?b.createElement(Gv,{page:l,matches:c,...s}):null}function Yv(l){let{manifest:s,routeModules:o}=Dm(),[c,d]=b.useState([]);return b.useEffect(()=>{let h=!1;return _v(l,s,o).then(m=>{h||d(m)}),()=>{h=!0}},[l,s,o]),c}function Gv({page:l,matches:s,...o}){let c=dn(),{manifest:d,routeModules:h}=Dm(),{basename:m}=Cm(),{loaderData:f,matches:y}=Hv(),g=b.useMemo(()=>$h(l,s,y,d,c,"data"),[l,s,y,d,c]),v=b.useMemo(()=>$h(l,s,y,d,c,"assets"),[l,s,y,d,c]),x=b.useMemo(()=>{if(l===c.pathname+c.search+c.hash)return[];let N=new Set,w=!1;if(s.forEach(O=>{var z;let H=d.routes[O.route.id];!H||!H.hasLoader||(!g.some(J=>J.route.id===O.route.id)&&O.route.id in f&&((z=h[O.route.id])!=null&&z.shouldRevalidate)||H.hasClientLoader?w=!0:N.add(O.route.id))}),N.size===0)return[];let E=Rv(l,m,"data");return w&&N.size>0&&E.searchParams.set("_routes",s.filter(O=>N.has(O.route.id)).map(O=>O.route.id).join(",")),[E.pathname+E.search]},[m,f,c,d,g,s,l,h]),S=b.useMemo(()=>Bv(v,d),[v,d]),R=Yv(v);return b.createElement(b.Fragment,null,x.map(N=>b.createElement("link",{key:N,rel:"prefetch",as:"fetch",href:N,...o})),S.map(N=>b.createElement("link",{key:N,rel:"modulepreload",href:N,...o})),R.map(({key:N,link:w})=>b.createElement("link",{key:N,nonce:o.nonce,...w})))}function Pv(...l){return s=>{l.forEach(o=>{typeof o=="function"?o(s):o!=null&&(o.current=s)})}}var Tm=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Tm&&(window.__reactRouterVersion="7.9.1")}catch{}function Qv({basename:l,children:s,window:o}){let c=b.useRef();c.current==null&&(c.current=Ux({window:o,v5Compat:!0}));let d=c.current,[h,m]=b.useState({action:d.action,location:d.location}),f=b.useCallback(y=>{b.startTransition(()=>m(y))},[m]);return b.useLayoutEffect(()=>d.listen(f),[d,f]),b.createElement(bv,{basename:l,children:s,location:h.location,navigationType:h.action,navigator:d})}var Am=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ut=b.forwardRef(function({onClick:s,discover:o="render",prefetch:c="none",relative:d,reloadDocument:h,replace:m,state:f,target:y,to:g,preventScrollReset:v,viewTransition:x,...S},R){let{basename:N}=b.useContext(cn),w=typeof g=="string"&&Am.test(g),E,O=!1;if(typeof g=="string"&&w&&(E=g,Tm))try{let U=new URL(window.location.href),ee=g.startsWith("//")?new URL(U.protocol+g):new URL(g),I=Tn(ee.pathname,N);ee.origin===U.origin&&I!=null?g=I+ee.search+ee.hash:O=!0}catch{on(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let H=iv(g,{relative:d}),[z,J,W]=qv(c,S),L=$v(g,{replace:m,state:f,target:y,preventScrollReset:v,relative:d,viewTransition:x});function k(U){s&&s(U),U.defaultPrevented||L(U)}let P=b.createElement("a",{...S,...W,href:E||H,onClick:O||h?s:k,ref:Pv(R,J),target:y,"data-discover":!w&&o==="render"?"true":void 0});return z&&!w?b.createElement(b.Fragment,null,P,b.createElement(Fv,{page:H})):P});ut.displayName="Link";var Vv=b.forwardRef(function({"aria-current":s="page",caseSensitive:o=!1,className:c="",end:d=!1,style:h,to:m,viewTransition:f,children:y,...g},v){let x=Ni(m,{relative:g.relative}),S=dn(),R=b.useContext(Js),{navigator:N,basename:w}=b.useContext(cn),E=R!=null&&ey(x)&&f===!0,O=N.encodeLocation?N.encodeLocation(x).pathname:x.pathname,H=S.pathname,z=R&&R.navigation&&R.navigation.location?R.navigation.location.pathname:null;o||(H=H.toLowerCase(),z=z?z.toLowerCase():null,O=O.toLowerCase()),z&&w&&(z=Tn(z,w)||z);const J=O!=="/"&&O.endsWith("/")?O.length-1:O.length;let W=H===O||!d&&H.startsWith(O)&&H.charAt(J)==="/",L=z!=null&&(z===O||!d&&z.startsWith(O)&&z.charAt(O.length)==="/"),k={isActive:W,isPending:L,isTransitioning:E},P=W?s:void 0,U;typeof c=="function"?U=c(k):U=[c,W?"active":null,L?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let ee=typeof h=="function"?h(k):h;return b.createElement(ut,{...g,"aria-current":P,className:U,ref:v,style:ee,to:m,viewTransition:f},typeof y=="function"?y(k):y)});Vv.displayName="NavLink";var Zv=b.forwardRef(({discover:l="render",fetcherKey:s,navigate:o,reloadDocument:c,replace:d,state:h,method:m=Gs,action:f,onSubmit:y,relative:g,preventScrollReset:v,viewTransition:x,...S},R)=>{let N=Wv(),w=Iv(f,{relative:g}),E=m.toLowerCase()==="get"?"get":"post",O=typeof f=="string"&&Am.test(f),H=z=>{if(y&&y(z),z.defaultPrevented)return;z.preventDefault();let J=z.nativeEvent.submitter,W=(J==null?void 0:J.getAttribute("formmethod"))||m;N(J||z.currentTarget,{fetcherKey:s,method:W,navigate:o,replace:d,state:h,relative:g,preventScrollReset:v,viewTransition:x})};return b.createElement("form",{ref:R,method:E,action:w,onSubmit:c?y:H,...S,"data-discover":!O&&l==="render"?"true":void 0})});Zv.displayName="Form";function Xv(l){return`${l} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function km(l){let s=b.useContext(hl);return Xe(s,Xv(l)),s}function $v(l,{target:s,replace:o,state:c,preventScrollReset:d,relative:h,viewTransition:m}={}){let f=ta(),y=dn(),g=Ni(l,{relative:h});return b.useCallback(v=>{if(Dv(v,s)){v.preventDefault();let x=o!==void 0?o:yi(y)===yi(g);f(l,{replace:x,state:c,preventScrollReset:d,relative:h,viewTransition:m})}},[y,f,g,o,c,s,l,d,h,m])}var Jv=0,Kv=()=>`__${String(++Jv)}__`;function Wv(){let{router:l}=km("useSubmit"),{basename:s}=b.useContext(cn),o=xv();return b.useCallback(async(c,d={})=>{let{action:h,method:m,encType:f,formData:y,body:g}=kv(c,s);if(d.navigate===!1){let v=d.fetcherKey||Kv();await l.fetch(v,o,d.action||h,{preventScrollReset:d.preventScrollReset,formData:y,body:g,formMethod:d.method||m,formEncType:d.encType||f,flushSync:d.flushSync})}else await l.navigate(d.action||h,{preventScrollReset:d.preventScrollReset,formData:y,body:g,formMethod:d.method||m,formEncType:d.encType||f,replace:d.replace,state:d.state,fromRouteId:o,flushSync:d.flushSync,viewTransition:d.viewTransition})},[l,s,o])}function Iv(l,{relative:s}={}){let{basename:o}=b.useContext(cn),c=b.useContext(un);Xe(c,"useFormAction must be used inside a RouteContext");let[d]=c.matches.slice(-1),h={...Ni(l||".",{relative:s})},m=dn();if(l==null){h.search=m.search;let f=new URLSearchParams(h.search),y=f.getAll("index");if(y.some(v=>v==="")){f.delete("index"),y.filter(x=>x).forEach(x=>f.append("index",x));let v=f.toString();h.search=v?`?${v}`:""}}return(!l||l===".")&&d.route.index&&(h.search=h.search?h.search.replace(/^\?/,"?index&"):"?index"),o!=="/"&&(h.pathname=h.pathname==="/"?o:Dn([o,h.pathname])),yi(h)}function ey(l,{relative:s}={}){let o=b.useContext(bm);Xe(o!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:c}=km("useViewTransitionState"),d=Ni(l,{relative:s});if(!o.isTransitioning)return!1;let h=Tn(o.currentLocation.pathname,c)||o.currentLocation.pathname,m=Tn(o.nextLocation.pathname,c)||o.nextLocation.pathname;return Xs(d.pathname,m)!=null||Xs(d.pathname,h)!=null}var jt=mm();const Ac=({handleLogin:l,username:s,setUsername:o,password:c,setPassword:d,rememberMe:h,setRememberMe:m})=>n.jsxs("div",{children:[n.jsx("h2",{children:"Login"}),n.jsxs("form",{onSubmit:f=>{l(f)},children:[n.jsx("div",{children:n.jsxs("label",{children:["Username:",n.jsx("input",{id:"username",type:"text",value:s,onChange:({target:f})=>o(f.value),autoComplete:"username"})]})}),n.jsx("div",{children:n.jsxs("label",{children:["Password:",n.jsx("input",{id:"password",type:"password",value:c,onChange:({target:f})=>d(f.value),autoComplete:"current-password"})]})}),n.jsx("div",{className:"remember-me checkbox-group",children:n.jsxs("label",{children:[n.jsx("input",{type:"checkbox",checked:h,onChange:({target:f})=>m(f.checked)}),"Remember Me (30 days)"]})}),n.jsx("div",{className:"login-popup-actions",children:n.jsx("button",{className:"inverted",type:"submit",children:"Login"})})]})]}),ty=({user:l,handleLogin:s,username:o,setUsername:c,password:d,setPassword:h,rememberMe:m,setRememberMe:f,handleLogout:y})=>{const[g,v]=b.useState(!1),[x,S]=b.useState(!1),[R,N]=b.useState(!1),[w,E]=b.useState(!1),O=b.useRef(null),H=ta(),z=(l==null?void 0:l.role)==="admin",J=()=>{y(),H("/")},W=()=>{S(!x)},L=()=>{S(!1)},k=()=>{N(!1)},P=async U=>{const ee=await s(U);return ee===!0&&v(!1),ee};return b.useEffect(()=>{const U=()=>{E(window.matchMedia("(pointer: fine)").matches)};U();const ee=window.matchMedia("(pointer: fine)");return ee.addEventListener("change",U),()=>ee.removeEventListener("change",U)},[]),b.useEffect(()=>{const U=ee=>{O.current&&!O.current.contains(ee.target)&&N(!1)};if(R&&!w)return document.addEventListener("mousedown",U),()=>{document.removeEventListener("mousedown",U)}},[R,w]),n.jsxs("header",{className:"header",children:[n.jsx("div",{className:"header-logo",children:n.jsx(ut,{to:"/",onClick:L,children:n.jsx("img",{src:"/CDT_Logo_terra.svg",alt:"Campus da Terra Library"})})}),n.jsx("button",{className:"mobile-menu-button",onClick:W,"aria-label":"Toggle mobile menu",children:n.jsxs("div",{className:`hamburger ${x?"open":""}`,children:[n.jsx("span",{}),n.jsx("span",{}),n.jsx("span",{})]})}),n.jsx("nav",{className:"header-nav desktop-nav",children:n.jsxs("div",{className:"nav-links",children:[n.jsx(ut,{to:"/",className:"nav-link",children:"Home"}),n.jsx(ut,{to:"/library",className:"nav-link",children:"Library"}),n.jsx(ut,{to:"/calendar",className:"nav-link",children:"Calendar"}),l&&n.jsxs(n.Fragment,{children:[n.jsx(ut,{to:"/documents",className:"nav-link",children:"Ressources"}),n.jsxs("div",{className:"nav-dropdown",ref:O,onMouseEnter:()=>{w&&N(!0)},onMouseLeave:()=>{w&&N(!1)},children:[n.jsx("a",{href:"#",className:"nav-link dropdown-toggle",onClick:U=>{U.preventDefault(),w||N(!R)},"aria-label":"Settings menu",children:"Settings"}),R&&n.jsxs("div",{className:"dropdown-menu",children:[n.jsx(ut,{to:"/profile",className:"dropdown-item",onClick:k,children:"My Profile"}),n.jsx(ut,{to:"/students",className:"dropdown-item",onClick:k,children:z?"Students":"My Students"}),z&&n.jsxs(n.Fragment,{children:[n.jsx(ut,{to:"/users",className:"dropdown-item",onClick:k,children:"Users"}),n.jsx(ut,{to:"/admin",className:"dropdown-item",onClick:k,children:"Admin"})]})]})]})]})]})}),n.jsx("div",{className:"header-actions desktop-actions",children:l?n.jsx("button",{className:"beige-font",onClick:J,children:"Logout"}):n.jsxs(n.Fragment,{children:[n.jsx("button",{className:"beige-font",onClick:()=>v(U=>!U),children:"Login"}),g&&n.jsxs("div",{className:"login-popup",children:[n.jsx("button",{className:"login-popup-close",onClick:()=>v(!1),"aria-label":"Close login",children:""}),n.jsx(Ac,{handleLogin:P,username:o,setUsername:c,password:d,setPassword:h,rememberMe:m,setRememberMe:f})]})]})}),n.jsx("div",{className:`mobile-nav-overlay ${x?"open":""}`,onClick:L,children:n.jsx("nav",{className:`mobile-nav ${x?"open":""}`,onClick:U=>U.stopPropagation(),children:n.jsxs("div",{className:"mobile-nav-content",children:[n.jsxs("div",{className:"mobile-nav-links",children:[n.jsx(ut,{to:"/",className:"mobile-nav-link",onClick:L,children:"Home"}),n.jsx(ut,{to:"/library",className:"mobile-nav-link",onClick:L,children:"Library"}),l&&n.jsxs(n.Fragment,{children:[n.jsx(ut,{to:"/calendar",className:"mobile-nav-link",onClick:L,children:"Calendar"}),n.jsx(ut,{to:"/documents",className:"mobile-nav-link",onClick:L,children:"Ressources"}),n.jsx(ut,{to:"/students",className:"mobile-nav-link",onClick:L,children:"Students"})]}),(l==null?void 0:l.role)==="admin"&&n.jsxs(n.Fragment,{children:[n.jsx(ut,{to:"/users",className:"mobile-nav-link",onClick:L,children:"Users"}),n.jsx(ut,{to:"/admin",className:"mobile-nav-link",onClick:L,children:"Admin"})]})]}),n.jsx("div",{className:"mobile-nav-actions",children:l?n.jsxs("div",{className:"mobile-user-actions",children:[n.jsx("button",{className:"mobile-profile-btn",onClick:()=>{H("/profile"),L()},children:l.name}),n.jsx("button",{className:"mobile-logout-btn",onClick:()=>{J(),L()},children:"Logout"})]}):n.jsx("button",{className:"mobile-login-btn",onClick:()=>{v(!0),L()},children:"Login"})})]})})}),g&&n.jsxs("div",{className:"login-popup",children:[n.jsx("button",{className:"login-popup-close",onClick:()=>v(!1),"aria-label":"Close login",children:""}),n.jsx(Ac,{handleLogin:P,username:o,setUsername:c,password:d,setPassword:h,rememberMe:m,setRememberMe:f})]})]})};function Rm(l,s){return function(){return l.apply(s,arguments)}}const{toString:ny}=Object.prototype,{getPrototypeOf:Fc}=Object,{iterator:Ws,toStringTag:Um}=Symbol,Is=(l=>s=>{const o=ny.call(s);return l[o]||(l[o]=o.slice(8,-1).toLowerCase())})(Object.create(null)),Kt=l=>(l=l.toLowerCase(),s=>Is(s)===l),er=l=>s=>typeof s===l,{isArray:ml}=Array,dl=er("undefined");function Si(l){return l!==null&&!dl(l)&&l.constructor!==null&&!dl(l.constructor)&&Dt(l.constructor.isBuffer)&&l.constructor.isBuffer(l)}const Om=Kt("ArrayBuffer");function ay(l){let s;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?s=ArrayBuffer.isView(l):s=l&&l.buffer&&Om(l.buffer),s}const ly=er("string"),Dt=er("function"),_m=er("number"),wi=l=>l!==null&&typeof l=="object",iy=l=>l===!0||l===!1,Qs=l=>{if(Is(l)!=="object")return!1;const s=Fc(l);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(Um in l)&&!(Ws in l)},sy=l=>{if(!wi(l)||Si(l))return!1;try{return Object.keys(l).length===0&&Object.getPrototypeOf(l)===Object.prototype}catch{return!1}},ry=Kt("Date"),oy=Kt("File"),cy=Kt("Blob"),uy=Kt("FileList"),dy=l=>wi(l)&&Dt(l.pipe),fy=l=>{let s;return l&&(typeof FormData=="function"&&l instanceof FormData||Dt(l.append)&&((s=Is(l))==="formdata"||s==="object"&&Dt(l.toString)&&l.toString()==="[object FormData]"))},hy=Kt("URLSearchParams"),[my,py,gy,xy]=["ReadableStream","Request","Response","Headers"].map(Kt),vy=l=>l.trim?l.trim():l.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ei(l,s,{allOwnKeys:o=!1}={}){if(l===null||typeof l>"u")return;let c,d;if(typeof l!="object"&&(l=[l]),ml(l))for(c=0,d=l.length;c<d;c++)s.call(null,l[c],c,l);else{if(Si(l))return;const h=o?Object.getOwnPropertyNames(l):Object.keys(l),m=h.length;let f;for(c=0;c<m;c++)f=h[c],s.call(null,l[f],f,l)}}function Bm(l,s){if(Si(l))return null;s=s.toLowerCase();const o=Object.keys(l);let c=o.length,d;for(;c-- >0;)if(d=o[c],s===d.toLowerCase())return d;return null}const Na=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Lm=l=>!dl(l)&&l!==Na;function kc(){const{caseless:l,skipUndefined:s}=Lm(this)&&this||{},o={},c=(d,h)=>{const m=l&&Bm(o,h)||h;Qs(o[m])&&Qs(d)?o[m]=kc(o[m],d):Qs(d)?o[m]=kc({},d):ml(d)?o[m]=d.slice():(!s||!dl(d))&&(o[m]=d)};for(let d=0,h=arguments.length;d<h;d++)arguments[d]&&Ei(arguments[d],c);return o}const yy=(l,s,o,{allOwnKeys:c}={})=>(Ei(s,(d,h)=>{o&&Dt(d)?l[h]=Rm(d,o):l[h]=d},{allOwnKeys:c}),l),jy=l=>(l.charCodeAt(0)===65279&&(l=l.slice(1)),l),by=(l,s,o,c)=>{l.prototype=Object.create(s.prototype,c),l.prototype.constructor=l,Object.defineProperty(l,"super",{value:s.prototype}),o&&Object.assign(l.prototype,o)},Ny=(l,s,o,c)=>{let d,h,m;const f={};if(s=s||{},l==null)return s;do{for(d=Object.getOwnPropertyNames(l),h=d.length;h-- >0;)m=d[h],(!c||c(m,l,s))&&!f[m]&&(s[m]=l[m],f[m]=!0);l=o!==!1&&Fc(l)}while(l&&(!o||o(l,s))&&l!==Object.prototype);return s},Sy=(l,s,o)=>{l=String(l),(o===void 0||o>l.length)&&(o=l.length),o-=s.length;const c=l.indexOf(s,o);return c!==-1&&c===o},wy=l=>{if(!l)return null;if(ml(l))return l;let s=l.length;if(!_m(s))return null;const o=new Array(s);for(;s-- >0;)o[s]=l[s];return o},Ey=(l=>s=>l&&s instanceof l)(typeof Uint8Array<"u"&&Fc(Uint8Array)),Cy=(l,s)=>{const c=(l&&l[Ws]).call(l);let d;for(;(d=c.next())&&!d.done;){const h=d.value;s.call(l,h[0],h[1])}},Dy=(l,s)=>{let o;const c=[];for(;(o=l.exec(s))!==null;)c.push(o);return c},Ty=Kt("HTMLFormElement"),Ay=l=>l.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(o,c,d){return c.toUpperCase()+d}),Jh=(({hasOwnProperty:l})=>(s,o)=>l.call(s,o))(Object.prototype),ky=Kt("RegExp"),zm=(l,s)=>{const o=Object.getOwnPropertyDescriptors(l),c={};Ei(o,(d,h)=>{let m;(m=s(d,h,l))!==!1&&(c[h]=m||d)}),Object.defineProperties(l,c)},Ry=l=>{zm(l,(s,o)=>{if(Dt(l)&&["arguments","caller","callee"].indexOf(o)!==-1)return!1;const c=l[o];if(Dt(c)){if(s.enumerable=!1,"writable"in s){s.writable=!1;return}s.set||(s.set=()=>{throw Error("Can not rewrite read-only method '"+o+"'")})}})},Uy=(l,s)=>{const o={},c=d=>{d.forEach(h=>{o[h]=!0})};return ml(l)?c(l):c(String(l).split(s)),o},Oy=()=>{},_y=(l,s)=>l!=null&&Number.isFinite(l=+l)?l:s;function By(l){return!!(l&&Dt(l.append)&&l[Um]==="FormData"&&l[Ws])}const Ly=l=>{const s=new Array(10),o=(c,d)=>{if(wi(c)){if(s.indexOf(c)>=0)return;if(Si(c))return c;if(!("toJSON"in c)){s[d]=c;const h=ml(c)?[]:{};return Ei(c,(m,f)=>{const y=o(m,d+1);!dl(y)&&(h[f]=y)}),s[d]=void 0,h}}return c};return o(l,0)},zy=Kt("AsyncFunction"),My=l=>l&&(wi(l)||Dt(l))&&Dt(l.then)&&Dt(l.catch),Mm=((l,s)=>l?setImmediate:s?((o,c)=>(Na.addEventListener("message",({source:d,data:h})=>{d===Na&&h===o&&c.length&&c.shift()()},!1),d=>{c.push(d),Na.postMessage(o,"*")}))(`axios@${Math.random()}`,[]):o=>setTimeout(o))(typeof setImmediate=="function",Dt(Na.postMessage)),Hy=typeof queueMicrotask<"u"?queueMicrotask.bind(Na):typeof process<"u"&&process.nextTick||Mm,qy=l=>l!=null&&Dt(l[Ws]),Z={isArray:ml,isArrayBuffer:Om,isBuffer:Si,isFormData:fy,isArrayBufferView:ay,isString:ly,isNumber:_m,isBoolean:iy,isObject:wi,isPlainObject:Qs,isEmptyObject:sy,isReadableStream:my,isRequest:py,isResponse:gy,isHeaders:xy,isUndefined:dl,isDate:ry,isFile:oy,isBlob:cy,isRegExp:ky,isFunction:Dt,isStream:dy,isURLSearchParams:hy,isTypedArray:Ey,isFileList:uy,forEach:Ei,merge:kc,extend:yy,trim:vy,stripBOM:jy,inherits:by,toFlatObject:Ny,kindOf:Is,kindOfTest:Kt,endsWith:Sy,toArray:wy,forEachEntry:Cy,matchAll:Dy,isHTMLForm:Ty,hasOwnProperty:Jh,hasOwnProp:Jh,reduceDescriptors:zm,freezeMethods:Ry,toObjectSet:Uy,toCamelCase:Ay,noop:Oy,toFiniteNumber:_y,findKey:Bm,global:Na,isContextDefined:Lm,isSpecCompliantForm:By,toJSONObject:Ly,isAsyncFn:zy,isThenable:My,setImmediate:Mm,asap:Hy,isIterable:qy};function Se(l,s,o,c,d){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=l,this.name="AxiosError",s&&(this.code=s),o&&(this.config=o),c&&(this.request=c),d&&(this.response=d,this.status=d.status?d.status:null)}Z.inherits(Se,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Z.toJSONObject(this.config),code:this.code,status:this.status}}});const Hm=Se.prototype,qm={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(l=>{qm[l]={value:l}});Object.defineProperties(Se,qm);Object.defineProperty(Hm,"isAxiosError",{value:!0});Se.from=(l,s,o,c,d,h)=>{const m=Object.create(Hm);Z.toFlatObject(l,m,function(v){return v!==Error.prototype},g=>g!=="isAxiosError");const f=l&&l.message?l.message:"Error",y=s==null&&l?l.code:s;return Se.call(m,f,y,o,c,d),l&&m.cause==null&&Object.defineProperty(m,"cause",{value:l,configurable:!0}),m.name=l&&l.name||"Error",h&&Object.assign(m,h),m};const Fy=null;function Rc(l){return Z.isPlainObject(l)||Z.isArray(l)}function Fm(l){return Z.endsWith(l,"[]")?l.slice(0,-2):l}function Kh(l,s,o){return l?l.concat(s).map(function(d,h){return d=Fm(d),!o&&h?"["+d+"]":d}).join(o?".":""):s}function Yy(l){return Z.isArray(l)&&!l.some(Rc)}const Gy=Z.toFlatObject(Z,{},null,function(s){return/^is[A-Z]/.test(s)});function tr(l,s,o){if(!Z.isObject(l))throw new TypeError("target must be an object");s=s||new FormData,o=Z.toFlatObject(o,{metaTokens:!0,dots:!1,indexes:!1},!1,function(w,E){return!Z.isUndefined(E[w])});const c=o.metaTokens,d=o.visitor||v,h=o.dots,m=o.indexes,y=(o.Blob||typeof Blob<"u"&&Blob)&&Z.isSpecCompliantForm(s);if(!Z.isFunction(d))throw new TypeError("visitor must be a function");function g(N){if(N===null)return"";if(Z.isDate(N))return N.toISOString();if(Z.isBoolean(N))return N.toString();if(!y&&Z.isBlob(N))throw new Se("Blob is not supported. Use a Buffer instead.");return Z.isArrayBuffer(N)||Z.isTypedArray(N)?y&&typeof Blob=="function"?new Blob([N]):Buffer.from(N):N}function v(N,w,E){let O=N;if(N&&!E&&typeof N=="object"){if(Z.endsWith(w,"{}"))w=c?w:w.slice(0,-2),N=JSON.stringify(N);else if(Z.isArray(N)&&Yy(N)||(Z.isFileList(N)||Z.endsWith(w,"[]"))&&(O=Z.toArray(N)))return w=Fm(w),O.forEach(function(z,J){!(Z.isUndefined(z)||z===null)&&s.append(m===!0?Kh([w],J,h):m===null?w:w+"[]",g(z))}),!1}return Rc(N)?!0:(s.append(Kh(E,w,h),g(N)),!1)}const x=[],S=Object.assign(Gy,{defaultVisitor:v,convertValue:g,isVisitable:Rc});function R(N,w){if(!Z.isUndefined(N)){if(x.indexOf(N)!==-1)throw Error("Circular reference detected in "+w.join("."));x.push(N),Z.forEach(N,function(O,H){(!(Z.isUndefined(O)||O===null)&&d.call(s,O,Z.isString(H)?H.trim():H,w,S))===!0&&R(O,w?w.concat(H):[H])}),x.pop()}}if(!Z.isObject(l))throw new TypeError("data must be an object");return R(l),s}function Wh(l){const s={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(l).replace(/[!'()~]|%20|%00/g,function(c){return s[c]})}function Yc(l,s){this._pairs=[],l&&tr(l,this,s)}const Ym=Yc.prototype;Ym.append=function(s,o){this._pairs.push([s,o])};Ym.toString=function(s){const o=s?function(c){return s.call(this,c,Wh)}:Wh;return this._pairs.map(function(d){return o(d[0])+"="+o(d[1])},"").join("&")};function Py(l){return encodeURIComponent(l).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Gm(l,s,o){if(!s)return l;const c=o&&o.encode||Py;Z.isFunction(o)&&(o={serialize:o});const d=o&&o.serialize;let h;if(d?h=d(s,o):h=Z.isURLSearchParams(s)?s.toString():new Yc(s,o).toString(c),h){const m=l.indexOf("#");m!==-1&&(l=l.slice(0,m)),l+=(l.indexOf("?")===-1?"?":"&")+h}return l}class Ih{constructor(){this.handlers=[]}use(s,o,c){return this.handlers.push({fulfilled:s,rejected:o,synchronous:c?c.synchronous:!1,runWhen:c?c.runWhen:null}),this.handlers.length-1}eject(s){this.handlers[s]&&(this.handlers[s]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(s){Z.forEach(this.handlers,function(c){c!==null&&s(c)})}}const Pm={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Qy=typeof URLSearchParams<"u"?URLSearchParams:Yc,Vy=typeof FormData<"u"?FormData:null,Zy=typeof Blob<"u"?Blob:null,Xy={isBrowser:!0,classes:{URLSearchParams:Qy,FormData:Vy,Blob:Zy},protocols:["http","https","file","blob","url","data"]},Gc=typeof window<"u"&&typeof document<"u",Uc=typeof navigator=="object"&&navigator||void 0,$y=Gc&&(!Uc||["ReactNative","NativeScript","NS"].indexOf(Uc.product)<0),Jy=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Ky=Gc&&window.location.href||"http://localhost",Wy=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Gc,hasStandardBrowserEnv:$y,hasStandardBrowserWebWorkerEnv:Jy,navigator:Uc,origin:Ky},Symbol.toStringTag,{value:"Module"})),yt={...Wy,...Xy};function Iy(l,s){return tr(l,new yt.classes.URLSearchParams,{visitor:function(o,c,d,h){return yt.isNode&&Z.isBuffer(o)?(this.append(c,o.toString("base64")),!1):h.defaultVisitor.apply(this,arguments)},...s})}function ej(l){return Z.matchAll(/\w+|\[(\w*)]/g,l).map(s=>s[0]==="[]"?"":s[1]||s[0])}function tj(l){const s={},o=Object.keys(l);let c;const d=o.length;let h;for(c=0;c<d;c++)h=o[c],s[h]=l[h];return s}function Qm(l){function s(o,c,d,h){let m=o[h++];if(m==="__proto__")return!0;const f=Number.isFinite(+m),y=h>=o.length;return m=!m&&Z.isArray(d)?d.length:m,y?(Z.hasOwnProp(d,m)?d[m]=[d[m],c]:d[m]=c,!f):((!d[m]||!Z.isObject(d[m]))&&(d[m]=[]),s(o,c,d[m],h)&&Z.isArray(d[m])&&(d[m]=tj(d[m])),!f)}if(Z.isFormData(l)&&Z.isFunction(l.entries)){const o={};return Z.forEachEntry(l,(c,d)=>{s(ej(c),d,o,0)}),o}return null}function nj(l,s,o){if(Z.isString(l))try{return(s||JSON.parse)(l),Z.trim(l)}catch(c){if(c.name!=="SyntaxError")throw c}return(o||JSON.stringify)(l)}const Ci={transitional:Pm,adapter:["xhr","http","fetch"],transformRequest:[function(s,o){const c=o.getContentType()||"",d=c.indexOf("application/json")>-1,h=Z.isObject(s);if(h&&Z.isHTMLForm(s)&&(s=new FormData(s)),Z.isFormData(s))return d?JSON.stringify(Qm(s)):s;if(Z.isArrayBuffer(s)||Z.isBuffer(s)||Z.isStream(s)||Z.isFile(s)||Z.isBlob(s)||Z.isReadableStream(s))return s;if(Z.isArrayBufferView(s))return s.buffer;if(Z.isURLSearchParams(s))return o.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),s.toString();let f;if(h){if(c.indexOf("application/x-www-form-urlencoded")>-1)return Iy(s,this.formSerializer).toString();if((f=Z.isFileList(s))||c.indexOf("multipart/form-data")>-1){const y=this.env&&this.env.FormData;return tr(f?{"files[]":s}:s,y&&new y,this.formSerializer)}}return h||d?(o.setContentType("application/json",!1),nj(s)):s}],transformResponse:[function(s){const o=this.transitional||Ci.transitional,c=o&&o.forcedJSONParsing,d=this.responseType==="json";if(Z.isResponse(s)||Z.isReadableStream(s))return s;if(s&&Z.isString(s)&&(c&&!this.responseType||d)){const m=!(o&&o.silentJSONParsing)&&d;try{return JSON.parse(s,this.parseReviver)}catch(f){if(m)throw f.name==="SyntaxError"?Se.from(f,Se.ERR_BAD_RESPONSE,this,null,this.response):f}}return s}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:yt.classes.FormData,Blob:yt.classes.Blob},validateStatus:function(s){return s>=200&&s<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Z.forEach(["delete","get","head","post","put","patch"],l=>{Ci.headers[l]={}});const aj=Z.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),lj=l=>{const s={};let o,c,d;return l&&l.split(`
`).forEach(function(m){d=m.indexOf(":"),o=m.substring(0,d).trim().toLowerCase(),c=m.substring(d+1).trim(),!(!o||s[o]&&aj[o])&&(o==="set-cookie"?s[o]?s[o].push(c):s[o]=[c]:s[o]=s[o]?s[o]+", "+c:c)}),s},em=Symbol("internals");function gi(l){return l&&String(l).trim().toLowerCase()}function Vs(l){return l===!1||l==null?l:Z.isArray(l)?l.map(Vs):String(l)}function ij(l){const s=Object.create(null),o=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let c;for(;c=o.exec(l);)s[c[1]]=c[2];return s}const sj=l=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(l.trim());function wc(l,s,o,c,d){if(Z.isFunction(c))return c.call(this,s,o);if(d&&(s=o),!!Z.isString(s)){if(Z.isString(c))return s.indexOf(c)!==-1;if(Z.isRegExp(c))return c.test(s)}}function rj(l){return l.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(s,o,c)=>o.toUpperCase()+c)}function oj(l,s){const o=Z.toCamelCase(" "+s);["get","set","has"].forEach(c=>{Object.defineProperty(l,c+o,{value:function(d,h,m){return this[c].call(this,s,d,h,m)},configurable:!0})})}let Tt=class{constructor(s){s&&this.set(s)}set(s,o,c){const d=this;function h(f,y,g){const v=gi(y);if(!v)throw new Error("header name must be a non-empty string");const x=Z.findKey(d,v);(!x||d[x]===void 0||g===!0||g===void 0&&d[x]!==!1)&&(d[x||y]=Vs(f))}const m=(f,y)=>Z.forEach(f,(g,v)=>h(g,v,y));if(Z.isPlainObject(s)||s instanceof this.constructor)m(s,o);else if(Z.isString(s)&&(s=s.trim())&&!sj(s))m(lj(s),o);else if(Z.isObject(s)&&Z.isIterable(s)){let f={},y,g;for(const v of s){if(!Z.isArray(v))throw TypeError("Object iterator must return a key-value pair");f[g=v[0]]=(y=f[g])?Z.isArray(y)?[...y,v[1]]:[y,v[1]]:v[1]}m(f,o)}else s!=null&&h(o,s,c);return this}get(s,o){if(s=gi(s),s){const c=Z.findKey(this,s);if(c){const d=this[c];if(!o)return d;if(o===!0)return ij(d);if(Z.isFunction(o))return o.call(this,d,c);if(Z.isRegExp(o))return o.exec(d);throw new TypeError("parser must be boolean|regexp|function")}}}has(s,o){if(s=gi(s),s){const c=Z.findKey(this,s);return!!(c&&this[c]!==void 0&&(!o||wc(this,this[c],c,o)))}return!1}delete(s,o){const c=this;let d=!1;function h(m){if(m=gi(m),m){const f=Z.findKey(c,m);f&&(!o||wc(c,c[f],f,o))&&(delete c[f],d=!0)}}return Z.isArray(s)?s.forEach(h):h(s),d}clear(s){const o=Object.keys(this);let c=o.length,d=!1;for(;c--;){const h=o[c];(!s||wc(this,this[h],h,s,!0))&&(delete this[h],d=!0)}return d}normalize(s){const o=this,c={};return Z.forEach(this,(d,h)=>{const m=Z.findKey(c,h);if(m){o[m]=Vs(d),delete o[h];return}const f=s?rj(h):String(h).trim();f!==h&&delete o[h],o[f]=Vs(d),c[f]=!0}),this}concat(...s){return this.constructor.concat(this,...s)}toJSON(s){const o=Object.create(null);return Z.forEach(this,(c,d)=>{c!=null&&c!==!1&&(o[d]=s&&Z.isArray(c)?c.join(", "):c)}),o}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([s,o])=>s+": "+o).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(s){return s instanceof this?s:new this(s)}static concat(s,...o){const c=new this(s);return o.forEach(d=>c.set(d)),c}static accessor(s){const c=(this[em]=this[em]={accessors:{}}).accessors,d=this.prototype;function h(m){const f=gi(m);c[f]||(oj(d,m),c[f]=!0)}return Z.isArray(s)?s.forEach(h):h(s),this}};Tt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Z.reduceDescriptors(Tt.prototype,({value:l},s)=>{let o=s[0].toUpperCase()+s.slice(1);return{get:()=>l,set(c){this[o]=c}}});Z.freezeMethods(Tt);function Ec(l,s){const o=this||Ci,c=s||o,d=Tt.from(c.headers);let h=c.data;return Z.forEach(l,function(f){h=f.call(o,h,d.normalize(),s?s.status:void 0)}),d.normalize(),h}function Vm(l){return!!(l&&l.__CANCEL__)}function pl(l,s,o){Se.call(this,l??"canceled",Se.ERR_CANCELED,s,o),this.name="CanceledError"}Z.inherits(pl,Se,{__CANCEL__:!0});function Zm(l,s,o){const c=o.config.validateStatus;!o.status||!c||c(o.status)?l(o):s(new Se("Request failed with status code "+o.status,[Se.ERR_BAD_REQUEST,Se.ERR_BAD_RESPONSE][Math.floor(o.status/100)-4],o.config,o.request,o))}function cj(l){const s=/^([-+\w]{1,25})(:?\/\/|:)/.exec(l);return s&&s[1]||""}function uj(l,s){l=l||10;const o=new Array(l),c=new Array(l);let d=0,h=0,m;return s=s!==void 0?s:1e3,function(y){const g=Date.now(),v=c[h];m||(m=g),o[d]=y,c[d]=g;let x=h,S=0;for(;x!==d;)S+=o[x++],x=x%l;if(d=(d+1)%l,d===h&&(h=(h+1)%l),g-m<s)return;const R=v&&g-v;return R?Math.round(S*1e3/R):void 0}}function dj(l,s){let o=0,c=1e3/s,d,h;const m=(g,v=Date.now())=>{o=v,d=null,h&&(clearTimeout(h),h=null),l(...g)};return[(...g)=>{const v=Date.now(),x=v-o;x>=c?m(g,v):(d=g,h||(h=setTimeout(()=>{h=null,m(d)},c-x)))},()=>d&&m(d)]}const $s=(l,s,o=3)=>{let c=0;const d=uj(50,250);return dj(h=>{const m=h.loaded,f=h.lengthComputable?h.total:void 0,y=m-c,g=d(y),v=m<=f;c=m;const x={loaded:m,total:f,progress:f?m/f:void 0,bytes:y,rate:g||void 0,estimated:g&&f&&v?(f-m)/g:void 0,event:h,lengthComputable:f!=null,[s?"download":"upload"]:!0};l(x)},o)},tm=(l,s)=>{const o=l!=null;return[c=>s[0]({lengthComputable:o,total:l,loaded:c}),s[1]]},nm=l=>(...s)=>Z.asap(()=>l(...s)),fj=yt.hasStandardBrowserEnv?((l,s)=>o=>(o=new URL(o,yt.origin),l.protocol===o.protocol&&l.host===o.host&&(s||l.port===o.port)))(new URL(yt.origin),yt.navigator&&/(msie|trident)/i.test(yt.navigator.userAgent)):()=>!0,hj=yt.hasStandardBrowserEnv?{write(l,s,o,c,d,h){const m=[l+"="+encodeURIComponent(s)];Z.isNumber(o)&&m.push("expires="+new Date(o).toGMTString()),Z.isString(c)&&m.push("path="+c),Z.isString(d)&&m.push("domain="+d),h===!0&&m.push("secure"),document.cookie=m.join("; ")},read(l){const s=document.cookie.match(new RegExp("(^|;\\s*)("+l+")=([^;]*)"));return s?decodeURIComponent(s[3]):null},remove(l){this.write(l,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function mj(l){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(l)}function pj(l,s){return s?l.replace(/\/?\/$/,"")+"/"+s.replace(/^\/+/,""):l}function Xm(l,s,o){let c=!mj(s);return l&&(c||o==!1)?pj(l,s):s}const am=l=>l instanceof Tt?{...l}:l;function wa(l,s){s=s||{};const o={};function c(g,v,x,S){return Z.isPlainObject(g)&&Z.isPlainObject(v)?Z.merge.call({caseless:S},g,v):Z.isPlainObject(v)?Z.merge({},v):Z.isArray(v)?v.slice():v}function d(g,v,x,S){if(Z.isUndefined(v)){if(!Z.isUndefined(g))return c(void 0,g,x,S)}else return c(g,v,x,S)}function h(g,v){if(!Z.isUndefined(v))return c(void 0,v)}function m(g,v){if(Z.isUndefined(v)){if(!Z.isUndefined(g))return c(void 0,g)}else return c(void 0,v)}function f(g,v,x){if(x in s)return c(g,v);if(x in l)return c(void 0,g)}const y={url:h,method:h,data:h,baseURL:m,transformRequest:m,transformResponse:m,paramsSerializer:m,timeout:m,timeoutMessage:m,withCredentials:m,withXSRFToken:m,adapter:m,responseType:m,xsrfCookieName:m,xsrfHeaderName:m,onUploadProgress:m,onDownloadProgress:m,decompress:m,maxContentLength:m,maxBodyLength:m,beforeRedirect:m,transport:m,httpAgent:m,httpsAgent:m,cancelToken:m,socketPath:m,responseEncoding:m,validateStatus:f,headers:(g,v,x)=>d(am(g),am(v),x,!0)};return Z.forEach(Object.keys({...l,...s}),function(v){const x=y[v]||d,S=x(l[v],s[v],v);Z.isUndefined(S)&&x!==f||(o[v]=S)}),o}const $m=l=>{const s=wa({},l);let{data:o,withXSRFToken:c,xsrfHeaderName:d,xsrfCookieName:h,headers:m,auth:f}=s;if(s.headers=m=Tt.from(m),s.url=Gm(Xm(s.baseURL,s.url,s.allowAbsoluteUrls),l.params,l.paramsSerializer),f&&m.set("Authorization","Basic "+btoa((f.username||"")+":"+(f.password?unescape(encodeURIComponent(f.password)):""))),Z.isFormData(o)){if(yt.hasStandardBrowserEnv||yt.hasStandardBrowserWebWorkerEnv)m.setContentType(void 0);else if(Z.isFunction(o.getHeaders)){const y=o.getHeaders(),g=["content-type","content-length"];Object.entries(y).forEach(([v,x])=>{g.includes(v.toLowerCase())&&m.set(v,x)})}}if(yt.hasStandardBrowserEnv&&(c&&Z.isFunction(c)&&(c=c(s)),c||c!==!1&&fj(s.url))){const y=d&&h&&hj.read(h);y&&m.set(d,y)}return s},gj=typeof XMLHttpRequest<"u",xj=gj&&function(l){return new Promise(function(o,c){const d=$m(l);let h=d.data;const m=Tt.from(d.headers).normalize();let{responseType:f,onUploadProgress:y,onDownloadProgress:g}=d,v,x,S,R,N;function w(){R&&R(),N&&N(),d.cancelToken&&d.cancelToken.unsubscribe(v),d.signal&&d.signal.removeEventListener("abort",v)}let E=new XMLHttpRequest;E.open(d.method.toUpperCase(),d.url,!0),E.timeout=d.timeout;function O(){if(!E)return;const z=Tt.from("getAllResponseHeaders"in E&&E.getAllResponseHeaders()),W={data:!f||f==="text"||f==="json"?E.responseText:E.response,status:E.status,statusText:E.statusText,headers:z,config:l,request:E};Zm(function(k){o(k),w()},function(k){c(k),w()},W),E=null}"onloadend"in E?E.onloadend=O:E.onreadystatechange=function(){!E||E.readyState!==4||E.status===0&&!(E.responseURL&&E.responseURL.indexOf("file:")===0)||setTimeout(O)},E.onabort=function(){E&&(c(new Se("Request aborted",Se.ECONNABORTED,l,E)),E=null)},E.onerror=function(J){const W=J&&J.message?J.message:"Network Error",L=new Se(W,Se.ERR_NETWORK,l,E);L.event=J||null,c(L),E=null},E.ontimeout=function(){let J=d.timeout?"timeout of "+d.timeout+"ms exceeded":"timeout exceeded";const W=d.transitional||Pm;d.timeoutErrorMessage&&(J=d.timeoutErrorMessage),c(new Se(J,W.clarifyTimeoutError?Se.ETIMEDOUT:Se.ECONNABORTED,l,E)),E=null},h===void 0&&m.setContentType(null),"setRequestHeader"in E&&Z.forEach(m.toJSON(),function(J,W){E.setRequestHeader(W,J)}),Z.isUndefined(d.withCredentials)||(E.withCredentials=!!d.withCredentials),f&&f!=="json"&&(E.responseType=d.responseType),g&&([S,N]=$s(g,!0),E.addEventListener("progress",S)),y&&E.upload&&([x,R]=$s(y),E.upload.addEventListener("progress",x),E.upload.addEventListener("loadend",R)),(d.cancelToken||d.signal)&&(v=z=>{E&&(c(!z||z.type?new pl(null,l,E):z),E.abort(),E=null)},d.cancelToken&&d.cancelToken.subscribe(v),d.signal&&(d.signal.aborted?v():d.signal.addEventListener("abort",v)));const H=cj(d.url);if(H&&yt.protocols.indexOf(H)===-1){c(new Se("Unsupported protocol "+H+":",Se.ERR_BAD_REQUEST,l));return}E.send(h||null)})},vj=(l,s)=>{const{length:o}=l=l?l.filter(Boolean):[];if(s||o){let c=new AbortController,d;const h=function(g){if(!d){d=!0,f();const v=g instanceof Error?g:this.reason;c.abort(v instanceof Se?v:new pl(v instanceof Error?v.message:v))}};let m=s&&setTimeout(()=>{m=null,h(new Se(`timeout ${s} of ms exceeded`,Se.ETIMEDOUT))},s);const f=()=>{l&&(m&&clearTimeout(m),m=null,l.forEach(g=>{g.unsubscribe?g.unsubscribe(h):g.removeEventListener("abort",h)}),l=null)};l.forEach(g=>g.addEventListener("abort",h));const{signal:y}=c;return y.unsubscribe=()=>Z.asap(f),y}},yj=function*(l,s){let o=l.byteLength;if(o<s){yield l;return}let c=0,d;for(;c<o;)d=c+s,yield l.slice(c,d),c=d},jj=async function*(l,s){for await(const o of bj(l))yield*yj(o,s)},bj=async function*(l){if(l[Symbol.asyncIterator]){yield*l;return}const s=l.getReader();try{for(;;){const{done:o,value:c}=await s.read();if(o)break;yield c}}finally{await s.cancel()}},lm=(l,s,o,c)=>{const d=jj(l,s);let h=0,m,f=y=>{m||(m=!0,c&&c(y))};return new ReadableStream({async pull(y){try{const{done:g,value:v}=await d.next();if(g){f(),y.close();return}let x=v.byteLength;if(o){let S=h+=x;o(S)}y.enqueue(new Uint8Array(v))}catch(g){throw f(g),g}},cancel(y){return f(y),d.return()}},{highWaterMark:2})},im=64*1024,{isFunction:Ys}=Z,Nj=(({Request:l,Response:s})=>({Request:l,Response:s}))(Z.global),{ReadableStream:sm,TextEncoder:rm}=Z.global,om=(l,...s)=>{try{return!!l(...s)}catch{return!1}},Sj=l=>{l=Z.merge.call({skipUndefined:!0},Nj,l);const{fetch:s,Request:o,Response:c}=l,d=s?Ys(s):typeof fetch=="function",h=Ys(o),m=Ys(c);if(!d)return!1;const f=d&&Ys(sm),y=d&&(typeof rm=="function"?(N=>w=>N.encode(w))(new rm):async N=>new Uint8Array(await new o(N).arrayBuffer())),g=h&&f&&om(()=>{let N=!1;const w=new o(yt.origin,{body:new sm,method:"POST",get duplex(){return N=!0,"half"}}).headers.has("Content-Type");return N&&!w}),v=m&&f&&om(()=>Z.isReadableStream(new c("").body)),x={stream:v&&(N=>N.body)};d&&["text","arrayBuffer","blob","formData","stream"].forEach(N=>{!x[N]&&(x[N]=(w,E)=>{let O=w&&w[N];if(O)return O.call(w);throw new Se(`Response type '${N}' is not supported`,Se.ERR_NOT_SUPPORT,E)})});const S=async N=>{if(N==null)return 0;if(Z.isBlob(N))return N.size;if(Z.isSpecCompliantForm(N))return(await new o(yt.origin,{method:"POST",body:N}).arrayBuffer()).byteLength;if(Z.isArrayBufferView(N)||Z.isArrayBuffer(N))return N.byteLength;if(Z.isURLSearchParams(N)&&(N=N+""),Z.isString(N))return(await y(N)).byteLength},R=async(N,w)=>{const E=Z.toFiniteNumber(N.getContentLength());return E??S(w)};return async N=>{let{url:w,method:E,data:O,signal:H,cancelToken:z,timeout:J,onDownloadProgress:W,onUploadProgress:L,responseType:k,headers:P,withCredentials:U="same-origin",fetchOptions:ee}=$m(N),I=s||fetch;k=k?(k+"").toLowerCase():"text";let ce=vj([H,z&&z.toAbortSignal()],J),X=null;const oe=ce&&ce.unsubscribe&&(()=>{ce.unsubscribe()});let _;try{if(L&&g&&E!=="get"&&E!=="head"&&(_=await R(P,O))!==0){let $=new o(w,{method:"POST",body:O,duplex:"half"}),F;if(Z.isFormData(O)&&(F=$.headers.get("content-type"))&&P.setContentType(F),$.body){const[K,se]=tm(_,$s(nm(L)));O=lm($.body,im,K,se)}}Z.isString(U)||(U=U?"include":"omit");const T=h&&"credentials"in o.prototype,q={...ee,signal:ce,method:E.toUpperCase(),headers:P.normalize().toJSON(),body:O,duplex:"half",credentials:T?U:void 0};X=h&&new o(w,q);let te=await(h?I(X,ee):I(w,q));const ie=v&&(k==="stream"||k==="response");if(v&&(W||ie&&oe)){const $={};["status","statusText","headers"].forEach(ve=>{$[ve]=te[ve]});const F=Z.toFiniteNumber(te.headers.get("content-length")),[K,se]=W&&tm(F,$s(nm(W),!0))||[];te=new c(lm(te.body,im,K,()=>{se&&se(),oe&&oe()}),$)}k=k||"text";let D=await x[Z.findKey(x,k)||"text"](te,N);return!ie&&oe&&oe(),await new Promise(($,F)=>{Zm($,F,{data:D,headers:Tt.from(te.headers),status:te.status,statusText:te.statusText,config:N,request:X})})}catch(T){throw oe&&oe(),T&&T.name==="TypeError"&&/Load failed|fetch/i.test(T.message)?Object.assign(new Se("Network Error",Se.ERR_NETWORK,N,X),{cause:T.cause||T}):Se.from(T,T&&T.code,N,X)}}},wj=new Map,Jm=l=>{let s=l?l.env:{};const{fetch:o,Request:c,Response:d}=s,h=[c,d,o];let m=h.length,f=m,y,g,v=wj;for(;f--;)y=h[f],g=v.get(y),g===void 0&&v.set(y,g=f?new Map:Sj(s)),v=g;return g};Jm();const Oc={http:Fy,xhr:xj,fetch:{get:Jm}};Z.forEach(Oc,(l,s)=>{if(l){try{Object.defineProperty(l,"name",{value:s})}catch{}Object.defineProperty(l,"adapterName",{value:s})}});const cm=l=>`- ${l}`,Ej=l=>Z.isFunction(l)||l===null||l===!1,Km={getAdapter:(l,s)=>{l=Z.isArray(l)?l:[l];const{length:o}=l;let c,d;const h={};for(let m=0;m<o;m++){c=l[m];let f;if(d=c,!Ej(c)&&(d=Oc[(f=String(c)).toLowerCase()],d===void 0))throw new Se(`Unknown adapter '${f}'`);if(d&&(Z.isFunction(d)||(d=d.get(s))))break;h[f||"#"+m]=d}if(!d){const m=Object.entries(h).map(([y,g])=>`adapter ${y} `+(g===!1?"is not supported by the environment":"is not available in the build"));let f=o?m.length>1?`since :
`+m.map(cm).join(`
`):" "+cm(m[0]):"as no adapter specified";throw new Se("There is no suitable adapter to dispatch the request "+f,"ERR_NOT_SUPPORT")}return d},adapters:Oc};function Cc(l){if(l.cancelToken&&l.cancelToken.throwIfRequested(),l.signal&&l.signal.aborted)throw new pl(null,l)}function um(l){return Cc(l),l.headers=Tt.from(l.headers),l.data=Ec.call(l,l.transformRequest),["post","put","patch"].indexOf(l.method)!==-1&&l.headers.setContentType("application/x-www-form-urlencoded",!1),Km.getAdapter(l.adapter||Ci.adapter,l)(l).then(function(c){return Cc(l),c.data=Ec.call(l,l.transformResponse,c),c.headers=Tt.from(c.headers),c},function(c){return Vm(c)||(Cc(l),c&&c.response&&(c.response.data=Ec.call(l,l.transformResponse,c.response),c.response.headers=Tt.from(c.response.headers))),Promise.reject(c)})}const Wm="1.12.2",nr={};["object","boolean","number","function","string","symbol"].forEach((l,s)=>{nr[l]=function(c){return typeof c===l||"a"+(s<1?"n ":" ")+l}});const dm={};nr.transitional=function(s,o,c){function d(h,m){return"[Axios v"+Wm+"] Transitional option '"+h+"'"+m+(c?". "+c:"")}return(h,m,f)=>{if(s===!1)throw new Se(d(m," has been removed"+(o?" in "+o:"")),Se.ERR_DEPRECATED);return o&&!dm[m]&&(dm[m]=!0,console.warn(d(m," has been deprecated since v"+o+" and will be removed in the near future"))),s?s(h,m,f):!0}};nr.spelling=function(s){return(o,c)=>(console.warn(`${c} is likely a misspelling of ${s}`),!0)};function Cj(l,s,o){if(typeof l!="object")throw new Se("options must be an object",Se.ERR_BAD_OPTION_VALUE);const c=Object.keys(l);let d=c.length;for(;d-- >0;){const h=c[d],m=s[h];if(m){const f=l[h],y=f===void 0||m(f,h,l);if(y!==!0)throw new Se("option "+h+" must be "+y,Se.ERR_BAD_OPTION_VALUE);continue}if(o!==!0)throw new Se("Unknown option "+h,Se.ERR_BAD_OPTION)}}const Zs={assertOptions:Cj,validators:nr},an=Zs.validators;let Sa=class{constructor(s){this.defaults=s||{},this.interceptors={request:new Ih,response:new Ih}}async request(s,o){try{return await this._request(s,o)}catch(c){if(c instanceof Error){let d={};Error.captureStackTrace?Error.captureStackTrace(d):d=new Error;const h=d.stack?d.stack.replace(/^.+\n/,""):"";try{c.stack?h&&!String(c.stack).endsWith(h.replace(/^.+\n.+\n/,""))&&(c.stack+=`
`+h):c.stack=h}catch{}}throw c}}_request(s,o){typeof s=="string"?(o=o||{},o.url=s):o=s||{},o=wa(this.defaults,o);const{transitional:c,paramsSerializer:d,headers:h}=o;c!==void 0&&Zs.assertOptions(c,{silentJSONParsing:an.transitional(an.boolean),forcedJSONParsing:an.transitional(an.boolean),clarifyTimeoutError:an.transitional(an.boolean)},!1),d!=null&&(Z.isFunction(d)?o.paramsSerializer={serialize:d}:Zs.assertOptions(d,{encode:an.function,serialize:an.function},!0)),o.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?o.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:o.allowAbsoluteUrls=!0),Zs.assertOptions(o,{baseUrl:an.spelling("baseURL"),withXsrfToken:an.spelling("withXSRFToken")},!0),o.method=(o.method||this.defaults.method||"get").toLowerCase();let m=h&&Z.merge(h.common,h[o.method]);h&&Z.forEach(["delete","get","head","post","put","patch","common"],N=>{delete h[N]}),o.headers=Tt.concat(m,h);const f=[];let y=!0;this.interceptors.request.forEach(function(w){typeof w.runWhen=="function"&&w.runWhen(o)===!1||(y=y&&w.synchronous,f.unshift(w.fulfilled,w.rejected))});const g=[];this.interceptors.response.forEach(function(w){g.push(w.fulfilled,w.rejected)});let v,x=0,S;if(!y){const N=[um.bind(this),void 0];for(N.unshift(...f),N.push(...g),S=N.length,v=Promise.resolve(o);x<S;)v=v.then(N[x++],N[x++]);return v}S=f.length;let R=o;for(;x<S;){const N=f[x++],w=f[x++];try{R=N(R)}catch(E){w.call(this,E);break}}try{v=um.call(this,R)}catch(N){return Promise.reject(N)}for(x=0,S=g.length;x<S;)v=v.then(g[x++],g[x++]);return v}getUri(s){s=wa(this.defaults,s);const o=Xm(s.baseURL,s.url,s.allowAbsoluteUrls);return Gm(o,s.params,s.paramsSerializer)}};Z.forEach(["delete","get","head","options"],function(s){Sa.prototype[s]=function(o,c){return this.request(wa(c||{},{method:s,url:o,data:(c||{}).data}))}});Z.forEach(["post","put","patch"],function(s){function o(c){return function(h,m,f){return this.request(wa(f||{},{method:s,headers:c?{"Content-Type":"multipart/form-data"}:{},url:h,data:m}))}}Sa.prototype[s]=o(),Sa.prototype[s+"Form"]=o(!0)});let Dj=class Im{constructor(s){if(typeof s!="function")throw new TypeError("executor must be a function.");let o;this.promise=new Promise(function(h){o=h});const c=this;this.promise.then(d=>{if(!c._listeners)return;let h=c._listeners.length;for(;h-- >0;)c._listeners[h](d);c._listeners=null}),this.promise.then=d=>{let h;const m=new Promise(f=>{c.subscribe(f),h=f}).then(d);return m.cancel=function(){c.unsubscribe(h)},m},s(function(h,m,f){c.reason||(c.reason=new pl(h,m,f),o(c.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(s){if(this.reason){s(this.reason);return}this._listeners?this._listeners.push(s):this._listeners=[s]}unsubscribe(s){if(!this._listeners)return;const o=this._listeners.indexOf(s);o!==-1&&this._listeners.splice(o,1)}toAbortSignal(){const s=new AbortController,o=c=>{s.abort(c)};return this.subscribe(o),s.signal.unsubscribe=()=>this.unsubscribe(o),s.signal}static source(){let s;return{token:new Im(function(d){s=d}),cancel:s}}};function Tj(l){return function(o){return l.apply(null,o)}}function Aj(l){return Z.isObject(l)&&l.isAxiosError===!0}const _c={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(_c).forEach(([l,s])=>{_c[s]=l});function ep(l){const s=new Sa(l),o=Rm(Sa.prototype.request,s);return Z.extend(o,Sa.prototype,s,{allOwnKeys:!0}),Z.extend(o,s,null,{allOwnKeys:!0}),o.create=function(d){return ep(wa(l,d))},o}const et=ep(Ci);et.Axios=Sa;et.CanceledError=pl;et.CancelToken=Dj;et.isCancel=Vm;et.VERSION=Wm;et.toFormData=tr;et.AxiosError=Se;et.Cancel=et.CanceledError;et.all=function(s){return Promise.all(s)};et.spread=Tj;et.isAxiosError=Aj;et.mergeConfig=wa;et.AxiosHeaders=Tt;et.formToJSON=l=>Qm(Z.isHTMLForm(l)?new FormData(l):l);et.getAdapter=Km.getAdapter;et.HttpStatusCode=_c;et.default=et;const{Axios:FN,AxiosError:YN,CanceledError:GN,isCancel:PN,CancelToken:QN,VERSION:VN,all:ZN,Cancel:XN,isAxiosError:$N,spread:JN,toFormData:KN,AxiosHeaders:WN,HttpStatusCode:IN,formToJSON:eS,getAdapter:tS,mergeConfig:nS}=et,kj="/api";let sn=null;const rn=l=>{sn=l},Rj=()=>{sn=null,localStorage.removeItem("loggedlibraryUser"),window.location.href="/"},vi=et.create({baseURL:kj});vi.interceptors.response.use(l=>l,l=>{var s,o,c;if(((s=l.response)==null?void 0:s.status)===401){const d=(c=(o=l.response)==null?void 0:o.data)==null?void 0:c.error;(d==="Token expired"||d==="Token invalid"||d==="Token missing")&&Rj()}return Promise.reject(l)});const de={get:(l,s={})=>vi.get(l,{...s,headers:{...s.headers,Authorization:sn?`Bearer ${sn}`:""}}),post:(l,s,o={})=>vi.post(l,s,{...o,headers:{...o.headers,Authorization:sn?`Bearer ${sn}`:""}}),put:(l,s,o={})=>vi.put(l,s,{...o,headers:{...o.headers,Authorization:sn?`Bearer ${sn}`:""}}),delete:(l,s={})=>vi.delete(l,{...s,headers:{...s.headers,Authorization:sn?`Bearer ${sn}`:""}})},Uj=async()=>(await de.get("/students")).data,Oj=async l=>(await de.get(`/students/${l}`)).data,_j=async l=>(await de.post("/students",l)).data,Bj=async(l,s)=>(await de.put(`/students/${l}`,s)).data,Lj=async l=>(await de.delete(`/students/${l}`)).data,zj=async(l,s)=>(await de.post(`/students/${l}/wishlist`,{bookId:s})).data,Mj=async(l,s)=>(await de.delete(`/students/${l}/wishlist/${s}`)).data,Hj=async l=>(await de.get(`/students/${l}/wishlist`)).data,qj=async(l,s)=>{const o=new FormData;return o.append("profilePicture",s),(await de.post(`/students/${l}/profile-picture`,o,{headers:{"Content-Type":"multipart/form-data"}})).data},Fj=async l=>(await de.delete(`/students/${l}/profile-picture`)).data,Yj=async l=>(await de.get(`/students/${l}/profile-picture`)).data,Gj=async()=>(await de.get("/students/template")).data,Pj=async l=>(await de.post("/students/import",l)).data,Qj=async(l,s="skip")=>(await de.post("/students/import/backup",{backupData:l,duplicateHandling:s})).data,Vj=async(l={})=>{const s=new URLSearchParams(l).toString(),o=`/students/export${s?`?${s}`:""}`;return(await de.get(o)).data},Ae={setToken:rn,getAll:Uj,getById:Oj,create:_j,update:Bj,remove:Lj,addToWishlist:zj,removeFromWishlist:Mj,getWishlist:Hj,uploadProfilePicture:qj,removeProfilePicture:Fj,getProfilePictureUrl:Yj,getTemplate:Gj,importStudents:Pj,importBackup:Qj,exportStudents:Vj},Zj=({page:l=1,limit:s=18,search:o,language:c,difficulty:d,sort:h}={})=>{const m={page:l,limit:s};return o&&(m.search=o),c&&(m.language=c),d&&(m.difficulty=d),h&&(m.sort=h),de.get("/books",{params:m}).then(y=>y.data)},Xj=async l=>(await de.post("/books",l)).data,$j=async(l,s)=>(await de.put(`/books/${l}`,s)).data,Jj=async(l,s=null)=>{const o=s?{userId:s}:{};return(await de.put(`/books/${l}/lend`,o)).data},Kj=async l=>(await de.put(`/books/${l}/return`,{})).data,Wj=async l=>(await de.put(`/books/${l}/clear-history`,{})).data,Ij=async l=>(await de.delete(`/books/${l}`)).data,eb=async(l={})=>{const s=new URLSearchParams(l).toString(),o=`/books/export${s?`?${s}`:""}`;return(await de.get(o)).data},tb=async l=>(await de.post("/books/import",l)).data,nb=async()=>(await de.get("/books/languages")).data,Ze={getAll:Zj,create:Xj,update:$j,setToken:rn,lend:Jj,returnBook:Kj,clearHistory:Wj,remove:Ij,exportBooks:eb,importBooks:tb,getLanguages:nb},ab=async()=>(await de.get("/notifications")).data,lb=async(l,s)=>{const o=new FormData;return o.append("title",l.title),o.append("message",l.message),o.append("targetType",l.targetType),l.targetType==="student-specific"&&l.targetStudents&&o.append("targetStudents",JSON.stringify(l.targetStudents)),s&&o.append("attachment",s),(await de.post("/notifications",o,{headers:{"Content-Type":"multipart/form-data"}})).data},ib=async l=>(await de.delete(`/notifications/${l}`)).data,sb=async(l={})=>{const s=new URLSearchParams(l).toString(),o=`/notifications/export${s?`?${s}`:""}`;return(await de.get(o)).data},rb=async l=>(await de.post("/notifications/import",l)).data,ea={setToken:rn,getNotifications:ab,createNotification:lb,deleteNotification:ib,exportNotifications:sb,importNotifications:rb},ob=async()=>(await de.get("/event-signups")).data,cb=async l=>(await de.get(`/event-signups/${l}`)).data,ub=async l=>(await de.post("/event-signups",l)).data,db=async(l,s)=>(await de.put(`/event-signups/${l}`,s)).data,fb=async l=>(await de.delete(`/event-signups/${l}`)).data,hb=async(l,s)=>(await de.post(`/event-signups/${l}/signups`,s)).data,mb=async(l,s,o)=>(await de.put(`/event-signups/${l}/signups/${s}`,o)).data,pb=async(l,s)=>(await de.delete(`/event-signups/${l}/signups/${s}`)).data,gb=async l=>(await de.post("/event-signups/upload-ics",l,{headers:{"Content-Type":"multipart/form-data"}})).data,mt={setToken:rn,getAll:ob,getById:cb,create:ub,update:db,remove:fb,addSignup:hb,updateSignup:mb,removeSignup:pb,uploadIcs:gb},xi=new Map,ar=l=>{const[s,o]=b.useState(null),[c,d]=b.useState(!1),[h,m]=b.useState(null),f=b.useCallback(async()=>{var S,R,N,w;if(!l){o(null);return}const v=`student-${l}`,x=xi.get(v);if(x&&new Date(x.expiresAt)>new Date(Date.now()+300*1e3)){o(x.url);return}d(!0),m(null);try{const E=await Ae.getProfilePictureUrl(l);xi.set(v,{url:E.url,expiresAt:E.expiresAt,fetchedAt:new Date().toISOString()}),o(E.url)}catch(E){o(null),(N=(R=(S=E.response)==null?void 0:S.data)==null?void 0:R.error)!=null&&N.includes("legacy storage")?m("legacy_storage"):((w=E.response)==null?void 0:w.status)===404?m("not_found"):m("fetch_failed"),xi.delete(v)}finally{d(!1)}},[l]);b.useEffect(()=>{f()},[f]);const y=b.useCallback(()=>{l&&(xi.delete(`student-${l}`),f())},[l,f]),g=b.useCallback(()=>{l&&(xi.delete(`student-${l}`),o(null))},[l]);return{imageUrl:s,loading:c,error:h,refreshUrl:y,clearUrl:g}},xb=async l=>(await de.get(`/dashboards/${l}`)).data,vb=async(l,s)=>(await de.put(`/dashboards/${l}`,s)).data,yb=async(l,s)=>{const o=new FormData;return o.append("portfolio",s),(await de.post(`/dashboards/${l}/portfolios`,o,{headers:{"Content-Type":"multipart/form-data"}})).data},jb=async(l,s,o)=>{const c=new FormData;return c.append("document",s),c.append("name",o),(await de.post(`/dashboards/${l}/documents`,c,{headers:{"Content-Type":"multipart/form-data"}})).data},bb=async(l,s)=>(await de.delete(`/dashboards/${l}/documents/${s}`)).data,Nb=async(l,s)=>(await de.post(`/dashboards/${l}/history`,s)).data,Sb=async(l,s)=>(await de.delete(`/dashboards/${l}/history/${s}`)).data,wb=async(l,s)=>(await de.delete(`/dashboards/${l}/portfolios/${s}`)).data,Eb=async(l,s,o)=>{const c=new FormData;return c.append("portfolio",o),(await de.put(`/dashboards/${l}/portfolios/${s}`,c,{headers:{"Content-Type":"multipart/form-data"}})).data},Cb=async(l,s,o)=>{const c=new FormData;return c.append("receiptFile",o),(await de.post(`/dashboards/${l}/history/${s}/receipt`,c,{headers:{"Content-Type":"multipart/form-data"}})).data},Db=async(l,s)=>(await de.delete(`/dashboards/${l}/history/${s}/receipt`)).data,Tb=async(l,s)=>(await de.get(`/dashboards/${l}/portfolios/${s}/url`)).data.url,Ab=(l,s)=>{const o=localStorage.getItem("loggedlibraryUser"),c=o?JSON.parse(o).token:null;return c?`/api/dashboards/${l}/portfolios/${s}/view?token=${encodeURIComponent(c)}`:`/api/dashboards/${l}/portfolios/${s}/view`},kb=async(l,s)=>(await de.get(`/dashboards/${l}/documents/${s}/url`)).data.url,Rb=async(l,s)=>(await de.get(`/dashboards/${l}/history/${s}/receipt/url`)).data.url,Fe={setToken:rn,getByStudentId:xb,update:vb,uploadPortfolio:yb,removePortfolio:wb,replacePortfolio:Eb,addDocument:jb,removeDocument:bb,addHistoryEvent:Nb,removeHistoryEvent:Sb,uploadInvoiceFile:Cb,deleteInvoiceFile:Db,getSecurePortfolioUrl:Tb,getPortfolioViewUrl:Ab,getSecureDocumentUrl:kb,getSecureInvoiceUrl:Rb},Ub=({student:l,user:s})=>{const o=ta(),[c,d]=b.useState(null),[h,m]=b.useState([]),[f,y]=b.useState(!0),{imageUrl:g,loading:v}=ar(l!=null&&l.profilePicture?l.id||l._id:null),x=(s==null?void 0:s.role)==="tutor";b.useEffect(()=>{const U=async()=>{try{y(!0),Fe.setToken(s.token),Ae.setToken(s.token);const[ee,I]=await Promise.all([Fe.getByStudentId(l.id||l._id),Ae.getWishlist(l.id||l._id)]);d(ee),m(I)}catch{}finally{y(!1)}};l&&(s!=null&&s.token)&&U()},[l,s]);const S=U=>c!=null&&c.history?c.history.filter(ee=>ee.type===U).sort((ee,I)=>new Date(I.date)-new Date(ee.date))[0]:null,R=()=>c!=null&&c.portfolios?c.portfolios.sort((U,ee)=>new Date(ee.uploadDate)-new Date(U.uploadDate))[0]:null,N=U=>U?new Date(U).toLocaleDateString("en-US",{year:"numeric",month:"long"}):"Never",w=()=>{if(!l.dateOfBirth)return null;const U=new Date(l.dateOfBirth),ee=new Date;let I=ee.getFullYear()-U.getFullYear();const ce=ee.getMonth()-U.getMonth();return(ce<0||ce===0&&ee.getDate()<U.getDate())&&I--,I>0?`${I} years`:null},E=()=>{if(x)return null;const U=l.pricing||"Not set",ee=l.discount&&l.discount!=="None"?` (${l.discount})`:"";return`${U}${ee}`},O=()=>{if(!l.enrollmentStartDate||!l.enrollmentLength)return"Not set";const U=l.enrollmentLength.toLowerCase();if(U.includes("multiple years"))return"Ongoing";const ee=new Date(l.enrollmentStartDate);let I=0;const ce=U.match(/(\d+)\s*(year|month)/i);if(!ce)return"Not set";const X=parseInt(ce[1]),oe=ce[2].toLowerCase();if(oe.startsWith("year"))I=X*12;else if(oe.startsWith("month"))I=X;else return"Not set";const _=new Date(ee);return _.setMonth(_.getMonth()+I),_.toLocaleDateString("en-US",{year:"numeric",month:"long"})},H=()=>{const U=[];return l.behavioralChallenges&&U.push("Behavioral Challenges"),l.learningDifferences&&U.push("Learning Differences"),l.physicalLimitations&&U.push("Physical Limitations"),l.healthConditions&&U.push("Health Conditions"),l.dailyMedication&&U.push("Daily Medication"),l.medicalTreatments&&U.push("Medical Treatments"),l.allergies&&U.push("Allergies"),l.lifeThreatening&&U.push("Life Threatening Conditions"),U.length>0?U.join(", "):null},z=S("receipt"),J=S("donation_receipt"),W=R(),L=()=>{o(`/dashboard/${l.id||l._id}`)},k=async(U,ee)=>{ee.stopPropagation();try{if(U.pdfUrl&&U.pdfUrl.includes("cloudinary.com")){window.open(U.pdfUrl,"_blank");return}const I=await Fe.getSecurePortfolioUrl(l.id||l._id,U.id||U._id),ce=document.createElement("a");ce.href=I,ce.target="_blank",ce.setAttribute("download",U.fileName||"portfolio.pdf"),document.body.appendChild(ce),ce.click(),document.body.removeChild(ce)}catch{window.open(`/api/files/${U.filename}`,"_blank")}},P=U=>{o("/library",{state:{searchTerm:U.title}})};return f?n.jsx("div",{className:"landing-page-card loading",children:n.jsx("div",{className:"loading",children:"Loading..."})}):n.jsxs("div",{className:"landing-page-card",children:[n.jsxs("div",{className:"card-header",children:[n.jsx("div",{className:"student-avatar-container",children:l.profilePicture&&(g||x&&l.profilePicture)?n.jsx("img",{src:g||l.profilePicture,alt:`${l.firstName} ${l.lastName}`,className:"student-avatar student-avatar-small"}):v?n.jsx("div",{className:"student-avatar student-avatar-small placeholder",children:n.jsx("div",{className:"loading",children:"..."})}):n.jsx("div",{className:"student-avatar student-avatar-small placeholder",children:n.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),n.jsx("circle",{cx:"12",cy:"7",r:"4"})]})})}),n.jsxs("div",{className:"student-info",children:[n.jsxs("h3",{className:"student-name",children:[l.firstName," ",l.lastName]}),n.jsxs("div",{className:"student-info-details",children:[l.gender&&n.jsx("p",{className:"student-info-detail",children:l.gender}),w()&&n.jsx("p",{className:"student-info-detail",children:w()}),l.nationality&&n.jsx("p",{className:"student-info-detail",children:l.nationality})]})]})]}),n.jsxs("div",{className:"card-content",children:[n.jsxs("div",{className:"card-top-section",children:[n.jsx("div",{className:"card-left-column",children:n.jsxs("div",{className:"card-section",children:[n.jsx("h4",{children:"Enrollment Information"}),n.jsxs("div",{className:"info-grid",children:[n.jsxs("div",{className:"info-item info-2c",children:[n.jsx("span",{className:"label",children:"Enrollment:"}),n.jsxs("span",{className:"value",children:[l.enrollmentLength,", ",l.weekdayAttendance,n.jsx("p",{className:"student-enrollment",children:l.enrollmentStartDate?n.jsxs(n.Fragment,{children:["From",N(l.enrollmentStartDate),O()!=="Not set"&&O()!=="Ongoing"&&n.jsxs(n.Fragment,{children:["to",O()]})]}):"Not set"})]})]}),!x&&n.jsxs("div",{className:"info-item info-2c",children:[n.jsx("span",{className:"label",children:"Pricing:"}),n.jsx("span",{className:"value",children:E()})]}),n.jsxs("div",{className:"info-item info-2c",children:[n.jsx("span",{className:"label",children:"Curriculum:"}),n.jsx("span",{className:"value",children:l.approach&&l.curriculum&&l.curriculumSupplier?`${l.approach} - ${l.curriculum} with ${l.curriculumSupplier}`:l.curriculum&&l.curriculumSupplier?`${l.curriculum} with ${l.curriculumSupplier}`:l.approach&&l.curriculum?`${l.approach} - ${l.curriculum}`:l.curriculum||"Not set"})]}),l.curriculumNotes&&n.jsxs("div",{className:"info-item info-2c",children:[n.jsx("span",{className:"label",children:"Curriculum Notes:"}),n.jsx("span",{className:"value",children:l.curriculumNotes})]})]})]})}),n.jsx("div",{className:"card-right-column",children:n.jsxs("div",{className:"card-section",children:[n.jsx("h4",{children:"Languages & Skills"}),n.jsxs("div",{className:"info-grid",children:[n.jsxs("div",{className:"info-item",children:[n.jsx("span",{className:"label",children:"First Language:"}),n.jsx("span",{className:"value",children:l.firstLanguage||"Not set"})]}),n.jsxs("div",{className:"info-item",children:[n.jsx("span",{className:"label",children:"English Level:"}),n.jsx("span",{className:"value",children:l.englishProficiency||"Not set"})]}),n.jsxs("div",{className:"info-item",children:[n.jsx("span",{className:"label",children:"Portuguese Level:"}),n.jsx("span",{className:"value",children:l.portugueseLevel||"Not set"})]}),n.jsxs("div",{className:"info-item",children:[n.jsx("span",{className:"label",children:"Struggling Subjects:"}),n.jsx("span",{className:"value",children:l.strugglingSubjects||"Not set"})]}),l.skillsHobbies&&n.jsxs("div",{className:"info-item info-2c",children:[n.jsx("span",{className:"label",children:"Skills & Hobbies:"}),n.jsx("span",{className:"value",children:l.skillsHobbies})]})]})]})})]}),(H()||l.specialNeedsDetails||l.medicalDetails)&&n.jsxs("div",{className:"card-section",children:[n.jsx("h4",{children:"Health & Special Needs"}),n.jsxs("div",{className:"info-grid",children:[H()&&n.jsxs("div",{className:"info-item info-2c",children:[n.jsx("span",{className:"label",children:"Health & Special Needs:"}),n.jsx("span",{className:"value",children:H()})]}),l.specialNeedsDetails&&n.jsxs("div",{className:"info-item info-2c",children:[n.jsx("span",{className:"label",children:"Special Needs Details:"}),n.jsx("span",{className:"value",children:l.specialNeedsDetails})]}),l.medicalDetails&&n.jsxs("div",{className:"info-item info-2c",children:[n.jsx("span",{className:"label",children:"Medical Details:"}),n.jsx("span",{className:"value",children:l.medicalDetails})]})]})]}),n.jsxs("div",{className:"card-middle-section",children:[n.jsxs("div",{className:"card-middle-left",children:[!x&&(z||J)&&n.jsxs("div",{className:"card-section",children:[n.jsx("h4",{children:"Recent Invoices"}),n.jsxs("div",{className:"documents-list",children:[z&&n.jsxs("div",{className:`document-item ${z.downloadUrl?"clickable":""}`,onClick:z.downloadUrl?()=>window.open(z.downloadUrl,"_blank"):void 0,children:[n.jsxs("span",{className:"document-type",children:[" Invoice ",z.month,"/",z.year]}),z.downloadUrl&&n.jsx("span",{className:"clickable-text",onClick:U=>{U.stopPropagation(),window.open(z.downloadUrl,"_blank")},children:"Download"})]}),J&&n.jsxs("div",{className:`document-item ${J.downloadUrl?"clickable":""}`,onClick:J.downloadUrl?()=>window.open(J.downloadUrl,"_blank"):void 0,children:[n.jsxs("span",{className:"document-type",children:[" Donation ",new Date(J.date).toLocaleDateString("de-DE",{year:"numeric",month:"2-digit",day:"2-digit"})]}),J.downloadUrl&&n.jsx("span",{className:"clickable-text",onClick:U=>{U.stopPropagation(),window.open(J.downloadUrl,"_blank")},children:"Download"})]})]})]}),(x||!z&&!J)&&W&&n.jsxs("div",{className:"card-section",children:[n.jsx("h4",{children:"Recent Portfolio"}),n.jsx("div",{className:"portfolios-list",children:n.jsxs("div",{className:"document-item clickable",onClick:U=>k(W,U),children:[n.jsxs("span",{className:"document-type",children:[" ",new Date(W.uploadDate).toLocaleDateString("de-DE",{year:"numeric",month:"2-digit",day:"2-digit"})]}),n.jsx("span",{className:"clickable-text",onClick:U=>{U.stopPropagation(),k(W,U)},children:"Download"})]})})]})]}),n.jsx("div",{className:"card-middle-right",children:!x&&(z||J)&&W&&n.jsxs("div",{className:"card-section",children:[n.jsx("h4",{children:"Recent Portfolio"}),n.jsx("div",{className:"portfolios-list",children:n.jsxs("div",{className:"document-item clickable",onClick:U=>k(W,U),children:[n.jsxs("span",{className:"document-type",children:[" ",new Date(W.uploadDate).toLocaleDateString("de-DE",{year:"numeric",month:"2-digit",day:"2-digit"})]}),n.jsx("span",{className:"clickable-text",onClick:U=>{U.stopPropagation(),k(W,U)},children:"Download"})]})})]})})]}),h.length>0&&n.jsxs("div",{className:"card-section",children:[n.jsx("h4",{children:"Book Wishlist"}),n.jsx("div",{className:"wishlist-books-horizontal",children:n.jsxs("div",{className:"books-row",children:[h.slice(0,6).map(U=>{var ee,I,ce,X;return n.jsxs("div",{className:"wishlist-book-card clickable-book-card",onClick:()=>P(U.bookId),children:[n.jsx("div",{className:"book-cover-container",children:n.jsx("img",{src:((ee=U.bookId)==null?void 0:ee.url)||"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTAFBy_9Wwc7vUhLMgzzACgvfPcWQOw297s2Q&s",alt:((I=U.bookId)==null?void 0:I.title)||"Unknown Title",className:"book-cover-mini",onError:oe=>{oe.target.src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTAFBy_9Wwc7vUhLMgzzACgvfPcWQOw297s2Q&s"}})}),n.jsxs("div",{className:"book-info-mini",children:[n.jsx("span",{className:"book-title-mini",children:((ce=U.bookId)==null?void 0:ce.title)||"Unknown Title"}),n.jsxs("span",{className:"book-author-mini",children:["by ",((X=U.bookId)==null?void 0:X.author)||"Unknown Author"]})]})]},U._id||U.id)}),h.length>6&&n.jsx("div",{className:"wishlist-book-card more-books-card",children:n.jsxs("div",{className:"more-books-content",children:[n.jsxs("span",{className:"more-books-number",children:["+",h.length-6]}),n.jsxs("span",{className:"more-books-text",children:["more book",h.length-6!==1?"s":""]})]})})]})})]})]}),n.jsxs("div",{className:"card-footer",children:[n.jsx("button",{className:"small-btn",onClick:L,children:"Dashboard"}),n.jsxs("div",{className:"studentdata-buttons",children:[n.jsx("button",{className:"unbuttoned small-btn",onClick:()=>o("/students",{state:{selectedStudent:l,mode:"view"}}),children:"View"}),n.jsx("button",{className:"unbuttoned small-btn",onClick:()=>o("/students",{state:{selectedStudent:l,mode:"edit"}}),children:"Edit"})]})]})]})},Ob=({notifications:l,user:s,onNotificationDeleted:o,showMessage:c})=>{const[d,h]=b.useState(null),[m,f]=b.useState(3),y=(s==null?void 0:s.role)==="admin"||(s==null?void 0:s.role)==="tutor",g=async E=>{var O,H;if(window.confirm("Are you sure you want to delete this notification?"))try{h(E),await ea.deleteNotification(E),o(E),c("Notification deleted successfully")}catch(z){c(((H=(O=z.response)==null?void 0:O.data)==null?void 0:H.error)||"Failed to delete notification","error")}finally{h(null)}},v=E=>{E.attachmentUrl&&window.open(E.attachmentUrl,"_blank")},x=E=>new Date(E).toLocaleDateString("de-DE",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),S=()=>{f(E=>E+3)},R=E=>(s==null?void 0:s.role)==="admin"||String(E.createdBy._id||E.createdBy.id||E.createdBy).trim()===String(s==null?void 0:s.id).trim();if(!l||l.length===0)return n.jsx("div",{className:"empty-state",children:n.jsx("p",{children:"No notifications yet."})});const N=l.slice(0,m),w=l.length>m;return n.jsxs("div",{className:"notifications-list",children:[N.map(E=>{var O,H;return n.jsxs("div",{className:"notification-item",children:[R(E)&&n.jsx("button",{className:"notification-delete-btn",onClick:()=>g(E._id),disabled:d===E._id,title:"Delete notification",children:d===E._id?"":""}),n.jsxs("div",{className:"notification-header",children:[n.jsx("h4",{className:"notification-title",children:E.title}),n.jsxs("div",{className:"notification-meta",children:[n.jsx("span",{className:"notification-date",children:x(E.createdAt)}),n.jsxs("span",{className:"notification-author",children:["by ",((O=E.createdBy)==null?void 0:O.username)||"Unknown User"]})]})]}),n.jsxs("div",{className:"notification-content",children:[n.jsx("p",{className:"notification-message",children:E.message}),y&&E.targetType==="student-specific"&&((H=E.targetStudents)==null?void 0:H.length)>0&&n.jsxs("div",{className:"notification-targets",children:[n.jsx("strong",{children:"Target Students: "}),E.targetStudents.map(z=>`${z.firstName} ${z.lastName}`).join(", ")]}),y&&E.targetType==="public"&&n.jsxs("div",{className:"notification-targets",children:[n.jsx("strong",{children:"Visibility: "}),"Public (all users)"]}),E.attachmentUrl&&n.jsxs("div",{className:"notification-attachment",children:[n.jsxs("span",{children:[n.jsx("strong",{children:"Attachment:"})," ",E.attachmentFileName]}),n.jsx("button",{className:"small-btn outlined",onClick:()=>v(E),title:`Download ${E.attachmentFileName}`,children:"Download"})]})]})]},E._id)}),w&&n.jsx("div",{className:"load-more-container",children:n.jsx("button",{className:"outlined",onClick:S,children:"Load More"})})]})},_b=({show:l,onClose:s,onNotificationCreated:o,showMessage:c,user:d})=>{const[h,m]=b.useState(!1),[f,y]=b.useState([]),[g,v]=b.useState(!1),[x,S]=b.useState({title:"",message:"",targetType:"public",targetStudents:[]}),R=b.useCallback(async()=>{try{v(!0),Ae.setToken(d.token);const H=await Ae.getAll();y(H)}catch{c("Failed to load students","error")}finally{v(!1)}},[d.token,c]);b.useEffect(()=>{l&&R()},[l,R]);const N=async H=>{var J,W,L,k;if(H.preventDefault(),!x.title.trim()||!x.message.trim()){c("Title and message are required","error");return}if(x.targetType==="student-specific"&&x.targetStudents.length===0){c("Please select at least one target student","error");return}const z=(W=(J=H.target.attachment)==null?void 0:J.files)==null?void 0:W[0];try{m(!0);const P=await ea.createNotification(x,z);o(P),c("Notification created successfully"),s(),S({title:"",message:"",targetType:"public",targetStudents:[]})}catch(P){c(((k=(L=P.response)==null?void 0:L.data)==null?void 0:k.error)||"Failed to create notification","error")}finally{m(!1)}},w=(H,z)=>{S(J=>({...J,[H]:z}))},E=H=>{S(z=>({...z,targetStudents:z.targetStudents.includes(H)?z.targetStudents.filter(J=>J!==H):[...z.targetStudents,H]}))},O=H=>{S(z=>({...z,targetType:H,targetStudents:H==="public"?[]:z.targetStudents}))};return l?jt.createPortal(n.jsx("div",{className:"form-popup-overlay",children:n.jsxs("div",{className:"form-popup",onClick:H=>H.stopPropagation(),children:[n.jsxs("div",{className:"popup-header",children:[n.jsx("h3",{children:"Create Notification"}),n.jsx("button",{className:"close-btn",onClick:s,children:""})]}),n.jsx("div",{className:"history-content",children:n.jsxs("form",{onSubmit:N,children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"title",children:"Title:"}),n.jsx("input",{type:"text",id:"title",value:x.title,onChange:H=>w("title",H.target.value),placeholder:"e.g., Important Announcement, Event Reminder",required:!0,maxLength:"200"})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"message",children:"Message:"}),n.jsx("textarea",{id:"message",value:x.message,onChange:H=>w("message",H.target.value),placeholder:"Enter your notification message here...",rows:"4",required:!0,maxLength:"2000"})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Target Audience:"}),n.jsxs("div",{className:"radio-group",children:[n.jsxs("label",{className:"radio-option",children:[n.jsx("input",{type:"radio",name:"targetType",value:"public",checked:x.targetType==="public",onChange:H=>O(H.target.value)}),"Public (visible to all users)"]}),n.jsxs("label",{className:"radio-option",children:[n.jsx("input",{type:"radio",name:"targetType",value:"student-specific",checked:x.targetType==="student-specific",onChange:H=>O(H.target.value)}),"Specific Students"]})]})]}),x.targetType==="student-specific"&&n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Select Target Students:"}),g?n.jsx("div",{className:"loading",children:"Loading students..."}):n.jsx("div",{className:"students-selection",children:f.length===0?n.jsx("p",{children:"No students available"}):n.jsx("div",{className:"students-checkboxes",children:f.map(H=>n.jsxs("label",{className:"checkbox-option",children:[n.jsx("input",{type:"checkbox",checked:x.targetStudents.includes(H.id||H._id),onChange:()=>E(H.id||H._id)}),H.firstName," ",H.lastName]},H.id||H._id))})})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"attachment",children:"Attachment (Optional):"}),n.jsx("input",{type:"file",id:"attachment",name:"attachment",accept:".pdf,.doc,.docx,.jpg,.jpeg,.png"}),n.jsx("small",{children:"Accepted formats: PDF, DOC, DOCX, JPG, PNG (Max: 10MB)"})]}),n.jsxs("div",{className:"form-actions",children:[n.jsx("button",{type:"submit",disabled:h,children:h?"Creating...":"Create Notification"}),n.jsx("button",{type:"button",onClick:s,className:"outlined",children:"Cancel"})]})]})})]})}),document.body):null},tp=({isOpen:l,onClose:s,onSubmit:o,event:c,existingSignup:d=null,isLoading:h=!1})=>{var S;const[m,f]=b.useState(""),[y,g]=b.useState("");b.useEffect(()=>{l&&(d?(f(d.responsibility||""),g(d.notes||"")):(f(""),g("")))},[l,d]);const v=async R=>{R.preventDefault();const N={responsibility:m.trim(),notes:y.trim()};try{await o(N),s()}catch{}},x=()=>{h||s()};return l?jt.createPortal(n.jsx("div",{className:"modal-overlay",children:n.jsxs("div",{className:"modal-content",onClick:R=>R.stopPropagation(),children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h3",{children:d?"Edit Signup":"Sign Up for Event"}),n.jsx("button",{className:"close-button",onClick:x,disabled:h,children:""})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"event-info",children:[n.jsx("h4",{children:c==null?void 0:c.eventTitle}),n.jsx("p",{className:"event-date",children:new Date(c==null?void 0:c.eventDate).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}),(c==null?void 0:c.eventDescription)&&n.jsx("p",{className:"event-description",children:c.eventDescription}),(c==null?void 0:c.maxSignups)&&n.jsxs("p",{className:"signup-count",children:[((S=c.signups)==null?void 0:S.length)||0," / ",c.maxSignups," signups"]})]}),n.jsxs("form",{onSubmit:v,className:"signup-form",children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"responsibility",children:"How many will attend?"}),n.jsx("input",{type:"text",id:"responsibility",value:m,onChange:R=>f(R.target.value),placeholder:"How many will attend?",maxLength:200,disabled:h})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"notes",children:"Additional Notes"}),n.jsx("textarea",{id:"notes",value:y,onChange:R=>g(R.target.value),placeholder:"Any additional information or notes...",maxLength:500,rows:3,disabled:h}),n.jsxs("span",{className:"char-count",children:[y.length,"/500"]})]}),n.jsxs("div",{className:"form-actions",children:[n.jsxs("button",{type:"submit",disabled:h,children:[h&&n.jsx("span",{className:"loading",style:{marginRight:"8px"}}),h?"Saving...":d?"Update Signup":"Sign Up"]}),n.jsx("button",{type:"button",onClick:x,disabled:h,children:"Cancel"})]})]})]})]})}),document.body):null},Bb=({user:l,setMessage:s,setClassName:o,handleLogin:c,username:d,setUsername:h,password:m,setPassword:f,rememberMe:y,setRememberMe:g})=>{const v=ta(),[x,S]=b.useState([]),[R,N]=b.useState([]),[w,E]=b.useState([]),[O,H]=b.useState(!1),[z,J]=b.useState(!1),[W,L]=b.useState(!1),[k,P]=b.useState(!1),[U,ee]=b.useState([]),[I,ce]=b.useState(!1),[X,oe]=b.useState(!1),[_,T]=b.useState(null),q=b.useCallback(async()=>{if(l!=null&&l.token)try{H(!0),Ae.setToken(l.token);const fe=await Ae.getAll();S(fe)}catch{s("Error fetching students"),o("error"),setTimeout(()=>s(null),5e3)}finally{H(!1)}},[l,s,o]),te=b.useCallback(async()=>{if(l!=null&&l.token)try{J(!0),Ze.setToken(l.token);const fe=await Ze.getAll(),C=((fe==null?void 0:fe.books)||[]).filter(ue=>{var he,ke;return((he=ue.lending)==null?void 0:he.isLent)&&((ke=ue.lending)==null?void 0:ke.borrower)&&String(ue.lending.borrower._id||ue.lending.borrower.id||ue.lending.borrower).trim()===String(l.id).trim()});N(C)}catch{}finally{J(!1)}},[l]),ie=b.useCallback(async()=>{if(l!=null&&l.token)try{L(!0),ea.setToken(l.token);const fe=await ea.getNotifications();E(fe||[])}catch{s("Error fetching notifications"),o("error"),setTimeout(()=>s(null),5e3)}finally{L(!1)}},[l,s,o]),D=b.useCallback(async()=>{if(l!=null&&l.token)try{ce(!0),mt.setToken(l.token);const fe=await mt.getAll(),ge=new Date,C=fe.filter(ue=>new Date(ue.eventDate)>=ge&&ue.isActive).sort((ue,he)=>new Date(ue.eventDate)-new Date(he.eventDate)).slice(0,2);ee(C)}catch{}finally{ce(!1)}},[l]);b.useEffect(()=>{l!=null&&l.token&&(q(),te(),ie(),D())},[l,q,te,ie,D]);const $=fe=>{E(ge=>[fe,...ge])},F=fe=>{E(ge=>ge.filter(C=>C._id!==fe))},K=async fe=>{var ge,C;try{await Ze.returnBook(fe),s("Book returned successfully"),o("success"),setTimeout(()=>s(null),5e3),te()}catch(ue){s(((C=(ge=ue.response)==null?void 0:ge.data)==null?void 0:C.error)||"Failed to return book"),o("error"),setTimeout(()=>s(null),5e3)}},se=fe=>{v("/library",{state:{searchTerm:fe.title}})},ve=(l==null?void 0:l.role)==="admin",me=(l==null?void 0:l.role)==="tutor",Pe=ve||me;if(!l)return n.jsx("div",{className:"landing-page",children:n.jsxs("div",{className:"landing-welcome",children:[n.jsxs("div",{className:"welcome-header",children:[n.jsx("h1",{children:"Welcome to Campus da Terra"}),n.jsx("p",{children:n.jsx("strong",{children:"Please login to access our student management portal for parents and tutors."})}),n.jsx("p",{children:"Access student profiles, our library, view enrollment details, sign up for events and stay connected with your students' educational journey."})]}),n.jsx("div",{className:"welcome-card",children:n.jsx(Ac,{handleLogin:c,username:d,setUsername:h,password:m,setPassword:f,rememberMe:y,setRememberMe:g})})]})});const be=l.role==="admin"||l.role==="tutor"?x:x.filter(fe=>fe.userId&&fe.userId.toString()===l.id.toString()),Ke=!ve&&!me;return n.jsxs("div",{className:"landing-page",children:[n.jsx("div",{className:"landing-header",children:n.jsxs("h1",{children:[ve&&"Admin Dashboard",me&&"Tutor Dashboard",Ke&&"Parent Dashboard"]})}),n.jsxs("div",{className:"landing-content",children:[n.jsxs("div",{className:"dashboard-section",children:[n.jsxs("div",{className:"section-header",children:[n.jsx("h2",{children:"Notifications"}),Pe&&n.jsx("button",{className:"section-action-btn",onClick:()=>P(!0),children:"Create Notification"})]}),n.jsx("div",{className:"section-content",children:W?n.jsx("div",{className:"loading",children:"Loading notifications..."}):n.jsx(Ob,{notifications:w,user:l,onNotificationDeleted:F,showMessage:(fe,ge="success")=>{s(fe),o(ge),setTimeout(()=>s(null),5e3)}})})]}),(I||U.length>0)&&n.jsxs("div",{className:"dashboard-section",children:[n.jsxs("div",{className:"section-header",children:[n.jsx("h2",{children:"Next Events"}),U.length>=2&&n.jsx("button",{className:"section-action-btn",onClick:()=>v("/calendar#events-signup-section"),children:"View More"})]}),n.jsx("div",{className:"section-content",children:I?n.jsx("div",{className:"loading",children:"Loading events..."}):U.length>0?n.jsx("div",{className:"next-events-grid",children:U.map(fe=>{var ke,Oe,at,Mt;const ge=new Date(fe.eventDate),C=ge.toDateString()===new Date().toDateString(),ue=ge.getTime()-new Date().getTime()<10080*60*1e3,he=(ke=fe.signups)==null?void 0:ke.find(Ea=>{var na,Di;return(((na=Ea.userId)==null?void 0:na.id)||((Di=Ea.userId)==null?void 0:Di._id)||Ea.userId)===l.id});return n.jsxs("div",{className:"event-card",children:[n.jsxs("div",{className:"event-card-header",children:[n.jsx("h4",{className:"event-card-title",children:fe.eventTitle}),n.jsxs("p",{className:"event-card-date",children:[ge.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),C&&n.jsx("span",{className:"date-badge today",children:"Today"}),!C&&ue&&n.jsx("span",{className:"date-badge this-week",children:"This Week"})]})]}),fe.eventDescription&&n.jsx("p",{className:"event-card-description",children:fe.eventDescription}),n.jsxs("div",{className:"event-card-actions",children:[he?n.jsx("button",{className:"small-btn outlined",onClick:async()=>{try{mt.setToken(l.token),await mt.removeSignup(fe._id,he._id),D(),s("Successfully removed signup!"),o("success"),setTimeout(()=>s(null),5e3)}catch{s("Error removing signup. Please try again."),o("error"),setTimeout(()=>s(null),5e3)}},children:"Remove Sign Up"}):n.jsx("button",{className:"small-btn outlined",onClick:()=>{T(fe),oe(!0)},disabled:fe.maxSignups&&((Oe=fe.signups)==null?void 0:Oe.length)>=fe.maxSignups,children:fe.maxSignups&&((at=fe.signups)==null?void 0:at.length)>=fe.maxSignups?"Full":"Sign Up"}),n.jsx("div",{className:"event-card-stats",children:n.jsxs("span",{className:"signup-count",children:[((Mt=fe.signups)==null?void 0:Mt.length)||0,fe.maxSignups&&` / ${fe.maxSignups}`," signups"]})})]})]},fe._id)})}):n.jsx("p",{children:"No upcoming events at this time."})})]}),!ve&&!me&&(z||R.length>0)&&n.jsxs("div",{className:"dashboard-section",children:[n.jsx("div",{className:"section-header",children:n.jsx("h2",{children:"Currently Borrowed Books"})}),n.jsx("div",{className:"section-content",children:z?n.jsx("div",{className:"loading",children:"Loading books..."}):R.length>0?n.jsx("div",{className:"borrowed-books-grid",children:R.map(fe=>{var C;const ge=(C=fe.lending)!=null&&C.dueDate?Math.ceil((new Date(fe.lending.dueDate)-new Date)/864e5):null;return n.jsxs("div",{className:"borrowed-book-card clickable-book-card",onClick:()=>se(fe),children:[n.jsx("img",{src:fe.url||"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTAFBy_9Wwc7vUhLMgzzACgvfPcWQOw297s2Q&s",alt:fe.title,className:"book-cover-small",onError:ue=>{ue.target.src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTAFBy_9Wwc7vUhLMgzzACgvfPcWQOw297s2Q&s"}}),n.jsxs("div",{className:"book-info",children:[n.jsx("h4",{children:fe.title}),n.jsxs("p",{children:["by ",fe.author]}),ge!==null&&n.jsx("p",{className:`due-date ${ge<0?"overdue":ge<=3?"warning":"normal"}`,children:ge>=0?`Due in ${ge} day${ge!==1?"s":""}`:`Overdue by ${Math.abs(ge)} day${Math.abs(ge)!==1?"s":""}`})]}),n.jsx("div",{className:"wishlist-actions",children:n.jsxs("button",{className:"btn-borrow small outlined",onClick:ue=>{ue.stopPropagation(),K(fe.id||fe._id)},title:"Return book",children:[n.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("path",{d:"M9 14l-5-5 5-5"}),n.jsx("path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5v0a5.5 5.5 0 0 1-5.5 5.5H13"})]}),"Return"]})})]},fe.id)})}):n.jsx("p",{children:"No books currently borrowed"})})]}),n.jsxs("div",{className:"dashboard-section",children:[n.jsx("div",{className:"section-header",children:n.jsxs("h2",{children:[ve&&"All Students",me&&"Student Overview",Ke&&"Your Students"]})}),n.jsx("div",{className:"section-content",children:O?n.jsx("div",{className:"loading-container",children:n.jsx("div",{className:"loading",children:"Loading Students..."})}):be.length>0?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"students-summary",children:n.jsxs("p",{children:[ve&&`Total students: ${be.length}`,me&&`Students under your supervision: ${be.length}`,Ke&&`Your enrolled students: ${be.length}`]})}),n.jsx("div",{className:"landing-cards-grid",children:be.map(fe=>n.jsx(Ub,{student:fe,user:l},fe.id||fe._id))})]}):n.jsx("div",{className:"no-students",children:n.jsxs("div",{className:"no-students-content",children:[n.jsx("h3",{children:Ke?"No students enrolled":"No students found"}),n.jsx("p",{children:Ke?"You don't have any students enrolled yet. Contact administration for enrollment.":"No students have been added to the system yet."})]})})})]})]}),k&&n.jsx(_b,{show:k,onClose:()=>P(!1),onNotificationCreated:$,showMessage:(fe,ge="success")=>{s(fe),o(ge),setTimeout(()=>s(null),5e3)},user:l}),n.jsx(tp,{isOpen:X&&_!==null,event:_,user:l,onClose:()=>{oe(!1),T(null)},onSubmit:async fe=>{try{mt.setToken(l.token),await mt.addSignup(_._id,fe),D(),s("Successfully signed up for event!"),o("success"),setTimeout(()=>s(null),5e3),oe(!1),T(null)}catch{s("Error signing up for event. Please try again."),o("error"),setTimeout(()=>s(null),5e3)}}})]})},Lb=({book:l,students:s,onClose:o,onAddToWishlist:c})=>{const[d,h]=b.useState([]),m=y=>{h(g=>g.includes(y)?g.filter(v=>v!==y):[...g,y])},f=()=>{d.length>0&&c(d)};return jt.createPortal(n.jsx("div",{className:"form-popup-overlay",children:n.jsxs("div",{className:"form-popup",onClick:y=>y.stopPropagation(),children:[n.jsxs("div",{className:"popup-header",children:[n.jsxs("h3",{children:['Add "',l.title,'" to Wishlist']}),n.jsx("button",{className:"close-btn",onClick:o,children:""})]}),n.jsxs("div",{className:"history-content",children:[n.jsx("p",{children:"Select which students should have this book added to their wishlist:"}),n.jsx("div",{className:"checkbox-list",children:s.map(y=>n.jsx("div",{className:"checkbox-group",children:n.jsxs("label",{children:[n.jsx("input",{type:"checkbox",checked:d.includes(y.id),onChange:()=>m(y.id)}),y.firstName," ",y.lastName]})},y.id))}),n.jsxs("div",{className:"form-actions",children:[n.jsxs("button",{type:"button",onClick:f,disabled:d.length===0,children:["Add to Wishlist (",d.length,")"]}),n.jsx("button",{type:"button",onClick:o,children:"Cancel"})]})]})]})}),document.body)},fm=({book:l,user:s,users:o=[],students:c=[],onBorrow:d,onLendTo:h,onReturn:m,onClearHistory:f,onUpdateBook:y,onDeleteBook:g,onAddToWishlist:v})=>{var q,te,ie,D,$;const[x,S]=b.useState(!1),[R,N]=b.useState(!1),[w,E]=b.useState(!1),[O,H]=b.useState(""),z=!((q=l.lending)!=null&&q.isLent),J=(s==null?void 0:s.role)==="admin"||(s==null?void 0:s.role)==="tutor",W=s&&((te=l.lending)==null?void 0:te.borrower)&&String(l.lending.borrower._id||l.lending.borrower.id||l.lending.borrower).trim()===String(s.id).trim(),L=s&&s.role!=="admin"&&s.role!=="tutor"&&z,k=s&&c&&c.length>0;let P=null;if(W&&((ie=l.lending)!=null&&ie.dueDate)){const F=new Date(l.lending.dueDate);P=Math.ceil((F-new Date)/(1e3*60*60*24))}const U="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTAFBy_9Wwc7vUhLMgzzACgvfPcWQOw297s2Q&s",ee=F=>F?new Date(F).toLocaleDateString("de-DE",{year:"numeric",month:"2-digit",day:"2-digit"}):"Not returned",I=()=>{window.confirm("Are you sure you want to clear all borrowing history for this book? This action cannot be undone.")&&(f(l.id),S(!1))},ce=F=>{y(F),N(!1)},X=()=>{window.confirm(`Are you sure you want to delete "${l.title}"? This action cannot be undone.`)&&(g(l.id),N(!1))},oe=()=>{O&&(h(O),H(""))},_=()=>{c.length===1?v(c[0].id,l.id):E(!0)},T=F=>{F.forEach(K=>{v(K,l.id)}),E(!1)};return n.jsxs("div",{className:`book-card ${x?"popup-open":""}`,children:[n.jsx("div",{className:"book-image-container",children:n.jsx("img",{src:l.url||U,alt:`${l.title} cover`,className:"book-cover",onError:F=>{F.target.src=U}})}),n.jsxs("div",{className:"book-content",children:[n.jsxs("div",{className:"book-info",children:[n.jsx("h4",{className:"book-title",children:l.title}),n.jsxs("p",{className:"book-author",children:["by ",l.author]})]}),n.jsxs("div",{className:"book-status",children:[n.jsx("div",{className:`status-badge ${z?"available":"borrowed"}`,children:z?" Available":W?" You borrowed this":J&&((D=l.lending)!=null&&D.borrower)?` Lent to ${l.lending.borrower.name||l.lending.borrower.username||"Unknown User"}`:" Lent out"}),W&&P!==null&&n.jsx("div",{className:`days-left ${P<0?"overdue":P<=3?"warning":"normal"}`,children:P>=0?`${P} day${P!==1?"s":""} left`:`Overdue by ${Math.abs(P)} day${Math.abs(P)!==1?"s":""}`})]}),J&&z&&o.length>0&&n.jsxs("select",{value:O,onChange:F=>H(F.target.value),className:"user-select",children:[n.jsx("option",{value:"",children:"Select user to lend to..."}),o.filter(F=>F.role!=="admin").map(F=>n.jsx("option",{value:F.id,children:F.name||F.username},F.id))]}),n.jsxs("div",{className:"book-actions",children:[n.jsxs("div",{className:"action-buttons",children:[L&&n.jsx("button",{className:"borrow-btn",onClick:()=>d(l.id),children:"Borrow Book"}),J&&z&&o.length>0&&n.jsx("div",{className:"admin-lend-controls",children:n.jsx("button",{className:"lend-btn",onClick:oe,disabled:!O,children:"Lend Book"})}),(($=l.lending)==null?void 0:$.isLent)&&(W||J)&&n.jsx("button",{onClick:()=>m(l.id),children:"Return Book"})]}),n.jsxs("div",{className:"book-badges",children:[l.language&&n.jsx("span",{className:"book-badge language-badge",children:l.language}),l.difficulty&&n.jsx("span",{className:"book-badge difficulty-badge",children:l.difficulty})]})]})]}),(J||k)&&n.jsxs("div",{className:"book-buttons",children:[J&&n.jsxs(n.Fragment,{children:[n.jsx("button",{className:"history-btn",onClick:()=>S(!0),title:"View borrowing history",children:""}),n.jsx("button",{className:"edit-btn",onClick:()=>N(!0),title:"Edit book details",children:""})]}),k&&n.jsx("button",{className:"wishlist-btn",onClick:_,title:"Add to student wishlist",children:""})]}),x&&jt.createPortal(n.jsx("div",{className:"form-popup-overlay",children:n.jsxs("div",{className:"form-popup",onClick:F=>F.stopPropagation(),children:[n.jsxs("div",{className:"popup-header",children:[n.jsxs("h3",{children:["Borrowing History: ",l.title]}),n.jsxs("div",{className:"popup-header-actions",children:[J&&n.jsx("button",{className:"clear-history-btn",onClick:()=>I(),title:"Clear all borrowing history",children:"Clear History"}),n.jsx("button",{className:"close-btn",onClick:()=>S(!1),children:""})]})]}),n.jsx("div",{className:"history-content",children:l.lendingHistory&&l.lendingHistory.length>0?n.jsx("div",{className:"history-list",children:l.lendingHistory.sort((F,K)=>new Date(K.lentDate)-new Date(F.lentDate)).map((F,K)=>{var se,ve;return n.jsxs("div",{className:"history-entry",children:[n.jsxs("div",{className:"history-info",children:[n.jsxs("div",{className:"borrower-info",children:[n.jsx("strong",{children:"Borrower:"})," ",((se=F.borrower)==null?void 0:se.name)||((ve=F.borrower)==null?void 0:ve.username)||(typeof F.borrower=="string"?"User deleted":"Unknown User")]}),n.jsxs("div",{className:"history-dates",children:[n.jsxs("span",{className:"borrowed-date",children:[n.jsx("strong",{children:"Borrowed:"})," ",ee(F.lentDate)]}),n.jsxs("span",{className:"due-date",children:[n.jsx("strong",{children:"Due:"})," ",ee(F.dueDate)]}),n.jsxs("span",{className:`return-date ${F.isReturned?"returned":"not-returned"}`,children:[n.jsx("strong",{children:"Returned:"})," ",F.isReturned?ee(F.returnedDate):"Not returned"]})]})]}),n.jsx("div",{className:`history-status ${F.isReturned?"returned":"borrowed"}`,children:F.isReturned?" Returned":" Still borrowed"})]},K)})}):n.jsx("div",{className:"no-history",children:n.jsx("p",{children:"No borrowing history available for this book."})})})]})}),document.body),R&&jt.createPortal(n.jsx("div",{className:"form-popup-overlay",children:n.jsxs("div",{className:"form-popup",onClick:F=>F.stopPropagation(),children:[n.jsxs("div",{className:"popup-header",children:[n.jsxs("h3",{children:["Edit Book: ",l.title]}),n.jsx("button",{className:"close-btn",onClick:()=>N(!1),children:""})]}),n.jsx("div",{className:"history-content",children:n.jsx(zb,{book:l,onUpdate:ce,onDelete:X})})]})}),document.body),w&&n.jsx(Lb,{book:l,students:c,onClose:()=>E(!1),onAddToWishlist:T})]})},zb=({book:l,onUpdate:s,onDelete:o})=>{const[c,d]=b.useState(l.title),[h,m]=b.useState(l.author),[f,y]=b.useState(l.url),[g,v]=b.useState(l.language||""),[x,S]=b.useState(l.difficulty||""),R=N=>{if(N.preventDefault(),!c.trim()){alert("Title is required");return}const w={title:c.trim(),author:h.trim()||"Unknown Author",url:f.trim()||"",language:g.trim(),difficulty:x};s(w)};return n.jsxs("form",{onSubmit:R,className:"edit-book-form",children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"book-title",children:"Title:"}),n.jsx("input",{id:"book-title",type:"text",value:c,onChange:N=>d(N.target.value),required:!0})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"book-author",children:"Author:"}),n.jsx("input",{id:"book-author",type:"text",value:h,onChange:N=>m(N.target.value),placeholder:"Unknown Author"})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"book-url",children:"Cover Image URL:"}),n.jsx("input",{id:"book-url",type:"url",value:f,onChange:N=>y(N.target.value)})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"book-language",children:"Language:"}),n.jsx("input",{id:"book-language",type:"text",value:g,onChange:N=>v(N.target.value),placeholder:"e.g., English, Portuguese, Spanish"})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"book-difficulty",children:"Reading Difficulty:"}),n.jsxs("select",{id:"book-difficulty",value:x,onChange:N=>S(N.target.value),children:[n.jsx("option",{value:"",children:"Select difficulty level..."}),n.jsx("option",{value:"Learning to Read",children:"Learning to Read"}),n.jsx("option",{value:"Beginner",children:"Beginner"}),n.jsx("option",{value:"Intermediate",children:"Intermediate"}),n.jsx("option",{value:"Advanced",children:"Advanced"}),n.jsx("option",{value:"Expert",children:"Expert"})]})]}),n.jsxs("div",{className:"form-actions",children:[n.jsx("button",{type:"submit",className:"save-btn",children:"Save Changes"}),n.jsx("button",{type:"button",onClick:o,className:"delete-btn",children:"Delete Book"})]})]})},Mb=({createBook:l})=>{const[s,o]=b.useState(""),[c,d]=b.useState(""),[h,m]=b.useState(""),[f,y]=b.useState(""),[g,v]=b.useState(""),x=S=>{S.preventDefault(),l({title:s,author:c,url:h,language:f,difficulty:g}),o(""),d(""),m(""),y(""),v("")};return n.jsxs("form",{onSubmit:x,className:"edit-book-form",children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"create-book-title",children:"Title:"}),n.jsx("input",{id:"create-book-title",type:"text",value:s,onChange:({target:S})=>o(S.value),required:!0})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"create-book-author",children:"Author:"}),n.jsx("input",{id:"create-book-author",type:"text",value:c,onChange:({target:S})=>d(S.value),placeholder:"Unknown Author"})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"create-book-url",children:"Cover Image URL:"}),n.jsx("input",{id:"create-book-url",type:"url",value:h,onChange:({target:S})=>m(S.value)})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"create-book-language",children:"Language:"}),n.jsx("input",{id:"create-book-language",type:"text",value:f,onChange:({target:S})=>y(S.value),placeholder:"e.g., English, Portuguese, Spanish"})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"create-book-difficulty",children:"Reading Difficulty:"}),n.jsxs("select",{id:"create-book-difficulty",value:g,onChange:({target:S})=>v(S.value),children:[n.jsx("option",{value:"",children:"Select difficulty level..."}),n.jsx("option",{value:"Learning to Read",children:"Learning to Read"}),n.jsx("option",{value:"Beginner",children:"Beginner"}),n.jsx("option",{value:"Intermediate",children:"Intermediate"}),n.jsx("option",{value:"Advanced",children:"Advanced"}),n.jsx("option",{value:"Expert",children:"Expert"})]})]}),n.jsx("div",{className:"form-actions",children:n.jsx("button",{type:"submit",children:"Create Book"})})]})},Hb=async()=>(await de.get("/users")).data,qb=async(l,s)=>(await de.put(`/users/${l}`,s)).data,Fb=async l=>(await de.post("/users",l)).data,Yb=async l=>(await de.get(`/users/${l}`)).data,Gb=async l=>(await de.delete(`/users/${l}`)).data,Pb=async()=>(await de.get("/users/template")).data,Qb=async l=>(await de.post("/users/import",l)).data,Vb=async l=>(await de.post("/users/import-with-students",l)).data,Zb=async(l={})=>{const s=new URLSearchParams(l).toString(),o=`/users/export${s?`?${s}`:""}`;return(await de.get(o)).data},Xb=async(l={})=>{const s=new URLSearchParams(l).toString(),o=`/users/export-with-students${s?`?${s}`:""}`;return(await de.get(o)).data},$b=async()=>(await de.get("/users/template-with-students")).data,Jb=async(l={},s={})=>{var h,m,f,y,g,v,x;const o=new URLSearchParams;(h=l.users)!=null&&h.role&&o.append("userRole",l.users.role),(m=l.students)!=null&&m.startMonth&&o.append("studentStartMonth",l.students.startMonth),(f=l.students)!=null&&f.endMonth&&o.append("studentEndMonth",l.students.endMonth),(y=l.notifications)!=null&&y.startDate&&o.append("notificationStartDate",l.notifications.startDate),(g=l.notifications)!=null&&g.endDate&&o.append("notificationEndDate",l.notifications.endDate),(v=l.notifications)!=null&&v.targetType&&o.append("notificationTargetType",l.notifications.targetType),(x=l.books)!=null&&x.availability&&o.append("bookAvailability",l.books.availability),s.preservePasswords===!1&&o.append("preservePasswords","false");const c=`/users/export-all${o.toString()?`?${o.toString()}`:""}`;return(await de.get(c)).data},Kb=async(l,s={})=>(await de.post("/users/import-all",{backupData:l,options:s})).data,Wb=async l=>(await de.post("/users/clear-database",{confirmation:l})).data,Be={setToken:rn,getAll:Hb,update:qb,getById:Yb,create:Fb,remove:Gb,getTemplate:Pb,importUsers:Qb,importUserWithStudents:Vb,exportUsers:Zb,exportUsersWithStudents:Xb,getUsersWithStudentsTemplate:$b,exportAllData:Jb,importAllData:Kb,clearDatabase:Wb},Ib=({user:l,setMessage:s,setClassName:o})=>{var me,Pe;const c=dn(),[d,h]=b.useState([]),[m,f]=b.useState(!1),[y,g]=b.useState(!0),[v,x]=b.useState(!1),[S,R]=b.useState(1),[N,w]=b.useState(1),[E,O]=b.useState([]),[H,z]=b.useState([]),[J,W]=b.useState(((me=c.state)==null?void 0:me.searchTerm)||""),[L,k]=b.useState(((Pe=c.state)==null?void 0:Pe.searchTerm)||""),[P,U]=b.useState(""),[ee,I]=b.useState(""),[ce,X]=b.useState("title-asc"),[oe,_]=b.useState([]),[T,q]=b.useState(!1),te=b.useCallback(()=>{W(""),k(""),U(""),I(""),X("title-asc"),R(1)},[]),ie=b.useCallback(re=>{W(re.target.value)},[]);b.useEffect(()=>{S===1&&!L&&!P&&!ee&&ce==="title-asc"?g(!0):x(!0),l!=null&&l.token&&Ze.setToken(l.token),Ze.getAll({page:S,limit:18,search:L,language:P,difficulty:ee,sort:ce}).then(be=>{h(be.books),w(be.totalPages)}).catch(()=>{h([])}).finally(()=>{g(!1),x(!1),T&&setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"}),q(!1)},100)})},[S,l,L,P,ee,ce,T]),b.useEffect(()=>{((l==null?void 0:l.role)==="admin"||(l==null?void 0:l.role)==="tutor")&&(Be.setToken(l.token),Be.getAll().then(O).catch(()=>{O([])}))},[l]),b.useEffect(()=>{l&&(Ae.setToken(l.token),Ae.getAll().then(z).catch(()=>{z([])}))},[l]),b.useEffect(()=>{const re=setTimeout(()=>{k(J)},300);return()=>clearTimeout(re)},[J]),b.useEffect(()=>{R(1)},[L,P,ee,ce]),b.useEffect(()=>{console.log("Fetching languages..."),Ze.getLanguages().then(re=>{console.log("Languages received:",re),_(re)}).catch(re=>{console.error("Languages fetch error:",re),_([])})},[]);const D=d;if(y)return n.jsx("div",{className:"loading",children:"Loading books..."});const $=async re=>{try{const be=await Ze.create(re);h(d.concat(be)),f(!1),s(`${be.title} added successfully`),o("success"),setTimeout(()=>{s(null),o("error")},5e3)}catch{s("Error creating book"),setTimeout(()=>s(null),5e3)}},F=async(re,be,Ke)=>{var fe,ge,C;try{l!=null&&l.token&&Ze.setToken(l.token);let ue;switch(re){case"borrow":ue=await Ze.lend(be),s("Book borrowed for 3 weeks");break;case"lendTo":{ue=await Ze.lend(be,Ke.userId);const he=((fe=E.find(ke=>ke.id===Ke.userId))==null?void 0:fe.name)||"User";s(`Book lent to ${he} for 3 weeks`);break}case"return":ue=await Ze.returnBook(be),s("Book returned successfully");break;case"clearHistory":ue=await Ze.clearHistory(be),s("Borrowing history cleared successfully");break;case"update":ue=await Ze.update(be,Ke),s("Book updated successfully");break;case"delete":await Ze.remove(be),h(d.filter(he=>he.id!==be)),s("Book deleted successfully"),o("success"),setTimeout(()=>s(null),5e3);return;default:return}ue&&h(d.map(he=>he.id===be?ue:he)),o("success")}catch(ue){const he=(C=(ge=ue.response)==null?void 0:ge.data)==null?void 0:C.error;s(he||"Action failed"),o("error")}finally{setTimeout(()=>s(null),5e3)}},K=async(re,be)=>{var Ke,fe;try{await Ae.addToWishlist(re,be),s("Book added to wishlist successfully"),o("success")}catch(ge){const C=(fe=(Ke=ge.response)==null?void 0:Ke.data)==null?void 0:fe.error;s(C||"Failed to add book to wishlist"),o("error")}finally{setTimeout(()=>s(null),5e3)}},se=(l==null?void 0:l.role)==="admin"||(l==null?void 0:l.role)==="tutor"?D.filter(re=>re.lending.isLent):l?D.filter(re=>{var be;return((be=re.lending.borrower)==null?void 0:be.id)===l.id}):[],ve=D.filter(re=>!se.includes(re));return n.jsxs("div",{className:"library-container",children:[n.jsxs("div",{className:"library-header",children:[n.jsx("div",{className:"library-title-section",children:n.jsx("h1",{className:"library-title",children:"Campus da Terra Library"})}),n.jsxs("div",{className:"library-controls",children:[n.jsxs("div",{style:{position:"relative"},children:[n.jsx("input",{type:"text",placeholder:"Search books...",value:J,onChange:ie,className:"search-input",style:{paddingRight:v?"35px":"12px"}},"library-search-input"),v&&n.jsx("span",{className:"search-loading",style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",pointerEvents:"none"},children:""})]}),n.jsxs("select",{value:P,onChange:re=>U(re.target.value),className:"filter-select",children:[n.jsx("option",{value:"",children:"All Languages"}),oe.map(re=>n.jsx("option",{value:re,children:re},re))]}),n.jsxs("select",{value:ee,onChange:re=>I(re.target.value),className:"filter-select",children:[n.jsx("option",{value:"",children:"All Levels"}),n.jsx("option",{value:"Learning to Read",children:"Learning to Read"}),n.jsx("option",{value:"Beginner",children:"Beginner"}),n.jsx("option",{value:"Intermediate",children:"Intermediate"}),n.jsx("option",{value:"Advanced",children:"Advanced"}),n.jsx("option",{value:"Expert",children:"Expert"})]}),n.jsxs("select",{value:ce,onChange:re=>X(re.target.value),className:"filter-select sort-select",children:[n.jsx("option",{value:"title-asc",children:"Title A  Z"}),n.jsx("option",{value:"title-desc",children:"Title Z  A"}),n.jsx("option",{value:"author-asc",children:"Author A  Z"}),n.jsx("option",{value:"author-desc",children:"Author Z  A"}),n.jsx("option",{value:"difficulty-asc",children:"Easy  Hard"}),n.jsx("option",{value:"difficulty-desc",children:"Hard  Easy"})]}),(L||P||ee||ce!=="title-asc")&&n.jsx("span",{className:"clear",onClick:te,children:"Clear"}),l&&(l.role==="admin"||l.role==="tutor")&&n.jsx("button",{onClick:()=>f(!0),children:"+ Add Book"})]})]}),se.length>0&&n.jsxs("div",{className:"borrowed-books",children:[n.jsx("h3",{children:"Borrowed Books"}),n.jsx("div",{className:"books-grid",children:se.map(re=>n.jsx(fm,{book:re,user:l,users:E,students:H,onBorrow:()=>F("borrow",re.id),onLendTo:be=>F("lendTo",re.id,{userId:be}),onReturn:()=>F("return",re.id),onClearHistory:()=>F("clearHistory",re.id),onUpdateBook:be=>F("update",re.id,be),onDeleteBook:()=>F("delete",re.id),onAddToWishlist:K},re.id))})]}),n.jsxs("div",{className:"available-books",children:[se.length>0&&!J&&!P&&!ee&&n.jsx("h3",{children:"Available Books"}),se.length===0&&!J&&!P&&!ee&&n.jsx("h3",{children:"All Books"}),n.jsx("div",{className:"books-grid",children:ve.map(re=>n.jsx(fm,{book:re,user:l,users:E,students:H,onBorrow:()=>F("borrow",re.id),onLendTo:be=>F("lendTo",re.id,{userId:be}),onReturn:()=>F("return",re.id),onClearHistory:()=>F("clearHistory",re.id),onUpdateBook:be=>F("update",re.id,be),onDeleteBook:()=>F("delete",re.id),onAddToWishlist:K},re.id))})]}),n.jsxs("div",{className:"pagination",children:[n.jsx("button",{className:"pagination-arrow",onClick:()=>{R(1),q(!0)},disabled:S===1,title:"First page",children:"<<"}),n.jsx("button",{className:"pagination-arrow",onClick:()=>{R(re=>Math.max(1,re-1)),window.scrollTo({top:0,behavior:"smooth"})},disabled:S===1,title:"Previous page",children:"<"}),n.jsxs("span",{children:["Page ",S," of ",N]}),n.jsx("button",{className:"pagination-arrow",onClick:()=>{R(re=>Math.min(N,re+1)),window.scrollTo({top:0,behavior:"smooth"})},disabled:S===N,title:"Next page",children:">"}),n.jsx("button",{className:"pagination-arrow",onClick:()=>{R(N),q(!0)},disabled:S===N,title:"Last page",children:">>"})]}),m&&jt.createPortal(n.jsx("div",{className:"form-popup-overlay",children:n.jsxs("div",{className:"form-popup",onClick:re=>re.stopPropagation(),children:[n.jsxs("div",{className:"popup-header",children:[n.jsx("h3",{children:"Add New Book"}),n.jsx("button",{className:"close-btn",onClick:()=>f(!1),children:""})]}),n.jsx("div",{className:"history-content",children:n.jsx(Mb,{createBook:$})})]})}),document.body)]})},eN=async()=>(await de.get("/documents")).data,tN=async(l,s)=>(await de.post("/documents",{title:l,description:s})).data,nN=async(l,s,o)=>(await de.put(`/documents/${l}`,{title:s,description:o})).data,aN=async l=>(await de.delete(`/documents/${l}`)).data,lN=async(l,s,o)=>{const c=new FormData;return c.append("document",s),c.append("name",o),(await de.post(`/documents/${l}/files`,c,{headers:{"Content-Type":"multipart/form-data"}})).data},iN=async(l,s,o)=>(await de.post(`/documents/${l}/urls`,{name:o,url:s})).data,sN=async(l,s)=>(await de.delete(`/documents/${l}/files/${s}`)).data,rN=async(l,s)=>(await de.get(`/documents/${l}/files/${s}/url`)).data.url,oN=async(l={})=>{const s=new URLSearchParams(l).toString(),o=`/documents/export${s?`?${s}`:""}`;return(await de.get(o)).data},cN=async l=>(await de.post("/documents/import",l)).data,vt={setToken:rn,getAll:eN,createSection:tN,updateSection:nN,deleteSection:aN,addDocument:lN,addUrlDocument:iN,removeDocument:sN,getSecureDocumentUrl:rN,exportDocuments:oN,importDocuments:cN},uN=({section:l,isAdmin:s,onUpdate:o,showMessage:c,onDelete:d})=>{var L;const[h,m]=b.useState(!1),[f,y]=b.useState(!1),[g,v]=b.useState(!1),[x,S]=b.useState(l.title),[R,N]=b.useState(l.description||""),[w,E]=b.useState("file"),O=async k=>{var ee,I;k.preventDefault();const P=new FormData(k.target),U=P.get("documentName");if(!U){c("Document name is required","error");return}try{v(!0);let ce;if(w==="file"){const X=P.get("documentFile");if(!(X instanceof File)){c("Please select a file","error");return}if(X.size>10*1024*1024){c("File size must be less than 10MB","error");return}ce=await vt.addDocument(l._id,X,U)}else{const X=P.get("documentUrl");if(!X){c("Document URL is required","error");return}try{new URL(X)}catch{c("Please enter a valid URL","error");return}ce=await vt.addUrlDocument(l._id,X,U)}o(ce),m(!1),E("file"),c("Document added successfully")}catch(ce){c(((I=(ee=ce.response)==null?void 0:ee.data)==null?void 0:I.error)||"Failed to add document","error")}finally{v(!1)}},H=async k=>{var P,U;if(window.confirm("Are you sure you want to remove this document?"))try{const ee=await vt.removeDocument(l._id,k);o(ee),c("Document removed successfully")}catch(ee){c(((U=(P=ee.response)==null?void 0:P.data)==null?void 0:U.error)||"Failed to remove document","error")}},z=async k=>{try{if(k.documentUrl){window.open(k.documentUrl,"_blank");return}const P=await vt.getSecureDocumentUrl(l._id,k._id||k.id);window.open(P,"_blank")}catch{c("Failed to download document","error")}},J=async k=>{var P,U;if(k.preventDefault(),!x.trim()){c("Title is required","error");return}try{const ee=await vt.updateSection(l._id,x,R);o(ee),y(!1),c("Section updated successfully")}catch(ee){c(((U=(P=ee.response)==null?void 0:P.data)==null?void 0:U.error)||"Failed to update section","error")}},W=async()=>{var k,P;if(window.confirm(`Are you sure you want to delete the section "${l.title}" and all its documents?`))try{await vt.deleteSection(l._id),d(l._id),c("Section deleted successfully")}catch(U){c(((P=(k=U.response)==null?void 0:k.data)==null?void 0:P.error)||"Failed to delete section","error")}};return n.jsxs("div",{className:"dashboard-section",children:[n.jsxs("div",{className:"section-header",children:[n.jsxs("div",{className:"section-title-area",children:[n.jsx("h2",{children:l.title}),l.description&&n.jsx("p",{className:"section-description",children:l.description})]}),s&&n.jsxs("div",{className:"section-actions",children:[n.jsx("button",{className:"section-action-btn outlined",onClick:()=>y(!0),title:"Edit section",children:"Edit Section"}),n.jsx("button",{className:"section-action-btn",onClick:()=>m(!0),disabled:g,children:"Add Document"}),n.jsx("button",{className:"section-action-btn delete-btn",onClick:W,title:"Delete section",children:"Delete Section"})]})]}),n.jsx("div",{className:"section-content",children:((L=l.documents)==null?void 0:L.length)>0?n.jsx("div",{className:"documents-list",children:l.documents.map(k=>n.jsxs("div",{className:"document-item",children:[n.jsxs("div",{className:"document-info",children:[n.jsx("div",{className:"document-name",children:k.name}),k.fileName&&n.jsx("div",{className:"document-filename",children:k.fileName}),k.documentUrl&&n.jsx("div",{className:"document-url",children:k.documentUrl}),s&&k.uploadedBy&&n.jsxs("div",{className:"document-meta",children:[k.documentUrl?"Added":"Uploaded"," by ",k.uploadedBy.username||k.uploadedBy.name," on ",new Date(k.uploadDate).toLocaleDateString("de-DE",{year:"numeric",month:"2-digit",day:"2-digit"})]})]}),n.jsxs("div",{className:"document-actions",children:[n.jsx("button",{className:"small-btn",onClick:()=>z(k),title:k.documentUrl?"Open document":"Download document",children:k.documentUrl?"Open":"Download"}),s&&n.jsx("button",{className:"small-btn delete-btn",onClick:()=>H(k._id||k.id),title:"Remove document",children:"Remove"})]})]},k._id||k.id))}):n.jsx("div",{className:"no-documents",children:n.jsx("p",{children:"No documents in this section."})})}),h&&jt.createPortal(n.jsx("div",{className:"form-popup-overlay",children:n.jsxs("div",{className:"form-popup",onClick:k=>k.stopPropagation(),children:[n.jsxs("div",{className:"popup-header",children:[n.jsxs("h3",{children:["Add Document to ",l.title]}),n.jsx("button",{className:"close-btn",onClick:()=>m(!1),children:""})]}),n.jsx("div",{className:"history-content",children:n.jsxs("form",{onSubmit:O,className:"upload-form",children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Document Type:"}),n.jsxs("div",{className:"document-type-toggle",children:[n.jsx("button",{type:"button",className:w==="file"?"active":"",onClick:()=>E("file"),children:"Upload File"}),n.jsx("button",{type:"button",className:w==="url"?"active":"",onClick:()=>E("url"),children:"Add URL"})]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"documentName",children:"Document Name:"}),n.jsx("input",{type:"text",id:"documentName",name:"documentName",placeholder:"e.g., Enrollment Contract, Medical Certificate",required:!0})]}),w==="file"?n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"documentFile",children:"Select file:"}),n.jsx("input",{type:"file",id:"documentFile",name:"documentFile",accept:".pdf,.doc,.docx,.jpg,.jpeg,.png",required:!0}),n.jsx("small",{children:"Accepted formats: PDF, DOC, DOCX, JPG, PNG (Max: 10MB)"})]}):n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"documentUrl",children:"Document URL:"}),n.jsx("input",{type:"url",id:"documentUrl",name:"documentUrl",placeholder:"https://docs.google.com/document/d/... or https://example.com/document.pdf",required:!0}),n.jsx("small",{children:"Enter the direct URL to a Google Doc, Google Sheet, PDF, or other public document"})]}),n.jsxs("div",{className:"form-actions",children:[n.jsx("button",{type:"submit",disabled:g,children:g?"Adding...":"Add Document"}),n.jsx("button",{type:"button",onClick:()=>m(!1),children:"Cancel"})]})]})})]})}),document.body),f&&jt.createPortal(n.jsx("div",{className:"form-popup-overlay",children:n.jsxs("div",{className:"form-popup",onClick:k=>k.stopPropagation(),children:[n.jsxs("div",{className:"popup-header",children:[n.jsx("h3",{children:"Edit Section"}),n.jsx("button",{className:"close-btn",onClick:()=>y(!1),children:""})]}),n.jsx("div",{className:"history-content",children:n.jsxs("form",{onSubmit:J,className:"upload-form",children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"editTitle",children:"Section Title:"}),n.jsx("input",{type:"text",id:"editTitle",value:x,onChange:k=>S(k.target.value),placeholder:"e.g., School Policies, Forms",required:!0})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"editDescription",children:"Description (optional):"}),n.jsx("textarea",{id:"editDescription",value:R,onChange:k=>N(k.target.value),placeholder:"Brief description of this section",rows:"3"})]}),n.jsxs("div",{className:"form-actions",children:[n.jsx("button",{type:"submit",children:"Update Section"}),n.jsx("button",{type:"button",onClick:()=>y(!1),children:"Cancel"})]})]})})]})}),document.body)]})},dN=({user:l,setMessage:s,setClassName:o})=>{const[c,d]=b.useState([]),[h,m]=b.useState(!0),[f,y]=b.useState(null),[g,v]=b.useState(!1),[x,S]=b.useState(""),[R,N]=b.useState(""),[w,E]=b.useState(!1),O=(l==null?void 0:l.role)==="admin",H=b.useCallback(async()=>{try{if(m(!0),!(l!=null&&l.token)){m(!1);return}vt.setToken(l.token);const k=await vt.getAll();d(k)}catch{y("Failed to load documents"),s("Error fetching documents"),o("error"),setTimeout(()=>s(null),5e3)}finally{m(!1)}},[l,s,o]);b.useEffect(()=>{H()},[H]);const z=(k,P="success")=>{s(k),o(P),setTimeout(()=>{s(null),o("error")},5e3)},J=k=>{d(P=>P.map(U=>U._id===k._id?k:U))},W=k=>{d(P=>P.filter(U=>U._id!==k))},L=async k=>{var P,U;if(k.preventDefault(),!x.trim()){z("Section title is required","error");return}try{E(!0);const ee=await vt.createSection(x,R);d(I=>[...I,ee]),v(!1),S(""),N(""),z("Section created successfully")}catch{z(((U=(P=f.response)==null?void 0:P.data)==null?void 0:U.error)||"Failed to create section","error")}finally{E(!1)}};return l?h?n.jsx("div",{className:"loading",children:"Loading documents..."}):f?n.jsx("div",{className:"documents-container",children:n.jsx("div",{className:"text-error text-center py-8",children:f})}):n.jsxs("div",{className:"documents-container",children:[n.jsxs("div",{className:"documents-header",children:[n.jsx("div",{className:"documents-header-content",children:n.jsxs("div",{className:"documents-header-info",children:[n.jsx("h1",{children:"Ressources"}),n.jsx("p",{children:"Access important documents and resources"})]})}),O&&n.jsx("div",{className:"section-actions",children:n.jsx("button",{className:"outlined",onClick:()=>v(!0),disabled:w,children:"Add Section"})})]}),n.jsx("div",{className:"documents-content",children:c.length>0?c.map(k=>n.jsx(uN,{section:k,isAdmin:O,onUpdate:J,onDelete:W,showMessage:z},k._id)):n.jsx("div",{className:"documents-section",children:n.jsx("div",{className:"no-documents",children:O?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"empty-icon",children:""}),n.jsx("p",{children:"No document sections created yet"}),n.jsx("button",{className:"outlined",onClick:()=>v(!0),children:"Create First Section"})]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"empty-icon",children:""}),n.jsx("p",{children:"No documents available yet"})]})})})}),g&&jt.createPortal(n.jsx("div",{className:"form-popup-overlay",children:n.jsxs("div",{className:"form-popup",onClick:k=>k.stopPropagation(),children:[n.jsxs("div",{className:"popup-header",children:[n.jsx("h3",{children:"Create New Section"}),n.jsx("button",{className:"close-btn",onClick:()=>v(!1),children:""})]}),n.jsx("div",{className:"history-content",children:n.jsxs("form",{onSubmit:L,className:"upload-form",children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"sectionTitle",children:"Section Title:"}),n.jsx("input",{type:"text",id:"sectionTitle",value:x,onChange:k=>S(k.target.value),placeholder:"e.g., School Policies, Application Forms, Resources",required:!0})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"sectionDescription",children:"Description (optional):"}),n.jsx("textarea",{id:"sectionDescription",value:R,onChange:k=>N(k.target.value),placeholder:"Brief description of this section",rows:"3"})]}),n.jsxs("div",{className:"form-actions",children:[n.jsx("button",{type:"submit",disabled:w,children:w?"Creating...":"Create Section"}),n.jsx("button",{type:"button",onClick:()=>v(!1),children:"Cancel"})]})]})})]})}),document.body)]}):n.jsx("div",{className:"documents-container",children:n.jsxs("div",{className:"text-center py-8",children:[n.jsx("h2",{children:"Documents"}),n.jsx("p",{children:"Please log in to view documents"})]})})},np=({student:l,onView:s,onEdit:o,onDelete:c,onDashboard:d,user:h})=>{const{imageUrl:m,loading:f}=ar(l.profilePicture?l.id||l._id:null),y=(h==null?void 0:h.role)==="tutor";return n.jsxs("div",{className:"student-card",children:[n.jsxs("div",{className:"student-card-header",children:[l.profilePicture&&(m||y&&l.profilePicture)?n.jsx("img",{src:m||l.profilePicture,alt:`${l.firstName} ${l.lastName}`,className:"student-avatar student-avatar-small"}):f?n.jsx("div",{className:"student-avatar student-avatar-small placeholder",children:n.jsx("div",{className:"loading",children:"..."})}):n.jsx("div",{className:"student-avatar student-avatar-small placeholder",children:n.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),n.jsx("circle",{cx:"12",cy:"7",r:"4"})]})}),n.jsx("div",{className:"student-card-info",children:n.jsxs("h3",{children:[l.firstName," ",l.lastName]})})]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Age:"})," ",l.dateOfBirth?Math.floor((new Date-new Date(l.dateOfBirth))/(365.25*24*60*60*1e3)):"N/A"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Gender:"})," ",l.gender||"Not set"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Nationality:"})," ",l.nationality||"Not set"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Enrollment:"})," ",l.enrollmentLength||"Not set"]}),n.jsxs("div",{className:"student-actions",children:[d&&n.jsx("button",{className:"small-btn",onClick:()=>d(l.id||l._id),children:"Dashboard"}),n.jsx("button",{className:"small-btn",onClick:()=>s(l),children:"View"}),(h==null?void 0:h.role)!=="tutor"&&n.jsxs(n.Fragment,{children:[n.jsx("button",{className:"small-btn",onClick:()=>o(l),children:"Edit"}),n.jsx("button",{onClick:()=>c(l.id||l._id),className:"delete-btn small-btn",children:"Delete"})]})]})]},l.id||l._id)},fN=({user:l,setMessage:s,setClassName:o})=>{var ge;const c=dn(),d=ta(),[h,m]=b.useState([]),[f,y]=b.useState(null),[g,v]=b.useState(!1),[x,S]=b.useState(!1),[R,N]=b.useState(!0),[w,E]=b.useState([]),[O,H]=b.useState(""),[z,J]=b.useState(null),[W,L]=b.useState(null),[k,P]=b.useState(!1),{imageUrl:U,loading:ee,refreshUrl:I,clearUrl:ce}=ar(f!=null&&f.profilePicture?f.id:null),[X,oe]=b.useState({firstName:"",middleName:"",lastName:"",gender:"Other",dateOfBirth:"",streetAddress:"",city:"",postalCode:"",country:"",nationality:"",passportNumber:"",passportExpiryDate:"",nifNumber:"",enrollmentLength:"1 year (Residents)",weekdayAttendance:"5 days/week",enrollmentStartDate:"",siblings:!1,firstLanguage:"",englishProficiency:"No prior knowledge",englishReadingWriting:"No prior knowledge",portugueseLevel:"No prior knowledge",skillsHobbies:"",strugglingSubjects:"",approach:"Other",curriculum:"Other",curriculumSupplier:"",curriculumNotes:"",behavioralChallenges:!1,learningDifferences:!1,physicalLimitations:!1,healthConditions:!1,dailyMedication:!1,medicalTreatments:!1,allergies:!1,specialNeedsDetails:"",lifeThreatening:!1,medicalDetails:"",pricing:"Residents",discount:"None",paymentMethod:"Bank Transfer",billingAddressSameAsHome:!0,billingStreetAddress:"",billingCity:"",billingPostalCode:"",billingCountry:"",additionalNotes:"",signedTuitionAgreement:!1,referralSource:"",motivationForJoining:[],photoConsent:!1,contactListConsent:!1,termsAndConditions:!1,personalDataConsent:!1}),_=b.useCallback(async()=>{try{N(!0);const C=await Ae.getAll();m(C)}catch{s("Error fetching students"),o("error"),setTimeout(()=>s(null),5e3)}finally{N(!1)}},[s,o]),T=b.useCallback(async()=>{if((l==null?void 0:l.role)==="admin")try{const C=await Be.getAll();E(C)}catch{}},[l==null?void 0:l.role]);b.useEffect(()=>{l!=null&&l.token&&(Ae.setToken(l.token),Be.setToken(l.token),_(),T())},[l,_,T]),b.useEffect(()=>{var C;if((C=c.state)!=null&&C.selectedStudent&&h.length>0){const ue=c.state.selectedStudent,he=c.state.mode;y(ue),he==="edit"?(v(!0),te(ue)):v(!1),S(!1),window.history.replaceState({},document.title)}},[c.state,h]);const q=()=>{H(""),oe({firstName:"",middleName:"",lastName:"",gender:"Other",dateOfBirth:"",streetAddress:"",city:"",postalCode:"",country:"",nationality:"",passportNumber:"",passportExpiryDate:"",nifNumber:"",enrollmentLength:"1 year (Residents)",weekdayAttendance:"5 days/week",enrollmentStartDate:"",siblings:!1,firstLanguage:"",englishProficiency:"No prior knowledge",englishReadingWriting:"No prior knowledge",portugueseLevel:"No prior knowledge",skillsHobbies:"",strugglingSubjects:"",approach:"Other",curriculum:"Other",curriculumSupplier:"",curriculumNotes:"",behavioralChallenges:!1,learningDifferences:!1,physicalLimitations:!1,healthConditions:!1,dailyMedication:!1,medicalTreatments:!1,allergies:!1,specialNeedsDetails:"",lifeThreatening:!1,medicalDetails:"",pricing:"Residents",discount:"None",paymentMethod:"Bank Transfer",billingAddressSameAsHome:!0,billingStreetAddress:"",billingCity:"",billingPostalCode:"",billingCountry:"",additionalNotes:"",signedTuitionAgreement:!1,referralSource:"",motivationForJoining:[],photoConsent:!1,contactListConsent:!1,termsAndConditions:!1,personalDataConsent:!1})},te=C=>{oe({firstName:C.firstName||"",middleName:C.middleName||"",lastName:C.lastName||"",gender:C.gender||"",dateOfBirth:C.dateOfBirth?C.dateOfBirth.split("T")[0]:"",streetAddress:C.streetAddress||"",city:C.city||"",postalCode:C.postalCode||"",country:C.country||"",nationality:C.nationality||"",passportNumber:C.passportNumber||"",passportExpiryDate:C.passportExpiryDate?C.passportExpiryDate.split("T")[0]:"",nifNumber:C.nifNumber||"",enrollmentLength:C.enrollmentLength||"",weekdayAttendance:C.weekdayAttendance||"",enrollmentStartDate:C.enrollmentStartDate?C.enrollmentStartDate.split("T")[0]:"",siblings:C.siblings||!1,firstLanguage:C.firstLanguage||"",englishProficiency:C.englishProficiency||"",englishReadingWriting:C.englishReadingWriting||"",portugueseLevel:C.portugueseLevel||"",skillsHobbies:C.skillsHobbies||"",strugglingSubjects:C.strugglingSubjects||"",approach:C.approach||"",curriculum:C.curriculum||"",curriculumSupplier:C.curriculumSupplier||"",curriculumNotes:C.curriculumNotes||"",behavioralChallenges:C.behavioralChallenges||!1,learningDifferences:C.learningDifferences||!1,physicalLimitations:C.physicalLimitations||!1,healthConditions:C.healthConditions||!1,dailyMedication:C.dailyMedication||!1,medicalTreatments:C.medicalTreatments||!1,allergies:C.allergies||!1,specialNeedsDetails:C.specialNeedsDetails||"",lifeThreatening:C.lifeThreatening||!1,medicalDetails:C.medicalDetails||"",pricing:C.pricing||"Residents",discount:C.discount||"None",paymentMethod:C.paymentMethod||"Bank Transfer",billingAddressSameAsHome:C.billingAddressSameAsHome!==void 0?C.billingAddressSameAsHome:!0,billingStreetAddress:C.billingStreetAddress||"",billingCity:C.billingCity||"",billingPostalCode:C.billingPostalCode||"",billingCountry:C.billingCountry||"",additionalNotes:C.additionalNotes||"",signedTuitionAgreement:C.signedTuitionAgreement||!1,referralSource:C.referralSource||"",motivationForJoining:C.motivationForJoining||[],photoConsent:C.photoConsent||!1,contactListConsent:C.contactListConsent||!1,termsAndConditions:C.termsAndConditions||!1,personalDataConsent:C.personalDataConsent||!1})},ie=()=>{q(),S(!0),y(null),v(!1)},D=C=>{te(C),y(C),v(!0),S(!1)},$=C=>{y(C),v(!1),S(!1)},F=C=>{d(`/dashboard/${C}`)},K=(C,ue)=>{oe(he=>({...he,[C]:ue}))},se=(C,ue)=>{oe(he=>({...he,[C]:ue}))},ve=async C=>{var ue,he;C.preventDefault();try{if(x&&(l==null?void 0:l.role)==="admin"&&!O){s("Please select a user to assign this student to"),o("error"),setTimeout(()=>s(null),5e3);return}if(x){const ke=(l==null?void 0:l.role)==="admin"&&O?{...X,userId:O}:X,Oe=await Ae.create(ke);m(at=>[...at,Oe]),s("Student created successfully"),o("success")}else if(g&&f){const ke=await Ae.update(f.id,X);m(Oe=>Oe.map(at=>at.id===f.id?ke:at)),y(ke),s("Student updated successfully"),o("success")}v(!1),S(!1),window.scrollTo({top:0,behavior:"smooth"}),setTimeout(()=>{s(null),o("error")},5e3)}catch(ke){const Oe=(he=(ue=ke.response)==null?void 0:ue.data)==null?void 0:he.error;s(Oe||"Error saving student"),o("error"),setTimeout(()=>s(null),5e3)}},me=(C,ue)=>prompt(`To confirm deletion of this ${C}, please type "DELETE" below:

${ue}

Type "DELETE" to confirm:`)==="DELETE",Pe=async C=>{var ke,Oe;const ue=h.find(at=>(at.id||at._id)===C);if(!ue){s("Student not found"),o("error"),setTimeout(()=>s(null),5e3);return}if(me("student",`${ue.firstName} ${ue.lastName}`))try{await Ae.remove(C),m(at=>at.filter(Mt=>Mt.id!==C)),y(null),s("Student deleted successfully"),o("success"),setTimeout(()=>{s(null),o("error")},5e3)}catch(at){const Mt=(Oe=(ke=at.response)==null?void 0:ke.data)==null?void 0:Oe.error;s(Mt||"Error deleting student"),o("error"),setTimeout(()=>s(null),5e3)}},re=()=>{v(!1),S(!1),x&&y(null),J(null),L(null),window.scrollTo({top:0,behavior:"smooth"})},be=C=>{const ue=C.target.files[0];if(!ue){J(null),L(null);return}if(!ue.type.startsWith("image/")){s("Please select an image file","error");return}if(ue.size>5*1024*1024){s("File size must be less than 5MB","error");return}J(ue);const he=new FileReader;he.onload=ke=>{L(ke.target.result)},he.readAsDataURL(ue)},Ke=async()=>{var C,ue;if(!(!z||!(f!=null&&f.id)))try{P(!0);const he=await Ae.uploadProfilePicture(f.id,z);m(ke=>ke.map(Oe=>Oe.id===f.id?he:Oe)),y(he),s("Profile picture uploaded successfully"),o("success"),J(null),L(null),setTimeout(()=>I(),500)}catch(he){s(((ue=(C=he.response)==null?void 0:C.data)==null?void 0:ue.error)||"Failed to upload profile picture","error")}finally{P(!1)}},fe=async()=>{var C,ue;if(!(!(f!=null&&f.id)||!(f!=null&&f.profilePicture))&&window.confirm("Are you sure you want to remove the profile picture?"))try{P(!0);const he=await Ae.removeProfilePicture(f.id);m(ke=>ke.map(Oe=>Oe.id===f.id?he:Oe)),y(he),s("Profile picture removed successfully"),o("success"),ce()}catch(he){s(((ue=(C=he.response)==null?void 0:C.data)==null?void 0:ue.error)||"Failed to remove profile picture","error")}finally{P(!1)}};return l?R?n.jsx("div",{className:"loading",children:"Loading students..."}):!f&&!x?n.jsxs("div",{children:[n.jsx("h1",{className:"accent-font",children:"Students"}),n.jsxs("div",{className:"students-container",children:[(l==null?void 0:l.role)==="admin"&&n.jsx("div",{className:"students-actions",children:n.jsx("button",{className:"outlined",onClick:ie,children:"Add New Student"})}),h.length===0?n.jsxs("p",{children:["No students found.",(l==null?void 0:l.role)==="admin"?" Add your first student!":" Contact an administrator to add students."]}):n.jsx("div",{className:"students-list",children:h.map(C=>n.jsx(np,{student:C,onView:$,onEdit:D,onDelete:Pe,onDashboard:F},C.id))})]})]}):n.jsxs("div",{children:[n.jsxs("div",{className:"student-header-content",children:[n.jsx("div",{className:"current-picture",children:f!=null&&f.profilePicture&&U?n.jsx("img",{src:U,alt:"Profile",className:"student-avatar student-avatar-large"}):ee?n.jsx("div",{className:"student-avatar student-avatar-large placeholder",children:n.jsx("div",{className:"loading",children:"Loading..."})}):n.jsx("div",{className:"student-avatar student-avatar-large placeholder",children:n.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),n.jsx("circle",{cx:"12",cy:"7",r:"4"})]})})}),n.jsx("h2",{children:x?"Add New Student":g?`Edit ${f==null?void 0:f.firstName} ${f==null?void 0:f.lastName}`:`${f==null?void 0:f.firstName} ${f==null?void 0:f.lastName}`})]}),n.jsxs("div",{className:"student-detail-container",children:[n.jsxs("div",{className:"student-actions",children:[n.jsx("button",{className:"outlined",onClick:()=>y(null),children:" Back to Student List"}),n.jsx("button",{className:"outlined",onClick:()=>F(f.id),children:"Dashboard"}),!g&&!x&&n.jsx("button",{className:"outlined",onClick:()=>D(f),children:"Edit Student"}),g&&n.jsx("button",{className:"outlined",onClick:()=>$(f),children:"View Student"})]}),g||x?n.jsxs("form",{onSubmit:ve,className:"student-form",children:[n.jsxs("div",{className:"form-sections",children:[(l==null?void 0:l.role)==="admin"&&x&&n.jsxs("div",{className:"form-section",children:[n.jsx("h3",{children:"Assign to User"}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Select User *"}),n.jsxs("select",{value:O,onChange:C=>H(C.target.value),required:!0,children:[n.jsx("option",{value:"",children:"Choose a user..."}),w.map(C=>n.jsxs("option",{value:C.id,children:[C.name||C.username," (",C.email,")"]},C.id))]})]})]}),n.jsxs("div",{className:"form-section",children:[n.jsx("h3",{children:"Personal Information"}),!x&&n.jsxs("div",{className:"form-group profile-picture-section",children:[n.jsxs("label",{children:["Profile Picture",(l==null?void 0:l.role)!=="admin"?" (Admin Only)":""]}),n.jsxs("div",{className:"profile-picture-upload",children:[n.jsx("div",{className:"current-picture",children:f!=null&&f.profilePicture&&U?n.jsx("img",{src:U,alt:"Profile",className:"student-avatar-large"}):ee?n.jsx("div",{className:"student-avatar student-avatar-large placeholder",children:n.jsx("div",{className:"loading",children:"Loading..."})}):n.jsx("div",{className:"student-avatar student-avatar-large placeholder",children:n.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),n.jsx("circle",{cx:"12",cy:"7",r:"4"})]})})}),W&&n.jsxs("div",{className:"picture-preview",children:[n.jsx("label",{children:"Preview:"}),n.jsx("img",{src:W,alt:"Preview",className:"student-avatar-large"})]}),(l==null?void 0:l.role)==="admin"&&n.jsxs("div",{className:"picture-controls",children:[n.jsx("input",{type:"file",accept:"image/*",onChange:be,style:{display:"none"},id:"profilePictureInput"}),n.jsx("label",{htmlFor:"profilePictureInput",className:"small-btn",children:"Choose Picture"}),z&&n.jsx("button",{type:"button",onClick:Ke,disabled:k,className:"small-btn",children:k?"Uploading...":"Upload Picture"}),(f==null?void 0:f.profilePicture)&&n.jsx("button",{type:"button",onClick:fe,disabled:k,className:"small-btn delete-btn",children:"Remove Picture"})]})]})]}),n.jsxs("div",{className:"form-group",children:[n.jsxs("label",{children:["First Name",(l==null?void 0:l.role)!=="admin"?" (Admin Only)":""]}),n.jsx("input",{type:"text",value:X.firstName,onChange:C=>K("firstName",C.target.value),required:!0,disabled:(l==null?void 0:l.role)!=="admin"})]}),n.jsxs("div",{className:"form-group",children:[n.jsxs("label",{children:["Middle Name",(l==null?void 0:l.role)!=="admin"?" (Admin Only)":""]}),n.jsx("input",{type:"text",value:X.middleName,onChange:C=>K("middleName",C.target.value),disabled:(l==null?void 0:l.role)!=="admin"})]}),n.jsxs("div",{className:"form-group",children:[n.jsxs("label",{children:["Last Name",(l==null?void 0:l.role)!=="admin"?" (Admin Only)":""]}),n.jsx("input",{type:"text",value:X.lastName,onChange:C=>K("lastName",C.target.value),required:!0,disabled:(l==null?void 0:l.role)!=="admin"})]}),n.jsxs("div",{className:"form-group",children:[n.jsxs("label",{children:["Gender",(l==null?void 0:l.role)!=="admin"?" (Admin Only)":""]}),n.jsxs("select",{value:X.gender,onChange:C=>K("gender",C.target.value),disabled:(l==null?void 0:l.role)!=="admin",children:[n.jsx("option",{value:"",children:"Select Gender"}),n.jsx("option",{value:"Male",children:"Male"}),n.jsx("option",{value:"Female",children:"Female"}),n.jsx("option",{value:"Other",children:"Other"})]})]}),n.jsxs("div",{className:"form-group",children:[n.jsxs("label",{children:["Date of Birth",(l==null?void 0:l.role)!=="admin"?" (Admin Only)":""]}),n.jsx("input",{type:"date",value:X.dateOfBirth,onChange:C=>K("dateOfBirth",C.target.value),required:!0,disabled:(l==null?void 0:l.role)!=="admin"})]})]}),n.jsxs("div",{className:"form-section",children:[n.jsx("h3",{children:"Address Information"}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Street Address *"}),n.jsx("input",{type:"text",value:X.streetAddress,onChange:C=>K("streetAddress",C.target.value),required:!0})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"City *"}),n.jsx("input",{type:"text",value:X.city,onChange:C=>K("city",C.target.value),required:!0})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Postal Code *"}),n.jsx("input",{type:"text",value:X.postalCode,onChange:C=>K("postalCode",C.target.value),required:!0})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Country *"}),n.jsx("input",{type:"text",value:X.country,onChange:C=>K("country",C.target.value),required:!0})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Nationality *"}),n.jsx("input",{type:"text",value:X.nationality,onChange:C=>K("nationality",C.target.value),required:!0})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Passport Number *"}),n.jsx("input",{type:"text",value:X.passportNumber,onChange:C=>K("passportNumber",C.target.value),required:!0})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Passport Expiry Date *"}),n.jsx("input",{type:"date",value:X.passportExpiryDate,onChange:C=>K("passportExpiryDate",C.target.value),required:!0})]}),n.jsxs("div",{className:"form-group",children:[n.jsxs("label",{children:["NIF Number",(l==null?void 0:l.role)!=="admin"?" (Admin Only)":""]}),n.jsx("input",{type:"text",value:X.nifNumber,onChange:C=>K("nifNumber",C.target.value),disabled:(l==null?void 0:l.role)!=="admin"})]})]}),n.jsxs("div",{className:"form-section",children:[n.jsx("h3",{children:"Academic Background"}),n.jsxs("div",{className:"form-group",children:[n.jsxs("label",{children:["Enrollment Length",(l==null?void 0:l.role)!=="admin"?" (Admin Only)":""]}),n.jsxs("select",{value:X.enrollmentLength,onChange:C=>K("enrollmentLength",C.target.value),disabled:(l==null?void 0:l.role)!=="admin",children:[n.jsx("option",{value:"",children:"Select Length"}),n.jsx("option",{value:"6 months (Residents)",children:"6 months (Residents)"}),n.jsx("option",{value:"1 year (Residents)",children:"1 year (Residents)"}),n.jsx("option",{value:"Multiple years (Residents)",children:"Multiple years (Residents)"}),n.jsx("option",{value:"1 month (Traveling family)",children:"1 month (Traveling family)"}),n.jsx("option",{value:"2 months (Traveling Family)",children:"2 months (Traveling Family)"}),n.jsx("option",{value:"3 months (Traveling Family)",children:"3 months (Traveling Family)"})]})]}),n.jsxs("div",{className:"form-group",children:[n.jsxs("label",{children:["Weekday Attendance",(l==null?void 0:l.role)!=="admin"?" (Admin Only)":""]}),n.jsxs("select",{value:X.weekdayAttendance,onChange:C=>K("weekdayAttendance",C.target.value),disabled:(l==null?void 0:l.role)!=="admin",children:[n.jsx("option",{value:"",children:"Select Attendance"}),n.jsx("option",{value:"1 day/week",children:"1 day/week"}),n.jsx("option",{value:"2 days/week",children:"2 days/week"}),n.jsx("option",{value:"3 days/week",children:"3 days/week"}),n.jsx("option",{value:"4 days/week",children:"4 days/week"}),n.jsx("option",{value:"5 days/week",children:"5 days/week"})]})]}),n.jsxs("div",{className:"form-group",children:[n.jsxs("label",{children:["Enrollment Start Date",(l==null?void 0:l.role)!=="admin"?" (Admin Only)":""]}),n.jsx("input",{type:"date",value:X.enrollmentStartDate,onChange:C=>K("enrollmentStartDate",C.target.value),disabled:(l==null?void 0:l.role)!=="admin"})]}),n.jsx("div",{className:"form-group checkbox-group",children:n.jsxs("label",{children:[n.jsx("input",{type:"checkbox",checked:X.siblings,onChange:C=>se("siblings",C.target.checked),disabled:(l==null?void 0:l.role)!=="admin"}),"Has siblings at Campus da Terra",(l==null?void 0:l.role)!=="admin"?" (Admin Only)":""]})}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"First Language"}),n.jsx("input",{type:"text",value:X.firstLanguage,onChange:C=>K("firstLanguage",C.target.value)})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"English Proficiency"}),n.jsxs("select",{value:X.englishProficiency,onChange:C=>K("englishProficiency",C.target.value),children:[n.jsx("option",{value:"",children:"Select Level"}),n.jsx("option",{value:"No prior knowledge",children:"No prior knowledge"}),n.jsx("option",{value:"Beginner",children:"Beginner"}),n.jsx("option",{value:"Intermediate",children:"Intermediate"}),n.jsx("option",{value:"Proficient",children:"Proficient"}),n.jsx("option",{value:"Fluent",children:"Fluent"})]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"English Reading & Writing"}),n.jsxs("select",{value:X.englishReadingWriting,onChange:C=>K("englishReadingWriting",C.target.value),children:[n.jsx("option",{value:"",children:"Select Level"}),n.jsx("option",{value:"No prior knowledge",children:"No prior knowledge"}),n.jsx("option",{value:"Beginner",children:"Beginner"}),n.jsx("option",{value:"Intermediate",children:"Intermediate"}),n.jsx("option",{value:"Advanced",children:"Advanced"})]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Portuguese Level"}),n.jsxs("select",{value:X.portugueseLevel,onChange:C=>K("portugueseLevel",C.target.value),children:[n.jsx("option",{value:"",children:"Select Level"}),n.jsx("option",{value:"No prior knowledge",children:"No prior knowledge"}),n.jsx("option",{value:"Beginner",children:"Beginner"}),n.jsx("option",{value:"Intermediate",children:"Intermediate"}),n.jsx("option",{value:"Proficient",children:"Proficient"}),n.jsx("option",{value:"Fluent",children:"Fluent"})]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Skills & Hobbies"}),n.jsx("textarea",{value:X.skillsHobbies,onChange:C=>K("skillsHobbies",C.target.value),rows:"3"})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Struggling Subjects"}),n.jsx("textarea",{value:X.strugglingSubjects,onChange:C=>K("strugglingSubjects",C.target.value),rows:"3"})]})]}),n.jsxs("div",{className:"form-section",children:[n.jsx("h3",{children:"Educational Approach & Curriculum"}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Approach"}),n.jsxs("select",{value:X.approach,onChange:C=>K("approach",C.target.value),children:[n.jsx("option",{value:"",children:"Select Approach"}),n.jsx("option",{value:"Unschooling",children:"Unschooling"}),n.jsx("option",{value:"Core Education",children:"Core Education"}),n.jsx("option",{value:"Qualifications for higher education",children:"Qualifications for higher education"})]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Curriculum"}),n.jsxs("select",{value:X.curriculum,onChange:C=>K("curriculum",C.target.value),children:[n.jsx("option",{value:"",children:"Select Curriculum"}),n.jsx("option",{value:"Online School",children:"Online School"}),n.jsx("option",{value:"Workbook Curriculum",children:"Workbook Curriculum"}),n.jsx("option",{value:"Mix and Match",children:"Mix and Match"})]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Curriculum Supplier"}),n.jsx("input",{type:"text",value:X.curriculumSupplier,onChange:C=>K("curriculumSupplier",C.target.value)})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Curriculum Notes"}),n.jsx("textarea",{value:X.curriculumNotes,onChange:C=>K("curriculumNotes",C.target.value),rows:"3"})]})]}),n.jsxs("div",{className:"form-section",children:[n.jsx("h3",{children:"Health & Special Needs"}),n.jsx("div",{className:"form-group checkbox-group",children:n.jsxs("label",{children:[n.jsx("input",{type:"checkbox",checked:X.behavioralChallenges,onChange:C=>se("behavioralChallenges",C.target.checked)}),"Behavioral Challenges"]})}),n.jsx("div",{className:"form-group checkbox-group",children:n.jsxs("label",{children:[n.jsx("input",{type:"checkbox",checked:X.learningDifferences,onChange:C=>se("learningDifferences",C.target.checked)}),"Learning Differences"]})}),n.jsx("div",{className:"form-group checkbox-group",children:n.jsxs("label",{children:[n.jsx("input",{type:"checkbox",checked:X.physicalLimitations,onChange:C=>se("physicalLimitations",C.target.checked)}),"Physical Limitations"]})}),n.jsx("div",{className:"form-group checkbox-group",children:n.jsxs("label",{children:[n.jsx("input",{type:"checkbox",checked:X.healthConditions,onChange:C=>se("healthConditions",C.target.checked)}),"Health Conditions"]})}),n.jsx("div",{className:"form-group checkbox-group",children:n.jsxs("label",{children:[n.jsx("input",{type:"checkbox",checked:X.dailyMedication,onChange:C=>se("dailyMedication",C.target.checked)}),"Daily Medication"]})}),n.jsx("div",{className:"form-group checkbox-group",children:n.jsxs("label",{children:[n.jsx("input",{type:"checkbox",checked:X.medicalTreatments,onChange:C=>se("medicalTreatments",C.target.checked)}),"Medical Treatments"]})}),n.jsx("div",{className:"form-group checkbox-group",children:n.jsxs("label",{children:[n.jsx("input",{type:"checkbox",checked:X.allergies,onChange:C=>se("allergies",C.target.checked)}),"Allergies"]})}),n.jsx("div",{className:"form-group checkbox-group",children:n.jsxs("label",{children:[n.jsx("input",{type:"checkbox",checked:X.lifeThreatening,onChange:C=>se("lifeThreatening",C.target.checked)}),"Life Threatening Conditions"]})}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Special Needs Details"}),n.jsx("textarea",{value:X.specialNeedsDetails,onChange:C=>K("specialNeedsDetails",C.target.value),rows:"3",placeholder:"Please elaborate on any special needs..."})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Medical Details"}),n.jsx("textarea",{value:X.medicalDetails,onChange:C=>K("medicalDetails",C.target.value),rows:"3",placeholder:"Please elaborate on any medical conditions..."})]})]}),(l==null?void 0:l.role)!=="tutor"&&n.jsxs("div",{className:"form-section",children:[n.jsx("h3",{children:"Pricing & Payment"}),n.jsxs("div",{className:"form-group",children:[n.jsxs("label",{children:["Pricing Category",(l==null?void 0:l.role)!=="admin"?" (Admin Only)":""]}),n.jsxs("select",{value:X.pricing,onChange:C=>K("pricing",C.target.value),disabled:(l==null?void 0:l.role)!=="admin",children:[n.jsx("option",{value:"Residents",children:"Residents"}),n.jsx("option",{value:"Financial Hardship",children:"Financial Hardship"}),n.jsx("option",{value:"Traveling Families",children:"Traveling Families"}),n.jsx("option",{value:"Founding Member",children:"Founding Member"})]})]}),n.jsxs("div",{className:"form-group",children:[n.jsxs("label",{children:["Discount",(l==null?void 0:l.role)!=="admin"?" (Admin Only)":""]}),n.jsxs("select",{value:X.discount,onChange:C=>K("discount",C.target.value),disabled:(l==null?void 0:l.role)!=="admin",children:[n.jsx("option",{value:"None",children:"None"}),n.jsx("option",{value:"Sibling Discount",children:"Sibling Discount"}),n.jsx("option",{value:"Early Payment Discount",children:"Early Payment Discount"}),n.jsx("option",{value:"Referral Discount",children:"Referral Discount"}),n.jsx("option",{value:"Other",children:"Other"})]})]}),n.jsxs("div",{className:"form-group",children:[n.jsxs("label",{children:["Payment Method",(l==null?void 0:l.role)!=="admin"?" (Admin Only)":""]}),n.jsxs("select",{value:X.paymentMethod,onChange:C=>K("paymentMethod",C.target.value),disabled:(l==null?void 0:l.role)!=="admin",children:[n.jsx("option",{value:"Bank Transfer",children:"Bank Transfer"}),n.jsx("option",{value:"Cash",children:"Cash"}),n.jsx("option",{value:"SEPA direct debit",children:"SEPA direct debit"}),n.jsx("option",{value:"MBWay",children:"MBWay"}),n.jsx("option",{value:"Stripe",children:"Stripe"}),n.jsx("option",{value:"Bitcoin",children:"Bitcoin"}),n.jsx("option",{value:"Other",children:"Other"})]})]}),n.jsx("div",{className:"form-group checkbox-group",children:n.jsxs("label",{children:[n.jsx("input",{type:"checkbox",checked:X.billingAddressSameAsHome,onChange:C=>se("billingAddressSameAsHome",C.target.checked),disabled:(l==null?void 0:l.role)!=="admin"}),"Billing Address Same as Home",(l==null?void 0:l.role)!=="admin"?" (Admin Only)":""]})}),!X.billingAddressSameAsHome&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"form-group",children:[n.jsxs("label",{children:["Billing Street Address",(l==null?void 0:l.role)!=="admin"?" (Admin Only)":""]}),n.jsx("input",{type:"text",value:X.billingStreetAddress,onChange:C=>K("billingStreetAddress",C.target.value),disabled:(l==null?void 0:l.role)!=="admin"})]}),n.jsxs("div",{className:"form-group",children:[n.jsxs("label",{children:["Billing City",(l==null?void 0:l.role)!=="admin"?" (Admin Only)":""]}),n.jsx("input",{type:"text",value:X.billingCity,onChange:C=>K("billingCity",C.target.value),disabled:(l==null?void 0:l.role)!=="admin"})]}),n.jsxs("div",{className:"form-group",children:[n.jsxs("label",{children:["Billing Postal Code",(l==null?void 0:l.role)!=="admin"?" (Admin Only)":""]}),n.jsx("input",{type:"text",value:X.billingPostalCode,onChange:C=>K("billingPostalCode",C.target.value),disabled:(l==null?void 0:l.role)!=="admin"})]}),n.jsxs("div",{className:"form-group",children:[n.jsxs("label",{children:["Billing Country",(l==null?void 0:l.role)!=="admin"?" (Admin Only)":""]}),n.jsx("input",{type:"text",value:X.billingCountry,onChange:C=>K("billingCountry",C.target.value),disabled:(l==null?void 0:l.role)!=="admin"})]})]}),n.jsxs("div",{className:"form-group",children:[n.jsxs("label",{children:["Additional Notes",(l==null?void 0:l.role)!=="admin"?" (Admin Only)":""]}),n.jsx("textarea",{value:X.additionalNotes,onChange:C=>K("additionalNotes",C.target.value),rows:"3",disabled:(l==null?void 0:l.role)!=="admin"})]}),n.jsx("div",{className:"form-group checkbox-group",children:n.jsxs("label",{children:[n.jsx("input",{type:"checkbox",checked:X.signedTuitionAgreement,onChange:C=>se("signedTuitionAgreement",C.target.checked),disabled:(l==null?void 0:l.role)!=="admin"}),"Signed Tuition Agreement",(l==null?void 0:l.role)!=="admin"?" (Admin Only)":""]})})]}),(l==null?void 0:l.role)==="admin"&&n.jsxs("div",{className:"form-section",children:[n.jsx("h3",{children:"Referral & Motivation"}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Referral Source"}),n.jsx("input",{type:"text",value:X.referralSource,onChange:C=>K("referralSource",C.target.value)})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Motivation for Joining"}),n.jsx("div",{className:"checkbox-list",children:["Alternative / more holistic education","Democratic / self-directed learning approach","To be part of a community","Quality of teachers","The values and culture of the school","The campus and natural environment","A sense of adventure / Madeira","Traveling family looking for short-term enrollments","Other"].map(C=>n.jsx("div",{className:"form-group checkbox-group",children:n.jsxs("label",{children:[n.jsx("input",{type:"checkbox",checked:X.motivationForJoining.includes(C),onChange:ue=>{ue.target.checked?oe(he=>({...he,motivationForJoining:[...he.motivationForJoining,C]})):oe(he=>({...he,motivationForJoining:he.motivationForJoining.filter(ke=>ke!==C)}))}}),C]})},C))})]})]}),n.jsxs("div",{className:"form-section",children:[n.jsx("h3",{children:"Consent & Agreements"}),n.jsx("div",{className:"form-group checkbox-group",children:n.jsxs("label",{children:[n.jsx("input",{type:"checkbox",checked:X.photoConsent,onChange:C=>se("photoConsent",C.target.checked),disabled:(l==null?void 0:l.role)!=="admin"&&(f==null?void 0:f.photoConsent)}),"Photo Consent",(l==null?void 0:l.role)!=="admin"&&(f!=null&&f.photoConsent)?" (Already Consented)":""]})}),n.jsx("div",{className:"form-group checkbox-group",children:n.jsxs("label",{children:[n.jsx("input",{type:"checkbox",checked:X.contactListConsent,onChange:C=>se("contactListConsent",C.target.checked),disabled:(l==null?void 0:l.role)!=="admin"&&(f==null?void 0:f.contactListConsent)}),"Contact List Consent",(l==null?void 0:l.role)!=="admin"&&(f!=null&&f.contactListConsent)?" (Already Consented)":""]})}),n.jsx("div",{className:"form-group checkbox-group",children:n.jsxs("label",{children:[n.jsx("input",{type:"checkbox",checked:X.personalDataConsent,onChange:C=>se("personalDataConsent",C.target.checked),disabled:(l==null?void 0:l.role)!=="admin"&&(f==null?void 0:f.personalDataConsent)}),"Personal Data Consent",(l==null?void 0:l.role)!=="admin"&&(f!=null&&f.personalDataConsent)?" (Already Consented)":""]})}),n.jsx("div",{className:"form-group checkbox-group",children:n.jsxs("label",{children:[n.jsx("input",{type:"checkbox",checked:X.termsAndConditions,onChange:C=>se("termsAndConditions",C.target.checked),disabled:(l==null?void 0:l.role)!=="admin"&&(f==null?void 0:f.termsAndConditions)}),"Terms and Conditions Accepted",(l==null?void 0:l.role)!=="admin"&&(f!=null&&f.termsAndConditions)?" (Already Accepted)":""]})}),(l==null?void 0:l.role)!=="admin"&&((f==null?void 0:f.photoConsent)||(f==null?void 0:f.contactListConsent)||(f==null?void 0:f.personalDataConsent)||(f==null?void 0:f.termsAndConditions))&&n.jsx("div",{className:"note",style:{marginTop:"1rem",fontSize:"0.9rem",color:"#666",fontStyle:"italic"},children:"* To remove any given consent, please contact an administrator."})]})]}),n.jsxs("div",{className:"form-actions",children:[n.jsx("button",{type:"submit",children:"Save Student"}),n.jsx("button",{type:"button",onClick:re,children:"Cancel"})]})]}):n.jsx("div",{className:"student-detail",children:n.jsxs("div",{className:"detail-sections",children:[n.jsxs("div",{className:"detail-section",children:[n.jsx("h3",{children:"Personal Information"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Full Name:"})," ",f==null?void 0:f.firstName," ",f==null?void 0:f.middleName," ",f==null?void 0:f.lastName]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Gender:"})," ",(f==null?void 0:f.gender)||"Not set"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Date of Birth:"})," ",f!=null&&f.dateOfBirth?new Date(f.dateOfBirth).toLocaleDateString("de-DE",{year:"numeric",month:"2-digit",day:"2-digit"}):"Not set"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Age:"})," ",f!=null&&f.dateOfBirth?Math.floor((new Date-new Date(f.dateOfBirth))/(365.25*24*60*60*1e3)):"N/A"]})]}),n.jsxs("div",{className:"detail-section",children:[n.jsx("h3",{children:"Address Information"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Street Address:"})," ",(f==null?void 0:f.streetAddress)||"Not set"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"City:"})," ",(f==null?void 0:f.city)||"Not set"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Postal Code:"})," ",(f==null?void 0:f.postalCode)||"Not set"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Country:"})," ",(f==null?void 0:f.country)||"Not set"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Nationality:"})," ",(f==null?void 0:f.nationality)||"Not set"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Passport Number:"})," ",(f==null?void 0:f.passportNumber)||"Not set"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Passport Expiry:"})," ",f!=null&&f.passportExpiryDate?new Date(f.passportExpiryDate).toLocaleDateString("de-DE",{year:"numeric",month:"2-digit",day:"2-digit"}):"Not set"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"NIF Number:"})," ",(f==null?void 0:f.nifNumber)||"Not set"]})]}),n.jsxs("div",{className:"detail-section",children:[n.jsx("h3",{children:"Academic Information"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Enrollment Length:"})," ",(f==null?void 0:f.enrollmentLength)||"Not set"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Weekday Attendance:"})," ",(f==null?void 0:f.weekdayAttendance)||"Not set"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Enrollment Start Date:"})," ",f!=null&&f.enrollmentStartDate?new Date(f.enrollmentStartDate).toLocaleDateString("de-DE",{year:"numeric",month:"2-digit",day:"2-digit"}):"Not set"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Has siblings at Campus da Terra:"})," ",f!=null&&f.siblings?"Yes":"No"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"First Language:"})," ",(f==null?void 0:f.firstLanguage)||"Not set"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"English Proficiency:"})," ",(f==null?void 0:f.englishProficiency)||"Not set"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"English Reading & Writing:"})," ",(f==null?void 0:f.englishReadingWriting)||"Not set"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Portuguese Level:"})," ",(f==null?void 0:f.portugueseLevel)||"Not set"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Skills & Hobbies:"})," ",(f==null?void 0:f.skillsHobbies)||"Not set"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Struggling Subjects:"})," ",(f==null?void 0:f.strugglingSubjects)||"Not set"]})]}),n.jsxs("div",{className:"detail-section",children:[n.jsx("h3",{children:"Educational Approach & Curriculum"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Approach:"})," ",(f==null?void 0:f.approach)||"Not set"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Curriculum:"})," ",(f==null?void 0:f.curriculum)||"Not set"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Curriculum Supplier:"})," ",(f==null?void 0:f.curriculumSupplier)||"Not set"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Curriculum Notes:"})," ",(f==null?void 0:f.curriculumNotes)||"Not set"]})]}),n.jsxs("div",{className:"detail-section",children:[n.jsx("h3",{children:"Health & Special Needs"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Behavioral Challenges:"})," ",f!=null&&f.behavioralChallenges?"Yes":"No"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Learning Differences:"})," ",f!=null&&f.learningDifferences?"Yes":"No"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Physical Limitations:"})," ",f!=null&&f.physicalLimitations?"Yes":"No"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Health Conditions:"})," ",f!=null&&f.healthConditions?"Yes":"No"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Daily Medication:"})," ",f!=null&&f.dailyMedication?"Yes":"No"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Medical Treatments:"})," ",f!=null&&f.medicalTreatments?"Yes":"No"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Allergies:"})," ",f!=null&&f.allergies?"Yes":"No"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Life Threatening Conditions:"})," ",f!=null&&f.lifeThreatening?"Yes":"No"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Special Needs Details:"})," ",(f==null?void 0:f.specialNeedsDetails)||"Not set"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Medical Details:"})," ",(f==null?void 0:f.medicalDetails)||"Not set"]})]}),(l==null?void 0:l.role)==="admin"&&n.jsxs("div",{className:"detail-section",children:[n.jsx("h3",{children:"Pricing & Payment"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Pricing Category:"})," ",(f==null?void 0:f.pricing)||"Not set"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Discount:"})," ",(f==null?void 0:f.discount)||"Not set"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Payment Method:"})," ",(f==null?void 0:f.paymentMethod)||"Not set"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Billing Address Same as Home:"})," ",f!=null&&f.billingAddressSameAsHome?"Yes":"No"]}),!(f!=null&&f.billingAddressSameAsHome)&&n.jsxs(n.Fragment,{children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Billing Street Address:"})," ",(f==null?void 0:f.billingStreetAddress)||"Not set"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Billing City:"})," ",(f==null?void 0:f.billingCity)||"Not set"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Billing Postal Code:"})," ",(f==null?void 0:f.billingPostalCode)||"Not set"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Billing Country:"})," ",(f==null?void 0:f.billingCountry)||"Not set"]})]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Additional Notes:"})," ",(f==null?void 0:f.additionalNotes)||"Not set"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Signed Tuition Agreement:"})," ",f!=null&&f.signedTuitionAgreement?"Yes":"No"]})]}),(l==null?void 0:l.role)==="admin"&&n.jsxs("div",{className:"detail-section",children:[n.jsx("h3",{children:"Referral & Motivation"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Referral Source:"})," ",(f==null?void 0:f.referralSource)||"Not set"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Motivation for Joining:"})," ",((ge=f==null?void 0:f.motivationForJoining)==null?void 0:ge.length)>0?f.motivationForJoining.join(", "):"Not set"]})]}),n.jsxs("div",{className:"detail-section",children:[n.jsx("h3",{children:"Consent & Agreements"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Photo Consent:"})," ",f!=null&&f.photoConsent?"Yes":"No"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Contact List Consent:"})," ",f!=null&&f.contactListConsent?"Yes":"No"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Personal Data Consent:"})," ",f!=null&&f.personalDataConsent?"Yes":"No"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Terms and Conditions:"})," ",f!=null&&f.termsAndConditions?"Accepted":"Not accepted"]})]})]})})]})]}):n.jsx("div",{className:"access-denied",children:n.jsxs("div",{className:"access-denied-content",children:[n.jsx("h2",{children:"Please log in to access this page"}),n.jsx("p",{children:"You need to be logged in to view students."})]})})},hN=({user:l,onView:s,onEdit:o,onDelete:c})=>{var d;return n.jsxs("div",{className:"user-card",children:[n.jsx("h3",{children:l.name||l.username}),n.jsxs("p",{children:[n.jsx("strong",{children:"Username:"})," ",l.username]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Email:"})," ",l.email||"Not set"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Role:"})," ",l.role]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Students:"})," ",((d=l.students)==null?void 0:d.length)||0]}),n.jsxs("div",{className:"user-actions",children:[n.jsx("button",{className:"small-btn",onClick:()=>s(l),children:"View"}),n.jsx("button",{className:"small-btn",onClick:()=>o(l),children:"Edit"}),n.jsx("button",{className:"delete-btn small-btn",onClick:()=>c(l.id||l._id),children:"Delete"})]})]},l.id||l._id)},mN=({user:l,setMessage:s,setClassName:o})=>{const c=ta(),[d,h]=b.useState([]),[m,f]=b.useState(null),[y,g]=b.useState(!1),[v,x]=b.useState(!1),[S,R]=b.useState(!0),N=(l==null?void 0:l.role)==="admin",[w,E]=b.useState({username:"",password:"",email:"",contactNumber:"",role:"",name:"",parentNationality:"",parentPassportNumber:"",parentPassportExpiryDate:"",parentNifNumber:"",parentStreetAddress:"",parentCity:"",parentPostalCode:"",parentCountry:"",emergencyContactRelationship:"",emergencyContactName:"",emergencyContactNumber:""}),O=b.useCallback(async()=>{try{R(!0);const _=await Be.getAll();h(_)}catch{s("Error fetching users"),o("error"),setTimeout(()=>s(null),5e3)}finally{R(!1)}},[s,o]);b.useEffect(()=>{l!=null&&l.token&&(Be.setToken(l.token),O())},[l,O]);const H=()=>{E({username:"",password:"",email:"",contactNumber:"",role:"",name:"",parentNationality:"",parentPassportNumber:"",parentPassportExpiryDate:"",parentNifNumber:"",parentStreetAddress:"",parentCity:"",parentPostalCode:"",parentCountry:"",emergencyContactRelationship:"",emergencyContactName:"",emergencyContactNumber:""})},z=_=>{E({username:_.username||"",password:"",email:_.email||"",contactNumber:_.contactNumber||"",role:_.role||"",name:_.name||"",parentNationality:_.parentNationality||"",parentPassportNumber:_.parentPassportNumber||"",parentPassportExpiryDate:_.parentPassportExpiryDate?_.parentPassportExpiryDate.split("T")[0]:"",parentNifNumber:_.parentNifNumber||"",parentStreetAddress:_.parentStreetAddress||"",parentCity:_.parentCity||"",parentPostalCode:_.parentPostalCode||"",parentCountry:_.parentCountry||"",emergencyContactRelationship:_.emergencyContactRelationship||"",emergencyContactName:_.emergencyContactName||"",emergencyContactNumber:_.emergencyContactNumber||""})},J=async _=>{var T,q;_.preventDefault();try{if(y){const te=await Be.create(w);h(ie=>[...ie,te]),s("User created successfully"),o("success")}else if(v&&m){const te=await Be.update(m.id,w);h(ie=>ie.map(D=>D.id===m.id?te:D)),f(te),s("User updated successfully"),o("success")}x(!1),g(!1),window.scrollTo({top:0,behavior:"smooth"}),setTimeout(()=>{s(null),o("error")},5e3)}catch(te){const ie=(q=(T=te.response)==null?void 0:T.data)==null?void 0:q.error;s(ie||"Error saving user"),o("error"),setTimeout(()=>s(null),5e3)}},W=()=>{x(!1),g(!1),y&&f(null),window.scrollTo({top:0,behavior:"smooth"})},L=()=>{H(),g(!0),f(null),x(!1)},k=_=>{z(_),f(_),x(!0),g(!1)},P=_=>{f(_),x(!1),g(!1)},U=(_,T)=>prompt(`To confirm deletion of this ${_}, please type "DELETE" below:

${T}

Type "DELETE" to confirm:`)==="DELETE",ee=async _=>{const T=d.find(te=>(te.id||te._id)===_);if(!(!T||!U("user",`${T.name||T.username} (${T.email})`)))try{await Be.remove(_),h(te=>te.filter(ie=>(ie.id||ie._id)!==_)),s("User deleted successfully"),o("success"),setTimeout(()=>{s(null),o("error")},5e3)}catch{s("Error deleting user"),o("error"),setTimeout(()=>s(null),5e3)}},I=(_,T)=>{E(q=>({...q,[_]:T}))},ce=_=>{c("/students",{state:{selectedStudent:_,mode:"view"}})},X=_=>{c("/students",{state:{selectedStudent:_,mode:"edit"}})},oe=async _=>{var te;let T=null;for(const ie of d)if(ie.students&&(T=ie.students.find(D=>(D._id||D.id)===_),T))break;if(!T){s("Student not found"),o("error"),setTimeout(()=>s(null),5e3);return}if(U("student",`${T.firstName} ${T.lastName}`))try{await Ae.remove(_),h(d.map(ie=>{var D;return{...ie,students:((D=ie.students)==null?void 0:D.filter($=>$._id!==_))||[]}})),m&&f({...m,students:((te=m.students)==null?void 0:te.filter(ie=>ie._id!==_))||[]}),s("Student deleted successfully"),o("success"),setTimeout(()=>{s(null),o("error")},5e3)}catch{s("Error deleting student"),o("error"),setTimeout(()=>s(null),5e3)}};return(l==null?void 0:l.role)!=="admin"?n.jsxs("div",{children:[n.jsx("h2",{children:"Access Denied"}),n.jsx("p",{children:"You need admin privileges to access this page."})]}):S?n.jsx("div",{className:"loading",children:"Loading users..."}):n.jsxs("div",{children:[n.jsx("h1",{children:y?"Add New User":v?`Edit ${m==null?void 0:m.name}`:!y&&!v&&!m?"Users":`${m==null?void 0:m.name}`}),!y&&!v&&!m?n.jsxs("div",{className:"users-container",children:[N&&n.jsx(n.Fragment,{children:n.jsx("div",{className:"users-actions",children:n.jsx("button",{className:"outlined",onClick:L,children:"Add New User"})})}),d.length===0?n.jsx("p",{children:"No users found."}):n.jsx("div",{className:"users-list",children:d.map(_=>n.jsx(hN,{user:_,onView:P,onEdit:k,onDelete:ee},_.id))})]}):y?n.jsxs("div",{className:"profile-detail-container",children:[n.jsx("div",{className:"profile-actions",children:n.jsx("button",{onClick:()=>{g(!1),f(null)},children:" Back to Users List"})}),n.jsxs("form",{onSubmit:J,className:"profile-form",children:[n.jsx("h3",{children:"Create New User"}),n.jsxs("div",{className:"form-sections",children:[n.jsxs("div",{className:"form-section",children:[n.jsx("h3",{children:"Login Information"}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Username:"}),n.jsx("input",{type:"text",value:w.username,onChange:_=>I("username",_.target.value),required:!0})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Password:"}),n.jsx("input",{type:"password",value:w.password,onChange:_=>I("password",_.target.value),required:!0})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Role:"}),n.jsxs("select",{value:w.role,onChange:_=>I("role",_.target.value),required:!0,children:[n.jsx("option",{value:"",children:"Select Role"}),n.jsx("option",{value:"user",children:"User"}),n.jsx("option",{value:"tutor",children:"Tutor"}),n.jsx("option",{value:"admin",children:"Admin"})]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Email:"}),n.jsx("input",{type:"email",value:w.email,onChange:_=>I("email",_.target.value),required:!0})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Phone:"}),n.jsx("input",{type:"tel",value:w.contactNumber,onChange:_=>I("contactNumber",_.target.value)})]})]}),n.jsxs("div",{className:"form-section",children:[n.jsx("h3",{children:"Personal Information"}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Full Name:"}),n.jsx("input",{type:"text",value:w.name,onChange:_=>I("name",_.target.value)})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Nationality:"}),n.jsx("input",{type:"text",value:w.parentNationality,onChange:_=>I("parentNationality",_.target.value)})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Passport Number:"}),n.jsx("input",{type:"text",value:w.parentPassportNumber,onChange:_=>I("parentPassportNumber",_.target.value)})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Passport Expiry:"}),n.jsx("input",{type:"date",value:w.parentPassportExpiryDate,onChange:_=>I("parentPassportExpiryDate",_.target.value)})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"NIF Number:"}),n.jsx("input",{type:"text",value:w.parentNifNumber,onChange:_=>I("parentNifNumber",_.target.value)})]})]}),n.jsxs("div",{className:"form-section",children:[n.jsx("h3",{children:"Address"}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Street Address:"}),n.jsx("input",{type:"text",value:w.parentStreetAddress,onChange:_=>I("parentStreetAddress",_.target.value)})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"City:"}),n.jsx("input",{type:"text",value:w.parentCity,onChange:_=>I("parentCity",_.target.value)})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Postal Code:"}),n.jsx("input",{type:"text",value:w.parentPostalCode,onChange:_=>I("parentPostalCode",_.target.value)})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Country:"}),n.jsx("input",{type:"text",value:w.parentCountry,onChange:_=>I("parentCountry",_.target.value)})]})]}),n.jsxs("div",{className:"form-section",children:[n.jsx("h3",{children:"Emergency Contact"}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Relationship:"}),n.jsx("input",{type:"text",value:w.emergencyContactRelationship,onChange:_=>I("emergencyContactRelationship",_.target.value)})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Name:"}),n.jsx("input",{type:"text",value:w.emergencyContactName,onChange:_=>I("emergencyContactName",_.target.value)})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Phone Number:"}),n.jsx("input",{type:"tel",value:w.emergencyContactNumber,onChange:_=>I("emergencyContactNumber",_.target.value)})]})]})]}),n.jsxs("div",{className:"form-actions",children:[n.jsx("button",{type:"submit",children:"Create User"}),n.jsx("button",{type:"button",onClick:W,children:"Cancel"})]})]})]}):n.jsxs("div",{className:"profile-detail-container",children:[n.jsxs("div",{className:"profile-actions",children:[n.jsx("button",{className:"outlined",onClick:()=>{f(null),x(!1),g(!1)},children:" Back to Users List"}),!v&&!y&&m.id&&n.jsx("button",{className:"outlined",onClick:()=>k(m),children:"Edit User"})]}),!v&&!y?n.jsxs("div",{className:"detail-sections",children:[n.jsxs("div",{className:"detail-section",children:[n.jsx("h3",{children:"Login and Contact"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Username:"})," ",m.username]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Password:"})," "]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Role:"})," ",m.role]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Email:"})," ",m.email||"Not set"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Phone:"})," ",m.contactNumber||"Not set"]})]}),n.jsxs("div",{className:"detail-section",children:[n.jsx("h3",{children:"Personal Information"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Full Name:"})," ",m.name||"Not set"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Nationality:"})," ",m.parentNationality||"Not set"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Passport Number:"})," ",m.parentPassportNumber||"Not set"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Passport Expiry:"})," ",m.parentPassportExpiryDate?new Date(m.parentPassportExpiryDate).toLocaleDateString("de-DE",{year:"numeric",month:"2-digit",day:"2-digit"}):"Not set"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"NIF Number:"})," ",m.parentNifNumber||"Not set"]})]}),n.jsxs("div",{className:"detail-section",children:[n.jsx("h3",{children:"Address"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Street Address:"})," ",m.parentStreetAddress||"Not set"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"City:"})," ",m.parentCity||"Not set"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Postal Code:"})," ",m.parentPostalCode||"Not set"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Country:"})," ",m.parentCountry||"Not set"]})]}),n.jsxs("div",{className:"detail-section",children:[n.jsx("h3",{children:"Emergency Contact"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Relationship:"})," ",m.emergencyContactRelationship||"Not set"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Name:"})," ",m.emergencyContactName||"Not set"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Phone Number:"})," ",m.emergencyContactNumber||"Not set"]})]}),m.students&&m.students.length>0&&n.jsxs("div",{className:"detail-section",children:[n.jsxs("h3",{children:["Students (",m.students.length,")"]}),n.jsx("div",{className:"students-list",children:m.students.map(_=>n.jsx(np,{student:_,onView:ce,onEdit:X,onDelete:oe,user:l},_._id))})]})]}):v?n.jsxs("form",{onSubmit:J,className:"profile-form",children:[n.jsxs("div",{className:"form-sections",children:[n.jsxs("div",{className:"form-section",children:[n.jsx("h3",{children:"Login Information"}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Username"}),n.jsx("input",{type:"text",value:w.username,onChange:_=>I("username",_.target.value),required:!0})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Password"}),n.jsx("input",{type:"password",value:w.password,onChange:_=>I("password",_.target.value),placeholder:"Leave blank to keep current password"})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Role"}),n.jsxs("select",{value:w.role,onChange:_=>I("role",_.target.value),required:!0,children:[n.jsx("option",{value:"",children:"Select Role"}),n.jsx("option",{value:"user",children:"User"}),n.jsx("option",{value:"tutor",children:"Tutor"}),n.jsx("option",{value:"admin",children:"Admin"})]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Email"}),n.jsx("input",{type:"email",value:w.email,onChange:_=>I("email",_.target.value)})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Phone"}),n.jsx("input",{type:"tel",value:w.contactNumber,onChange:_=>I("contactNumber",_.target.value)})]})]}),n.jsxs("div",{className:"form-section",children:[n.jsx("h3",{children:"Personal Information"}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Full Name"}),n.jsx("input",{type:"text",value:w.name,onChange:_=>I("name",_.target.value)})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Nationality"}),n.jsx("input",{type:"text",value:w.parentNationality,onChange:_=>I("parentNationality",_.target.value)})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Passport Number"}),n.jsx("input",{type:"text",value:w.parentPassportNumber,onChange:_=>I("parentPassportNumber",_.target.value)})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Passport Expiry"}),n.jsx("input",{type:"date",value:w.parentPassportExpiryDate,onChange:_=>I("parentPassportExpiryDate",_.target.value)})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"NIF Number"}),n.jsx("input",{type:"text",value:w.parentNifNumber,onChange:_=>I("parentNifNumber",_.target.value)})]})]}),n.jsxs("div",{className:"form-section",children:[n.jsx("h3",{children:"Address"}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Street Address"}),n.jsx("input",{type:"text",value:w.parentStreetAddress,onChange:_=>I("parentStreetAddress",_.target.value)})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"City"}),n.jsx("input",{type:"text",value:w.parentCity,onChange:_=>I("parentCity",_.target.value)})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Postal Code"}),n.jsx("input",{type:"text",value:w.parentPostalCode,onChange:_=>I("parentPostalCode",_.target.value)})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Country"}),n.jsx("input",{type:"text",value:w.parentCountry,onChange:_=>I("parentCountry",_.target.value)})]})]}),n.jsxs("div",{className:"form-section",children:[n.jsx("h3",{children:"Emergency Contact"}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Relationship"}),n.jsx("input",{type:"text",value:w.emergencyContactRelationship,onChange:_=>I("emergencyContactRelationship",_.target.value)})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Name"}),n.jsx("input",{type:"text",value:w.emergencyContactName,onChange:_=>I("emergencyContactName",_.target.value)})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Phone Number"}),n.jsx("input",{type:"tel",value:w.emergencyContactNumber,onChange:_=>I("emergencyContactNumber",_.target.value)})]})]})]}),n.jsxs("div",{className:"form-actions",children:[n.jsx("button",{type:"submit",children:"Save"}),n.jsx("button",{type:"button",onClick:W,children:"Cancel"})]})]}):null]})]})},pN=({user:l,setMessage:s,setClassName:o})=>{const[c,d]=b.useState({}),h=(g,v)=>{const x=JSON.stringify(g,null,2),S="data:application/json;charset=utf-8,"+encodeURIComponent(x),R=document.createElement("a");R.setAttribute("href",S),R.setAttribute("download",v),R.click()},m=async()=>{var g,v;d(x=>({...x,student:!0}));try{Ae.setToken(l.token);const x=await Ae.getTemplate();h(x,"student-template.json"),s("Student template downloaded successfully"),o("success")}catch(x){const S=((v=(g=x.response)==null?void 0:g.data)==null?void 0:v.error)||x.message||"Failed to download template";s(`Failed to download student template: ${S}`),o("error")}finally{d(x=>({...x,student:!1})),setTimeout(()=>s(null),5e3)}},f=async()=>{d(g=>({...g,user:!0}));try{Be.setToken(l.token);const g=await Be.getTemplate();h(g,"user-template.json"),s("User template downloaded successfully"),o("success")}catch{s("Failed to download user template"),o("error")}finally{d(g=>({...g,user:!1})),setTimeout(()=>s(null),5e3)}},y=()=>{d(g=>({...g,combined:!0}));try{h({user:{username:"",password:"",email:"",role:"user",name:"",contactNumber:"",parentNationality:"",parentPassportNumber:"",parentPassportExpiryDate:"",parentNifNumber:"",parentStreetAddress:"",parentCity:"",parentPostalCode:"",parentCountry:"",emergencyContactRelationship:"",emergencyContactName:"",emergencyContactNumber:""},students:[{firstName:"",middleName:"",lastName:"",gender:"Other",dateOfBirth:"",streetAddress:"",city:"",postalCode:"",country:"",nationality:"",passportNumber:"",passportExpiryDate:"",nifNumber:"",enrollmentLength:"1 year (Residents)",weekdayAttendance:"5 days/week",enrollmentStartDate:"",siblings:!1,firstLanguage:"",englishProficiency:"No prior knowledge",englishReadingWriting:"No prior knowledge",portugueseLevel:"No prior knowledge"}]},"user-with-students-template.json"),s("Combined template downloaded successfully"),o("success")}catch{s("Failed to download combined template"),o("error")}finally{d(g=>({...g,combined:!1})),setTimeout(()=>s(null),5e3)}};return n.jsxs("div",{className:"admin-section",children:[n.jsxs("div",{className:"section-header",children:[n.jsx("h2",{children:"Template Downloads"}),n.jsx("p",{children:"Download JSON templates for data imports"})]}),n.jsxs("div",{className:"admin-info",children:[n.jsx("h3",{children:"Template Information"}),n.jsxs("ul",{children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Student Template:"})," For importing individual students (requires user assignment)"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"User Template:"})," For importing users/parents"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Combined Template:"})," For importing a user with their students in one operation"]})]})]}),n.jsx("div",{className:"admin-actions",children:n.jsxs("div",{className:"template-category",children:[n.jsx("h3",{children:"Templates"}),n.jsx("button",{className:"small-btn",onClick:m,disabled:c.student,children:c.student?"Downloading...":"Download Student Template"}),n.jsx("button",{className:"small-btn",onClick:f,disabled:c.user,children:c.user?"Downloading...":"Download User Template"}),n.jsx("button",{className:"small-btn",onClick:y,disabled:c.combined,children:c.combined?"Downloading...":"Download User+Students Template"})]})})]})},In=({isOpen:l,onClose:s,onImport:o,onBackupImport:c,templateType:d="user",title:h="Import from JSON",multiple:m=!1,users:f=[],isLoading:y=!1})=>{const[g,v]=b.useState(""),[x,S]=b.useState(null),[R,N]=b.useState([]),[w,E]=b.useState(!1),[O,H]=b.useState(""),[z,J]=b.useState(!1),[W,L]=b.useState("skip"),k=T=>{T.preventDefault(),T.stopPropagation(),T.type==="dragenter"||T.type==="dragover"?E(!0):T.type==="dragleave"&&E(!1)},P=T=>{T.preventDefault(),T.stopPropagation(),E(!1),T.dataTransfer.files&&T.dataTransfer.files[0]&&ee(T.dataTransfer.files[0])},U=T=>{T.target.files&&T.target.files[0]&&ee(T.target.files[0])},ee=T=>{if(T.type!=="application/json"){N(["Please upload a JSON file"]);return}const q=new FileReader;q.onload=te=>{const ie=te.target.result;v(ie),ce(ie)},q.readAsText(T)},I=T=>{const q=T.target.value;v(q),q?ce(q):(S(null),N([]))},ce=T=>{try{const q=JSON.parse(T);N([]);const te=q._metadata&&q._metadata.exportType;if(J(te),te){if(d==="student"&&q._metadata.exportType!=="students"){N([`This backup contains ${q._metadata.exportType} data, but you're trying to import students`]),S(null);return}if(d==="user"&&q._metadata.exportType!=="users"){N([`This backup contains ${q._metadata.exportType} data, but you're trying to import users`]),S(null);return}S(q)}else d==="user"?m&&!Array.isArray(q)?S({users:[q]}):m&&Array.isArray(q)?S({users:q}):(!m&&q.users,S(q)):d==="student"?m&&!Array.isArray(q)?S({students:[q]}):m&&Array.isArray(q)?S({students:q}):(!m&&q.students,S(q)):d==="userWithStudents"&&S(q)}catch(q){N(["Invalid JSON format: "+q.message]),S(null)}},X=()=>{x&&(z&&c?c(x,W):d==="student"&&O?o(x,O):o(x),oe())},oe=()=>{v(""),S(null),N([]),E(!1),H(""),J(!1),L("skip"),s()},_=()=>{var T,q,te,ie,D,$,F,K,se,ve,me,Pe,re,be,Ke,fe;if(!x)return null;if(z){const ge=x._metadata;let C=[],ue="Record";if(d==="user"&&x.users)C=Array.isArray(x.users)?x.users:x.users.data||[],ue="User";else if(d==="student"&&x.students)C=Array.isArray(x.students)?x.students:x.students.data||[],ue="Student";else if(d==="system-backup"){const he=((q=(T=x.users)==null?void 0:T.data)==null?void 0:q.length)||0,ke=((ie=(te=x.students)==null?void 0:te.data)==null?void 0:ie.length)||0,Oe=(($=(D=x.notifications)==null?void 0:D.data)==null?void 0:$.length)||0,at=((K=(F=x.documents)==null?void 0:F.data)==null?void 0:K.length)||0,Mt=((ve=(se=x.books)==null?void 0:se.data)==null?void 0:ve.length)||0;return n.jsx("div",{className:"json-preview",children:n.jsxs("div",{className:"backup-info",children:[n.jsx("h4",{children:" Complete System Backup Detected"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Export Type:"})," ",ge.exportType]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Export Date:"})," ",new Date(ge.exportTimestamp).toLocaleString()]}),n.jsxs("div",{className:"system-summary",children:[n.jsx("h5",{children:"Data Summary:"}),n.jsxs("ul",{children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Users:"})," ",he]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Students:"})," ",ke]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Notifications:"})," ",Oe]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Documents:"})," ",at]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Books:"})," ",Mt]})]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Total Records:"})," ",he+ke+Oe+at+Mt]})]}),ge.notes&&n.jsxs("div",{className:"backup-notes",children:[n.jsx("h5",{children:"Import Notes:"}),n.jsxs("ul",{children:[ge.notes.passwords&&n.jsx("li",{children:ge.notes.passwords}),ge.notes.files&&n.jsx("li",{children:ge.notes.files}),ge.notes.import&&n.jsx("li",{children:ge.notes.import})]})]})]})})}else if(d==="notifications"&&x.notifications)C=Array.isArray(x.notifications)?x.notifications:x.notifications.data||[],ue="Notification";else if(d==="documents"&&x.documents)C=Array.isArray(x.documents)?x.documents:x.documents.data||[],ue="Document";else if(d==="books"&&x.books)C=Array.isArray(x.books)?x.books:x.books.data||[],ue="Book";else if(d==="combined"&&x.user)return n.jsxs("div",{className:"json-preview",children:[n.jsx("h4",{children:"Preview: User with Students"}),n.jsxs("div",{className:"preview-sections",children:[n.jsxs("div",{className:"preview-section",children:[n.jsx("h5",{children:"User"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Username:"})," ",((me=x.user)==null?void 0:me.username)||"N/A"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Email:"})," ",((Pe=x.user)==null?void 0:Pe.email)||"N/A"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Name:"})," ",((re=x.user)==null?void 0:re.name)||"N/A"]})]}),x.students&&x.students.length>0&&n.jsxs("div",{className:"preview-section",children:[n.jsxs("h5",{children:["Students (",x.students.length,")"]}),n.jsxs("ul",{children:[x.students.slice(0,3).map((he,ke)=>n.jsxs("li",{children:[he.firstName," ",he.lastName]},ke)),x.students.length>3&&n.jsxs("li",{children:["...and ",x.students.length-3," more"]})]})]})]})]});return Array.isArray(C)||(C=[]),n.jsxs("div",{className:"json-preview",children:[n.jsxs("div",{className:"backup-info",children:[n.jsx("h4",{children:" Backup Import Detected"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Export Type:"})," ",ge.exportType]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Export Date:"})," ",new Date(ge.exportTimestamp).toLocaleString()]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Records:"})," ",ge.totalRecords||C.length]})]}),n.jsxs("h4",{children:["Preview (",C.length," ",ue,C.length!==1?"s":"",")"]}),n.jsx("div",{className:"preview-table-container",children:n.jsxs("table",{className:"preview-table",children:[n.jsx("thead",{children:n.jsx("tr",{children:d==="user"?n.jsxs(n.Fragment,{children:[n.jsx("th",{children:"Username"}),n.jsx("th",{children:"Email"}),n.jsx("th",{children:"Name"}),n.jsx("th",{children:"Role"})]}):n.jsxs(n.Fragment,{children:[n.jsx("th",{children:"First Name"}),n.jsx("th",{children:"Last Name"}),n.jsx("th",{children:"Date of Birth"}),n.jsx("th",{children:"Parent User"})]})})}),n.jsxs("tbody",{children:[C.slice(0,5).map((he,ke)=>n.jsx("tr",{children:d==="user"?n.jsxs(n.Fragment,{children:[n.jsx("td",{children:he.username||"N/A"}),n.jsx("td",{children:he.email||"N/A"}),n.jsx("td",{children:he.name||"N/A"}),n.jsx("td",{children:he.role||"user"})]}):n.jsxs(n.Fragment,{children:[n.jsx("td",{children:he.firstName||"N/A"}),n.jsx("td",{children:he.lastName||"N/A"}),n.jsx("td",{children:he.dateOfBirth||"N/A"}),n.jsx("td",{children:he.parentUsername||he.userId||"N/A"})]})},ke)),C.length>5&&n.jsx("tr",{children:n.jsxs("td",{colSpan:4,className:"preview-more",children:["...and ",C.length-5," more"]})})]})]})})]})}if(d==="user"||d==="student"){let ge=x.users||x.students||[x];Array.isArray(ge)||(ge=[ge]);const C=d==="user"?"User":"Student";return n.jsxs("div",{className:"json-preview",children:[n.jsxs("h4",{children:["Preview (",ge.length," ",C,ge.length!==1?"s":"",")"]}),n.jsx("div",{className:"preview-table-container",children:n.jsxs("table",{className:"preview-table",children:[n.jsx("thead",{children:n.jsx("tr",{children:d==="user"?n.jsxs(n.Fragment,{children:[n.jsx("th",{children:"Username"}),n.jsx("th",{children:"Email"}),n.jsx("th",{children:"Name"}),n.jsx("th",{children:"Role"})]}):n.jsxs(n.Fragment,{children:[n.jsx("th",{children:"First Name"}),n.jsx("th",{children:"Last Name"}),n.jsx("th",{children:"Date of Birth"}),n.jsx("th",{children:"User"})]})})}),n.jsx("tbody",{children:ge.map((ue,he)=>n.jsx("tr",{children:d==="user"?n.jsxs(n.Fragment,{children:[n.jsx("td",{children:ue.username||"N/A"}),n.jsx("td",{children:ue.email||"N/A"}),n.jsx("td",{children:ue.name||"N/A"}),n.jsx("td",{children:ue.role||"user"})]}):n.jsxs(n.Fragment,{children:[n.jsx("td",{children:ue.firstName||"N/A"}),n.jsx("td",{children:ue.lastName||"N/A"}),n.jsx("td",{children:ue.dateOfBirth||"N/A"}),n.jsx("td",{children:ue.userId||"N/A"})]})},he))})]})})]})}if(d==="userWithStudents")return n.jsxs("div",{className:"json-preview",children:[n.jsx("h4",{children:"Preview"}),n.jsxs("div",{className:"preview-sections",children:[n.jsxs("div",{className:"preview-section",children:[n.jsx("h5",{children:"User"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Username:"})," ",((be=x.user)==null?void 0:be.username)||"N/A"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Email:"})," ",((Ke=x.user)==null?void 0:Ke.email)||"N/A"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Name:"})," ",((fe=x.user)==null?void 0:fe.name)||"N/A"]})]}),x.students&&x.students.length>0&&n.jsxs("div",{className:"preview-section",children:[n.jsxs("h5",{children:["Students (",x.students.length,")"]}),n.jsx("ul",{children:x.students.map((ge,C)=>n.jsxs("li",{children:[ge.firstName," ",ge.lastName,"(DOB: ",ge.dateOfBirth||"N/A",")"]},C))})]})]})]})};return l?jt.createPortal(n.jsx("div",{className:"form-popup-overlay",children:n.jsxs("div",{className:"form-popup json-import-modal",onClick:T=>T.stopPropagation(),children:[n.jsxs("div",{className:"popup-header",children:[n.jsx("h3",{children:h}),n.jsx("button",{className:"close-btn",onClick:oe,children:""})]}),n.jsxs("div",{className:"popup-content",children:[n.jsxs("div",{className:"import-section",children:[n.jsx("div",{className:`drop-zone ${w?"drag-active":""}`,onDragEnter:k,onDragLeave:k,onDragOver:k,onDrop:P,children:n.jsxs("div",{className:"drop-zone-content",children:[n.jsxs("svg",{className:"upload-icon",width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),n.jsx("polyline",{points:"17 8 12 3 7 8"}),n.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]}),n.jsx("p",{children:"Drag and drop JSON file here"}),n.jsx("p",{className:"drop-zone-or",children:"OR"}),n.jsxs("label",{className:"file-input-label",children:[n.jsx("input",{type:"file",accept:".json",onChange:U,className:"file-input-hidden"}),n.jsx("span",{className:"outlined",children:"Choose File"})]})]})}),n.jsx("div",{className:"import-divider",children:n.jsx("span",{children:"OR"})}),n.jsxs("div",{className:"json-input-section",children:[n.jsx("label",{children:"Paste JSON content:"}),n.jsx("textarea",{value:g,onChange:I,placeholder:"Paste your JSON data here...",rows:"10",className:"json-textarea"})]}),d==="student"&&!z&&n.jsxs("div",{className:"user-selection-section",children:[n.jsx("label",{children:"Select Parent/Guardian:"}),n.jsxs("select",{value:O,onChange:T=>H(T.target.value),className:"user-select",children:[n.jsx("option",{value:"",children:"Choose a user..."}),f.map(T=>n.jsxs("option",{value:T.id,children:[T.name," (",T.username,")"]},T.id))]})]}),z&&n.jsxs("div",{className:"backup-options-section",children:[n.jsx("label",{children:"Duplicate Handling:"}),n.jsxs("select",{value:W,onChange:T=>L(T.target.value),className:"duplicate-handling-select",children:[n.jsx("option",{value:"skip",children:"Skip duplicates"}),n.jsx("option",{value:"replace",children:"Replace existing"}),n.jsx("option",{value:"merge",children:"Merge data"}),n.jsx("option",{value:"interactive",children:"Interactive (conflicts only)"})]}),n.jsx("div",{className:"duplicate-handling-help",children:n.jsxs("small",{children:[W==="skip"&&"Existing records will be left unchanged",W==="replace"&&"Existing records will be completely replaced",W==="merge"&&"New data will be merged with existing records",W==="interactive"&&"You will be asked to resolve conflicts manually"]})})]}),R.length>0&&n.jsx("div",{className:"import-errors",children:R.map((T,q)=>n.jsxs("div",{className:"error-message",children:[" ",T]},q))}),_()]}),n.jsxs("div",{className:"form-actions",children:[n.jsxs("button",{onClick:X,disabled:!x||R.length>0||d==="student"&&!z&&!O||y,className:x&&R.length===0&&(d!=="student"||z||O)&&!y?"":"disabled",children:[y&&n.jsx("span",{className:"loading",style:{marginRight:"8px"}}),y?"Importing...":z?"Import Backup":"Import"]}),n.jsx("button",{onClick:oe,className:"outlined",disabled:y,children:"Cancel"})]})]})]})}),document.body):null},gN=({user:l,users:s,setMessage:o,setClassName:c})=>{const[d,h]=b.useState(!1),[m,f]=b.useState(!1),[y,g]=b.useState(!1),[v,x]=b.useState(!1),[S,R]=b.useState(!1),[N,w]=b.useState(!1),[E,O]=b.useState(!1),[H,z]=b.useState(!1),[J,W]=b.useState(!1),L=async(T,q)=>{var te,ie;try{const $={students:(Array.isArray(T.students)?T.students:[T]).map(K=>({...K,userId:q}))};Ae.setToken(l.token);const F=await Ae.importStudents($);o(F.message),c("success")}catch(D){o(((ie=(te=D.response)==null?void 0:te.data)==null?void 0:ie.error)||"Failed to import students"),c("error")}finally{setTimeout(()=>o(null),5e3)}},k=async(T,q)=>{var te,ie;try{Ae.setToken(l.token);const D=await Ae.importBackup(T,q);o(D.message),c("success")}catch(D){o(((ie=(te=D.response)==null?void 0:te.data)==null?void 0:ie.error)||"Failed to import backup"),c("error")}finally{setTimeout(()=>o(null),5e3)}},P=async T=>{var q,te;try{Be.setToken(l.token);const ie=await Be.importUsers(T);o(ie.message),c("success")}catch(ie){o(((te=(q=ie.response)==null?void 0:q.data)==null?void 0:te.error)||"Failed to import users"),c("error")}finally{setTimeout(()=>o(null),5e3)}},U=async T=>{var q,te;try{Be.setToken(l.token);const ie=await Be.importUserWithStudents(T);o(ie.message),c("success")}catch(ie){o(((te=(q=ie.response)==null?void 0:q.data)==null?void 0:te.error)||"Failed to import user with students"),c("error")}finally{setTimeout(()=>o(null),5e3)}},ee=async T=>{var q,te;try{ea.setToken(l.token);const ie=await ea.importNotifications(T);o(ie.message),c("success")}catch(ie){o(((te=(q=ie.response)==null?void 0:q.data)==null?void 0:te.error)||"Failed to import notifications"),c("error")}finally{setTimeout(()=>o(null),5e3)}},I=async T=>{var q,te;try{vt.setToken(l.token);const ie=await vt.importDocuments(T);o(ie.message),c("success")}catch(ie){o(((te=(q=ie.response)==null?void 0:q.data)==null?void 0:te.error)||"Failed to import documents"),c("error")}finally{setTimeout(()=>o(null),5e3)}},ce=async T=>{var q,te;try{Ze.setToken(l.token);const ie=await Ze.importBooks(T);o(ie.message),c("success")}catch(ie){o(((te=(q=ie.response)==null?void 0:q.data)==null?void 0:te.error)||"Failed to import books"),c("error")}finally{setTimeout(()=>o(null),5e3)}},X=async(T,q)=>{var te,ie;try{W(!0),o("Importing system data... This may take a few moments."),c("success"),Be.setToken(l.token);const D=await Be.importAllData(T,q);o(D.message),c("success"),D.results&&Object.values(D.results).some($=>$.errors&&$.errors.length>0)&&Object.entries(D.results).forEach(([,$])=>{$.errors&&$.errors.length>0&&$.errors.forEach(()=>{})})}catch(D){o(((ie=(te=D.response)==null?void 0:te.data)==null?void 0:ie.error)||"Failed to restore system data"),c("error")}finally{W(!1),setTimeout(()=>o(null),5e3)}},oe=T=>{switch(T){case"students":h(!0);break;case"backup":f(!0);break;case"users":g(!0);break;case"combined":x(!0);break;case"notifications":R(!0);break;case"documents":w(!0);break;case"books":O(!0);break;case"system-restore":z(!0);break}},_=()=>{h(!1),f(!1),g(!1),x(!1),R(!1),w(!1),O(!1),z(!1)};return n.jsxs("div",{className:"admin-section",children:[n.jsxs("div",{className:"section-header",children:[n.jsx("h2",{children:"Data Import"}),n.jsx("p",{children:"Import users and students from JSON files"})]}),n.jsxs("div",{className:"admin-info",children:[n.jsx("h3",{children:"Import Information"}),n.jsxs("ul",{children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Import Students:"})," Requires selecting a parent/user for assignment"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Import Student Backup:"})," Includes duplicate handling options (skip, replace, merge)"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Import Users:"})," Standard user import with duplicate detection"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Import User with Students:"})," Creates user and associated students in one operation"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Import Notifications:"})," Import notifications with duplicate detection by title and message"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Import Documents:"})," Import document sections with file metadata (files need re-upload)"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Import Books:"})," Import books with lending history and duplicate detection"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"System Restore:"})," Import complete system backup with all data types in proper order"]})]})]}),n.jsxs("div",{className:"admin-actions",children:[n.jsxs("div",{className:"import-category",children:[n.jsx("h3",{children:"Student Imports"}),n.jsx("button",{className:"small-btn",onClick:()=>oe("students"),children:"Import Students"}),n.jsx("button",{className:"small-btn",onClick:()=>oe("backup"),children:"Import Student Backup"})]}),n.jsxs("div",{className:"import-category",children:[n.jsx("h3",{children:"User Imports"}),n.jsx("button",{className:"small-btn",onClick:()=>oe("users"),children:"Import Users"}),n.jsx("button",{className:"small-btn",onClick:()=>oe("combined"),children:"Import User with Students"})]}),n.jsxs("div",{className:"import-category",children:[n.jsx("h3",{children:"Content Imports"}),n.jsx("button",{className:"small-btn",onClick:()=>oe("notifications"),children:"Import Notifications"}),n.jsx("button",{className:"small-btn",onClick:()=>oe("documents"),children:"Import Documents"}),n.jsx("button",{className:"small-btn",onClick:()=>oe("books"),children:"Import Books"})]}),n.jsxs("div",{className:"import-category",children:[n.jsx("h3",{children:"System Restore"}),n.jsx("button",{className:"small-btn",onClick:()=>oe("system-restore"),children:"Restore Complete System Backup"})]})]}),n.jsx(In,{isOpen:d,onClose:_,onImport:L,templateType:"student",title:"Import Students from JSON",multiple:!0,users:s}),n.jsx(In,{isOpen:m,onClose:_,onImport:L,onBackupImport:k,templateType:"student",title:"Import Student Backup from JSON",multiple:!0,users:s}),n.jsx(In,{isOpen:y,onClose:_,onImport:P,templateType:"user",title:"Import Users from JSON",multiple:!0}),n.jsx(In,{isOpen:v,onClose:_,onImport:U,templateType:"combined",title:"Import User with Students from JSON",multiple:!1}),n.jsx(In,{isOpen:S,onClose:_,onImport:ee,templateType:"notifications",title:"Import Notifications from JSON",multiple:!0}),n.jsx(In,{isOpen:N,onClose:_,onImport:I,templateType:"documents",title:"Import Documents from JSON",multiple:!0}),n.jsx(In,{isOpen:E,onClose:_,onImport:ce,templateType:"books",title:"Import Books from JSON",multiple:!0}),n.jsx(In,{isOpen:H,onClose:_,onImport:X,templateType:"system-backup",title:"Restore Complete System Backup",multiple:!1,isLoading:J})]})},ba=({isOpen:l,onClose:s,onExport:o,exportType:c="users",title:d="Export to JSON"})=>{const[h,m]=b.useState({startMonth:"",endMonth:"",role:"",userId:""}),[f,y]=b.useState(!1),[g,v]=b.useState(null),x=(N,w)=>{m(E=>({...E,[N]:w}))},S=async()=>{try{y(!0),v(null);const N=Object.fromEntries(Object.entries(h).filter(([,W])=>W!=="")),w=await o(N),E=new Blob([JSON.stringify(w,null,2)],{type:"application/json"}),O=URL.createObjectURL(E),H=document.createElement("a");H.href=O;const z=new Date().toISOString().split("T")[0],J=`${c}-export-${z}.json`;H.download=J,document.body.appendChild(H),H.click(),document.body.removeChild(H),URL.revokeObjectURL(O),w._metadata&&v({totalRecords:w._metadata.totalRecords||w._metadata.totalUsers||0,exportType:w._metadata.exportType,timestamp:w._metadata.exportTimestamp,filename:J})}catch(N){alert("Export failed: "+N.message)}finally{y(!1)}},R=()=>{m({startMonth:"",endMonth:"",role:"",userId:""}),v(null),s()};return l?jt.createPortal(n.jsx("div",{className:"form-popup-overlay",children:n.jsxs("div",{className:"form-popup json-export-modal",onClick:N=>N.stopPropagation(),children:[n.jsxs("div",{className:"popup-header",children:[n.jsx("h3",{children:d}),n.jsx("button",{className:"close-btn",onClick:R,children:""})]}),n.jsxs("div",{className:"popup-content",children:[g?n.jsxs("div",{className:"export-success",children:[n.jsx("h4",{children:"Export Completed Successfully!"}),n.jsxs("div",{className:"export-details",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"File:"})," ",g.filename]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Records Exported:"})," ",g.totalRecords]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Export Time:"})," ",new Date(g.timestamp).toLocaleString()]})]}),n.jsx("p",{className:"export-note",children:"The file has been downloaded to your default downloads folder."})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"export-filters",children:[n.jsx("h4",{children:"Export Filters (optional)"}),c==="students"&&n.jsxs("div",{className:"filter-row",children:[n.jsxs("div",{className:"filter-group",children:[n.jsx("label",{children:"Enrollment Start Month:"}),n.jsx("input",{type:"month",value:h.startMonth,onChange:N=>x("startMonth",N.target.value),placeholder:"YYYY-MM"})]}),n.jsxs("div",{className:"filter-group",children:[n.jsx("label",{children:"Enrollment End Month:"}),n.jsx("input",{type:"month",value:h.endMonth,onChange:N=>x("endMonth",N.target.value),placeholder:"YYYY-MM"})]})]}),(c==="users"||c==="users-with-students")&&n.jsx("div",{className:"filter-row",children:n.jsxs("div",{className:"filter-group",children:[n.jsx("label",{children:"Role:"}),n.jsxs("select",{value:h.role,onChange:N=>x("role",N.target.value),children:[n.jsx("option",{value:"",children:"All Roles"}),n.jsx("option",{value:"user",children:"User"}),n.jsx("option",{value:"admin",children:"Admin"}),n.jsx("option",{value:"tutor",children:"Tutor"})]})]})}),c==="students"&&n.jsx("div",{className:"filter-row",children:n.jsxs("div",{className:"filter-group",children:[n.jsx("label",{children:"Parent/Guardian ID:"}),n.jsx("input",{type:"text",value:h.userId,onChange:N=>x("userId",N.target.value),placeholder:"Filter by specific parent/guardian ID"})]})})]}),n.jsxs("div",{className:"export-info",children:[n.jsxs("div",{className:"info-section",children:[n.jsx("h5",{children:"What will be exported:"}),n.jsxs("ul",{children:[c==="users"&&n.jsxs(n.Fragment,{children:[n.jsx("li",{children:"User account information (excluding passwords)"}),n.jsx("li",{children:"Contact details and emergency contacts"}),n.jsx("li",{children:"Account metadata and creation dates"})]}),c==="students"&&n.jsxs(n.Fragment,{children:[n.jsx("li",{children:"Student personal information"}),n.jsx("li",{children:"Enrollment and academic details"}),n.jsx("li",{children:"Parent/guardian associations"})]}),c==="users-with-students"&&n.jsxs(n.Fragment,{children:[n.jsx("li",{children:"Complete user accounts with all associated students"}),n.jsx("li",{children:"Full family/relationship data"}),n.jsx("li",{children:"Comprehensive backup format"})]}),c==="system-backup"&&n.jsxs(n.Fragment,{children:[n.jsx("li",{children:"Complete system backup with all data types"}),n.jsx("li",{children:"Users, students, notifications, documents, books"}),n.jsx("li",{children:"Dashboard data and file URLs preserved"}),n.jsx("li",{children:"Full system restore capability with file validation"})]}),(c==="notifications"||c==="documents"||c==="books")&&n.jsxs(n.Fragment,{children:[n.jsxs("li",{children:["All ",c," data and metadata"]}),n.jsx("li",{children:"Relationships and references preserved"}),n.jsx("li",{children:"File URLs preserved for validation during import"})]})]})]}),n.jsxs("div",{className:"info-section",children:[n.jsx("h5",{children:"Data Security:"}),n.jsx("ul",{children:c==="system-backup"?n.jsxs(n.Fragment,{children:[n.jsxs("li",{children:[n.jsx("strong",{children:" WARNING:"})," Password hashes are included for login functionality"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Store backup files securely"})," - contains sensitive authentication data"]}),n.jsx("li",{children:"Export includes metadata for verification"}),n.jsx("li",{children:"File downloaded directly to your device"})]}):n.jsxs(n.Fragment,{children:[n.jsx("li",{children:"Passwords and sensitive data are excluded"}),n.jsx("li",{children:"Export includes metadata for verification"}),n.jsx("li",{children:"File downloaded directly to your device"})]})})]})]})]}),n.jsx("div",{className:"form-actions",children:g?n.jsx("button",{onClick:R,children:"Close"}):n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:S,disabled:f,className:f?"disabled":"",children:f?"Exporting...":"Export to JSON"}),n.jsx("button",{onClick:R,className:"outlined",children:"Cancel"})]})})]})]})}),document.body):null},xN=({user:l,setMessage:s,setClassName:o})=>{const[c,d]=b.useState(!1),[h,m]=b.useState(!1),[f,y]=b.useState(!1),[g,v]=b.useState(!1),[x,S]=b.useState(!1),[R,N]=b.useState(!1),[w,E]=b.useState(!1),O=async P=>{var U,ee;try{return Ae.setToken(l.token),await Ae.exportStudents(P)}catch(I){throw s(((ee=(U=I.response)==null?void 0:U.data)==null?void 0:ee.error)||"Failed to export students"),o("error"),setTimeout(()=>s(null),5e3),I}},H=async P=>{var U,ee;try{return Be.setToken(l.token),await Be.exportUsers(P)}catch(I){throw s(((ee=(U=I.response)==null?void 0:U.data)==null?void 0:ee.error)||"Failed to export users"),o("error"),setTimeout(()=>s(null),5e3),I}},z=async P=>{var U,ee;try{return Be.setToken(l.token),await Be.exportUsersWithStudents(P)}catch(I){throw s(((ee=(U=I.response)==null?void 0:U.data)==null?void 0:ee.error)||"Failed to export users with students"),o("error"),setTimeout(()=>s(null),5e3),I}},J=async P=>{var U,ee;try{return ea.setToken(l.token),await ea.exportNotifications(P)}catch(I){throw s(((ee=(U=I.response)==null?void 0:U.data)==null?void 0:ee.error)||"Failed to export notifications"),o("error"),setTimeout(()=>s(null),5e3),I}},W=async P=>{var U,ee;try{return vt.setToken(l.token),await vt.exportDocuments(P)}catch(I){throw s(((ee=(U=I.response)==null?void 0:U.data)==null?void 0:ee.error)||"Failed to export documents"),o("error"),setTimeout(()=>s(null),5e3),I}},L=async P=>{var U,ee;try{return Ze.setToken(l.token),await Ze.exportBooks(P)}catch(I){throw s(((ee=(U=I.response)==null?void 0:U.data)==null?void 0:ee.error)||"Failed to export books"),o("error"),setTimeout(()=>s(null),5e3),I}},k=async P=>{var U,ee;try{return Be.setToken(l.token),await Be.exportAllData(P)}catch(I){throw s(((ee=(U=I.response)==null?void 0:U.data)==null?void 0:ee.error)||"Failed to export system backup"),o("error"),setTimeout(()=>s(null),5e3),I}};return n.jsxs("div",{className:"admin-section",children:[n.jsxs("div",{className:"section-header",children:[n.jsx("h2",{children:"Data Export"}),n.jsx("p",{children:"Export users and students data with filtering options"})]}),n.jsxs("div",{className:"admin-info",children:[n.jsx("h3",{children:"Export Information"}),n.jsxs("ul",{children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Export Students:"})," Filter by enrollment dates and parent user. Option to include dashboard data"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Export Users:"})," Filter by role and other criteria"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Export Users + Students:"})," Combined export with full relationships"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Export Notifications:"})," Filter by date range and target type"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Export Documents:"})," Export all document sections and file metadata"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Export Books:"})," Filter by availability status, includes lending history"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"System Backup:"})," Export all data combined for complete system backup"]})]})]}),n.jsxs("div",{className:"admin-actions",children:[n.jsxs("div",{className:"export-category",children:[n.jsx("h3",{children:"Student Exports"}),n.jsx("button",{className:"small-btn",onClick:()=>d(!0),children:"Export Students"})]}),n.jsxs("div",{className:"export-category",children:[n.jsx("h3",{children:"User Exports"}),n.jsx("button",{className:"small-btn",onClick:()=>m(!0),children:"Export Users"}),n.jsx("button",{className:"small-btn",onClick:()=>y(!0),children:"Export Users + Students"})]}),n.jsxs("div",{className:"export-category",children:[n.jsx("h3",{children:"Content Exports"}),n.jsx("button",{className:"small-btn",onClick:()=>v(!0),children:"Export Notifications"}),n.jsx("button",{className:"small-btn",onClick:()=>S(!0),children:"Export Documents"}),n.jsx("button",{className:"small-btn",onClick:()=>N(!0),children:"Export Books"})]}),n.jsxs("div",{className:"export-category",children:[n.jsx("h3",{children:"System Backup"}),n.jsx("button",{className:"small-btn",onClick:()=>E(!0),children:"Export Complete System Backup"})]})]}),n.jsx(ba,{isOpen:c,onClose:()=>d(!1),onExport:O,exportType:"students",title:"Export Students to JSON"}),n.jsx(ba,{isOpen:h,onClose:()=>m(!1),onExport:H,exportType:"users",title:"Export Users to JSON"}),n.jsx(ba,{isOpen:f,onClose:()=>y(!1),onExport:z,exportType:"users-with-students",title:"Export Users with Students to JSON"}),n.jsx(ba,{isOpen:g,onClose:()=>v(!1),onExport:J,exportType:"notifications",title:"Export Notifications to JSON"}),n.jsx(ba,{isOpen:x,onClose:()=>S(!1),onExport:W,exportType:"documents",title:"Export Documents to JSON"}),n.jsx(ba,{isOpen:R,onClose:()=>N(!1),onExport:L,exportType:"books",title:"Export Books to JSON"}),n.jsx(ba,{isOpen:w,onClose:()=>E(!1),onExport:k,exportType:"system-backup",title:"Export Complete System Backup"})]})},vN=({user:l,setMessage:s,setClassName:o})=>{const[c,d]=b.useState(""),[h,m]=b.useState(!1),[f,y]=b.useState(!1),g=async()=>{var S,R;if(c!=="DELETE"){s("You must type DELETE exactly to confirm",o("error")),setTimeout(()=>s(null),5e3);return}try{m(!0),Be.setToken(l.token);const N=await Be.clearDatabase(c);s(`Database cleared successfully! Removed: ${Object.entries(N.clearedCounts).map(([w,E])=>`${E} ${w}`).join(", ")}`,"success"),d(""),y(!1),setTimeout(()=>{s(null),o("error")},1e4)}catch(N){s(((R=(S=N.response)==null?void 0:S.data)==null?void 0:R.error)||"Failed to clear database","error"),setTimeout(()=>{s(null),o("error")},5e3)}finally{m(!1)}},v=()=>{y(!0),d("")},x=()=>{y(!1),d("")};return n.jsx("div",{className:"database-management-section",children:n.jsxs("div",{className:"danger-zone",children:[n.jsx("h3",{children:" Clear Entire Database"}),n.jsxs("div",{className:"warning-box",children:[n.jsx("h4",{children:" WARNING"}),n.jsxs("ul",{children:[n.jsx("li",{children:"This will permanently delete ALL data from the database"}),n.jsx("li",{children:"All users (except current admin), students, dashboards, documents, notifications, books, and event signups will be removed"}),n.jsx("li",{children:"This action cannot be undone"}),n.jsx("li",{children:"Your admin account will be preserved so you can continue using the system"}),n.jsx("li",{children:"All uploaded files in Cloudinary will become orphaned"})]})]}),f?n.jsxs("div",{className:"confirmation-section",children:[n.jsx("h4",{children:"Are you absolutely sure?"}),n.jsx("p",{children:"This action will permanently delete everything in the database."}),n.jsx("p",{children:n.jsx("strong",{children:'Type "DELETE" below to confirm:'})}),n.jsx("div",{className:"confirmation-input",children:n.jsx("input",{type:"text",value:c,onChange:S=>d(S.target.value),placeholder:"Type DELETE here",className:"danger-input",disabled:h})}),n.jsxs("div",{className:"confirmation-buttons",children:[n.jsx("button",{className:"delete-btn",onClick:g,disabled:h||c!=="DELETE",children:h?"Clearing Database...":" Yes, Delete Everything"}),n.jsx("button",{onClick:x,disabled:h,children:"Cancel"})]})]}):n.jsx("button",{className:"delete-btn",onClick:v,disabled:h,children:"Clear Database"})]})})},yN=({user:l,setMessage:s,setClassName:o})=>{const[c,d]=b.useState([]),[h,m]=b.useState(!0);return b.useEffect(()=>{if(l===null)return;if((l==null?void 0:l.role)!=="admin"){s("Access denied - Admin privileges required"),o("error");return}(async()=>{try{m(!0),Be.setToken(l.token),Ae.setToken(l.token);const y=await Be.getAll();d(y)}catch{s("Error loading admin data"),o("error")}finally{m(!1)}})()},[l,s,o]),l===null?n.jsx("div",{className:"admin-loading",children:n.jsx("div",{className:"loading",children:"Loading..."})}):(l==null?void 0:l.role)!=="admin"?n.jsxs("div",{className:"admin-access-denied",children:[n.jsx("h2",{children:"Access Denied"}),n.jsx("p",{children:"This page is only accessible to administrators."})]}):h?n.jsx("div",{className:"admin-loading",children:n.jsx("div",{className:"loading",children:"Loading admin panel..."})}):n.jsxs("div",{className:"admin-page",children:[n.jsxs("div",{className:"admin-header",children:[n.jsx("h1",{children:"Admin Panel"}),n.jsx("p",{children:"Manage templates, imports, and exports for users and students"})]}),n.jsxs("div",{className:"admin-content",children:[n.jsx(pN,{user:l,setMessage:s,setClassName:o}),n.jsx(gN,{user:l,users:c,setMessage:s,setClassName:o}),n.jsx(xN,{user:l,setMessage:s,setClassName:o}),n.jsxs("div",{className:"admin-section database-management",children:[n.jsxs("div",{className:"section-header",children:[n.jsx("h2",{children:"Database Management"}),n.jsx("p",{className:"warning-text",children:"DANGER ZONE - Actions here are irreversible"})]}),n.jsx(vN,{user:l,setMessage:s,setClassName:o})]})]})]})},jN=({user:l,setUser:s,setMessage:o,setClassName:c})=>{const[d,h]=b.useState((l==null?void 0:l.name)||""),[m,f]=b.useState((l==null?void 0:l.email)||""),[y,g]=b.useState((l==null?void 0:l.contactNumber)||""),[v,x]=b.useState((l==null?void 0:l.parentStreetAddress)||""),[S,R]=b.useState((l==null?void 0:l.parentCity)||""),[N,w]=b.useState((l==null?void 0:l.parentPostalCode)||""),[E,O]=b.useState((l==null?void 0:l.parentCountry)||""),[H,z]=b.useState((l==null?void 0:l.parentNationality)||""),[J,W]=b.useState((l==null?void 0:l.parentPassportNumber)||""),[L,k]=b.useState(l!=null&&l.parentPassportExpiryDate?l.parentPassportExpiryDate.split("T")[0]:""),[P,U]=b.useState((l==null?void 0:l.parentNifNumber)||""),[ee,I]=b.useState((l==null?void 0:l.emergencyContactRelationship)||""),[ce,X]=b.useState((l==null?void 0:l.emergencyContactName)||""),[oe,_]=b.useState((l==null?void 0:l.emergencyContactNumber)||""),[T,q]=b.useState(""),[te,ie]=b.useState(!1),D=()=>{h((l==null?void 0:l.name)||""),f((l==null?void 0:l.email)||""),g((l==null?void 0:l.contactNumber)||""),x((l==null?void 0:l.parentStreetAddress)||""),R((l==null?void 0:l.parentCity)||""),w((l==null?void 0:l.parentPostalCode)||""),O((l==null?void 0:l.parentCountry)||""),z((l==null?void 0:l.parentNationality)||""),W((l==null?void 0:l.parentPassportNumber)||""),k(l!=null&&l.parentPassportExpiryDate?l.parentPassportExpiryDate.split("T")[0]:""),U((l==null?void 0:l.parentNifNumber)||""),I((l==null?void 0:l.emergencyContactRelationship)||""),X((l==null?void 0:l.emergencyContactName)||""),_((l==null?void 0:l.emergencyContactNumber)||""),q(""),ie(!0)},$=async F=>{var K,se;F.preventDefault();try{const me=Object.fromEntries(Object.entries({name:d,email:m,contactNumber:y,parentStreetAddress:v,parentCity:S,parentPostalCode:N,parentCountry:E,parentNationality:H,parentPassportNumber:J,parentPassportExpiryDate:L,parentNifNumber:P,emergencyContactRelationship:ee,emergencyContactName:ce,emergencyContactNumber:oe}).filter(([,be])=>be!==""));T.trim()&&(me.password=T);const re={...await Be.update(l.id,me),token:l.token};s(re),window.localStorage.setItem("loggedlibraryUser",JSON.stringify(re)),o("Profile updated successfully"),c("success"),ie(!1),setTimeout(()=>{o(null),c("error")},5e3)}catch(ve){const me=(se=(K=ve.response)==null?void 0:K.data)==null?void 0:se.error;o(me||"Error updating profile"),c("error"),setTimeout(()=>o(null),5e3)}};return n.jsxs("div",{children:[n.jsx("h1",{children:"Profile"}),n.jsxs("div",{className:"profile-container",children:[te?n.jsx("div",{className:"profile-actions",children:n.jsx("button",{className:"outlined",onClick:()=>ie(!1),children:"View Profile"})}):n.jsx("div",{className:"profile-actions",children:n.jsx("button",{className:"outlined",onClick:D,children:"Edit Profile"})}),te?n.jsxs("form",{onSubmit:$,className:"student-form",children:[n.jsxs("div",{className:"form-sections",children:[n.jsxs("div",{className:"form-section",children:[n.jsx("h3",{children:"Login Information"}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Username"}),n.jsx("input",{type:"text",value:(l==null?void 0:l.username)||"",disabled:!0})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Password"}),n.jsx("input",{type:"password",value:T,onChange:F=>q(F.target.value),placeholder:"Leave blank to keep current password"})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Role"}),n.jsx("input",{type:"text",value:(l==null?void 0:l.role)||"",disabled:!0})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Email"}),n.jsx("input",{type:"email",value:m,onChange:F=>f(F.target.value)})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Phone"}),n.jsx("input",{type:"tel",value:y,onChange:F=>g(F.target.value)})]})]}),n.jsxs("div",{className:"form-section",children:[n.jsx("h3",{children:"Personal Information"}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Full Name"}),n.jsx("input",{type:"text",value:d,onChange:F=>h(F.target.value)})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Nationality"}),n.jsx("input",{type:"text",value:H,onChange:F=>z(F.target.value)})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Passport Number"}),n.jsx("input",{type:"text",value:J,onChange:F=>W(F.target.value)})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Passport Expiry"}),n.jsx("input",{type:"date",value:L,onChange:F=>k(F.target.value)})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"NIF Number"}),n.jsx("input",{type:"text",value:P,onChange:F=>U(F.target.value)})]})]}),n.jsxs("div",{className:"form-section",children:[n.jsx("h3",{children:"Address"}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Street Address"}),n.jsx("input",{type:"text",value:v,onChange:F=>x(F.target.value)})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"City"}),n.jsx("input",{type:"text",value:S,onChange:F=>R(F.target.value)})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Postal Code"}),n.jsx("input",{type:"text",value:N,onChange:F=>w(F.target.value)})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Country"}),n.jsx("input",{type:"text",value:E,onChange:F=>O(F.target.value)})]})]}),n.jsxs("div",{className:"form-section",children:[n.jsx("h3",{children:"Emergency Contact"}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Relationship"}),n.jsx("input",{type:"text",value:ee,onChange:F=>I(F.target.value)})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Name"}),n.jsx("input",{type:"text",value:ce,onChange:F=>X(F.target.value)})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Phone Number"}),n.jsx("input",{type:"tel",value:oe,onChange:F=>_(F.target.value)})]})]})]}),n.jsxs("div",{className:"form-actions",children:[n.jsx("button",{type:"submit",children:"Save"}),n.jsx("button",{type:"button",onClick:()=>ie(!1),children:"Cancel"})]})]}):n.jsx(n.Fragment,{children:n.jsxs("div",{className:"profile-grid",children:[n.jsxs("div",{className:"profile-section",children:[n.jsx("h3",{children:"Login and Contact"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Username:"})," ",l==null?void 0:l.username]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Password:"})," "]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Role:"})," ",l==null?void 0:l.role]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Email:"})," ",(l==null?void 0:l.email)||"Not set"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Phone:"})," ",(l==null?void 0:l.contactNumber)||"Not set"]})]}),n.jsxs("div",{className:"profile-section",children:[n.jsx("h3",{children:"Personal Information"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Full Name:"})," ",(l==null?void 0:l.name)||"Not set"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Nationality:"})," ",(l==null?void 0:l.parentNationality)||"Not set"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Passport Number:"})," ",(l==null?void 0:l.parentPassportNumber)||"Not set"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Passport Expiry:"})," ",l!=null&&l.parentPassportExpiryDate?new Date(l.parentPassportExpiryDate).toLocaleDateString("de-DE",{year:"numeric",month:"2-digit",day:"2-digit"}):"Not set"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"NIF Number:"})," ",(l==null?void 0:l.parentNifNumber)||"Not set"]})]}),n.jsxs("div",{className:"profile-section",children:[n.jsx("h3",{children:"Address"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Street Address:"})," ",(l==null?void 0:l.parentStreetAddress)||"Not set"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"City:"})," ",(l==null?void 0:l.parentCity)||"Not set"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Postal Code:"})," ",(l==null?void 0:l.parentPostalCode)||"Not set"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Country:"})," ",(l==null?void 0:l.parentCountry)||"Not set"]})]}),n.jsxs("div",{className:"profile-section",children:[n.jsx("h3",{children:"Emergency Contact"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Relationship:"})," ",(l==null?void 0:l.emergencyContactRelationship)||"Not set"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Name:"})," ",(l==null?void 0:l.emergencyContactName)||"Not set"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Phone Number:"})," ",(l==null?void 0:l.emergencyContactNumber)||"Not set"]})]})]})})]})]})},bN=(l,s,o)=>{const[c,d]=b.useState(null),[h,m]=b.useState(!1),[f,y]=b.useState(null);return b.useEffect(()=>{if(!l||!s||!o){d(null),m(!1);return}(async()=>{var v,x;try{m(!0),y(null);let S;switch(o){case"portfolio":S=await Fe.getSecurePortfolioUrl(l,s);break;case"document":S=await Fe.getSecureDocumentUrl(l,s);break;case"invoice":S=await Fe.getSecureInvoiceUrl(l,s);break;default:throw new Error("Invalid document type")}d(S)}catch(S){y(((x=(v=S.response)==null?void 0:v.data)==null?void 0:x.error)||S.message||"Failed to load document"),d(null)}finally{m(!1)}})()},[l,s,o]),{documentUrl:c,loading:h,error:f}},NN=({studentId:l,documentId:s,type:o,fileName:c,directUrl:d,className:h="",...m})=>{const{documentUrl:f,loading:y,error:g}=bN(o!=="portfolio"?l:null,o!=="portfolio"?s:null,o!=="portfolio"?o:null),v=o==="portfolio"?d&&d.includes("cloudinary.com")?d:Fe.getPortfolioViewUrl(l,s):f;if(o==="portfolio")return n.jsx("div",{className:h,...m,children:n.jsx("iframe",{src:v,title:`PDF - ${c}`,className:"border-none w-full h-full",style:{minHeight:"600px"}})});if(y)return n.jsx("div",{className:`flex items-center justify-center bg-gray-100 ${h}`,...m,children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-accent mx-auto mb-2"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Loading PDF..."})]})});if(g||!v){const x=g&&g.includes("legacy storage");return n.jsx("div",{className:`flex items-center justify-center bg-gray-100 ${h}`,...m,children:n.jsxs("div",{className:"text-center p-4",children:[n.jsx("div",{className:"text-4xl mb-2",children:""}),n.jsx("p",{className:"text-sm text-gray-600 mb-2",children:x?"This file needs to be re-uploaded for secure access":g?"Error loading PDF":"PDF not available"}),x&&n.jsx("p",{className:"text-xs text-gray-500",children:"Contact an administrator to re-upload this file with secure storage."})]})})}return n.jsx("div",{className:h,...m,children:n.jsx("iframe",{src:`${v}#toolbar=0&navpanes=0&scrollbar=1`,title:`PDF - ${c}`,className:"border-none w-full h-full",style:{minHeight:"600px"}})})},SN=({studentId:l,portfolios:s=[],isAdmin:o,onUpdate:c,showMessage:d})=>{const[h,m]=b.useState(!1),[f,y]=b.useState(!1),[g,v]=b.useState(null),[x,S]=b.useState(null),R=async O=>{var z,J,W,L;O.preventDefault();const H=(J=(z=O.target.portfolioFile)==null?void 0:z.files)==null?void 0:J[0];if(!H){d("Please select a file","error");return}if(H.type!=="application/pdf"){d("Please select a PDF file","error");return}if(H.size>10*1024*1024){d("File size must be less than 10MB","error");return}try{y(!0);let k;g?(k=await Fe.replacePortfolio(l,g,H),d("Portfolio replaced successfully")):(k=await Fe.uploadPortfolio(l,H),d("Portfolio uploaded successfully")),c(k),m(!1),v(null)}catch(k){d(((L=(W=k.response)==null?void 0:W.data)==null?void 0:L.error)||"Failed to upload portfolio","error")}finally{y(!1)}},N=async O=>{var H,z,J;if(O&&O.pdfUrl)try{if(O.pdfUrl&&O.pdfUrl.includes("cloudinary.com")){window.open(O.pdfUrl,"_blank");return}const W=await Fe.getSecurePortfolioUrl(l,O.id||O._id),L=document.createElement("a");L.href=W,L.target="_blank",L.setAttribute("download",O.fileName||"portfolio.pdf"),document.body.appendChild(L),L.click(),document.body.removeChild(L)}catch(W){(J=(z=(H=W.response)==null?void 0:H.data)==null?void 0:z.error)!=null&&J.includes("legacy storage")?d("This portfolio uses legacy storage and needs to be re-uploaded by an administrator for secure access","error"):d("Failed to download portfolio","error")}},w=async O=>{var H,z;if(window.confirm("Are you sure you want to delete this portfolio? This action cannot be undone."))try{const J=await Fe.removePortfolio(l,O.id||O._id);c(J),d("Portfolio deleted successfully")}catch(J){d(((z=(H=J.response)==null?void 0:H.data)==null?void 0:z.error)||"Failed to delete portfolio","error")}},E=O=>{v(O.id||O._id),m(!0)};return n.jsxs("div",{className:"dashboard-section",children:[n.jsxs("div",{className:"section-header",children:[n.jsx("h2",{children:"Portfolios"}),o&&n.jsx("button",{className:"section-action-btn",onClick:()=>m(!0),disabled:f,children:"Add Portfolio"})]}),n.jsx("div",{className:"section-content",children:s&&s.length>0?n.jsx("div",{className:"portfolios-list",children:s.map((O,H)=>O?n.jsx("div",{className:"portfolio",children:n.jsxs("div",{className:"portfolio-item",children:[n.jsxs("div",{className:"portfolio-info",children:[n.jsx("span",{className:"portfolio-title",children:O.fileName||"Untitled Portfolio"}),O.uploadDate&&n.jsxs("span",{className:"portfolio-date",children:[n.jsx("span",{children:""}),new Date(O.uploadDate).toLocaleDateString("de-DE",{year:"numeric",month:"2-digit",day:"2-digit"})]})]}),n.jsxs("div",{className:"portfolio-actions",children:[n.jsx("button",{onClick:()=>S(x===(O.id||O._id)?null:O.id||O._id),className:"small-btn",children:x===(O.id||O._id)?"Hide":"View"}),n.jsx("button",{onClick:()=>N(O),className:"small-btn",children:"Download"}),o&&n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>E(O),className:"small-btn",children:"Replace"}),n.jsx("button",{onClick:()=>w(O),className:"delete-btn small-btn",children:"Delete"})]})]}),(O.id||O._id)&&x===(O.id||O._id)&&n.jsx("div",{className:"portfolio-viewer",children:n.jsx(NN,{studentId:l,documentId:O.id||O._id,type:"portfolio",fileName:O.fileName||"Portfolio",directUrl:O.pdfUrl,width:"100%",height:"600px"})})]})},O.id||O._id||H):null)}):n.jsx("div",{className:"empty-state",children:n.jsx("p",{children:"No portfolios uploaded yet."})})}),h&&jt.createPortal(n.jsx("div",{className:"form-popup-overlay",children:n.jsxs("div",{className:"form-popup",onClick:O=>O.stopPropagation(),children:[n.jsxs("div",{className:"popup-header",children:[n.jsx("h3",{children:g?"Replace Portfolio":"Add Portfolio"}),n.jsx("button",{className:"close-btn",onClick:()=>{m(!1),v(null)},children:""})]}),n.jsx("div",{className:"popup-content",children:n.jsxs("form",{onSubmit:R,children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"portfolioFile",children:"Select PDF file:"}),n.jsx("input",{type:"file",id:"portfolioFile",name:"portfolioFile",accept:".pdf",required:!0,className:"file-input"}),n.jsx("small",{children:"Maximum file size: 10MB"})]}),n.jsxs("div",{className:"form-actions",children:[n.jsx("button",{type:"submit",disabled:f,children:f?"Uploading...":"Upload"}),n.jsx("button",{type:"button",onClick:()=>{m(!1),v(null)},className:"outlined",children:"Cancel"})]})]})})]})}),document.body)]})},wN=({studentId:l,documents:s,isAdmin:o,onUpdate:c,showMessage:d})=>{const[h,m]=b.useState(!1),[f,y]=b.useState(!1),g=async S=>{var E,O;S.preventDefault();const R=new FormData(S.target),N=R.get("documentFile"),w=R.get("documentName");if(!(N instanceof File)||!w){d("Please provide both file and name","error");return}if(N.size>10*1024*1024){d("File size must be less than 10MB","error");return}try{y(!0);const H=await Fe.addDocument(l,N,w);c(H),m(!1),d("Document added successfully")}catch(H){d(((O=(E=H.response)==null?void 0:E.data)==null?void 0:O.error)||"Failed to add document","error")}finally{y(!1)}},v=async S=>{var R,N;if(window.confirm("Are you sure you want to remove this document?"))try{const w=await Fe.removeDocument(l,S);c(w),d("Document removed successfully")}catch(w){d(((N=(R=w.response)==null?void 0:R.data)==null?void 0:N.error)||"Failed to remove document","error")}},x=async S=>{var R,N,w;try{const E=await Fe.getSecureDocumentUrl(l,S._id||S.id),O=S.fileName||S.name||"document",H=/\.(pdf|jpg|jpeg|png|gif)$/i.test(O),z=window.document.createElement("a");z.href=E,z.download=O,H&&(z.target="_blank"),window.document.body.appendChild(z),z.click(),window.document.body.removeChild(z)}catch(E){(w=(N=(R=E.response)==null?void 0:R.data)==null?void 0:N.error)!=null&&w.includes("legacy storage")?d("This document uses legacy storage and needs to be re-uploaded by an administrator for secure access","error"):d("Failed to download document","error")}};return n.jsxs("div",{className:"dashboard-section",children:[n.jsxs("div",{className:"section-header",children:[n.jsx("h2",{children:"Documents"}),o&&n.jsx("button",{className:"section-action-btn",onClick:()=>m(!0),disabled:f,children:"Add Document"})]}),n.jsx("div",{className:"section-content",children:(s==null?void 0:s.length)>0?n.jsx("div",{className:"documents-list",children:s.map(S=>n.jsxs("div",{className:"document-item",children:[n.jsxs("div",{className:"document-info",children:[n.jsx("div",{className:"document-name",children:S.name}),S.fileName&&n.jsx("div",{className:"document-filename",children:S.fileName})]}),n.jsxs("div",{className:"document-actions",children:[n.jsx("button",{className:"small-btn",onClick:()=>x(S),title:"Download document",children:"Download"}),o&&n.jsx("button",{className:"small-btn delete-btn",onClick:()=>v(S._id||S.id),title:"Remove document",children:"Remove"})]})]},S._id||S.id))}):n.jsx("div",{className:"no-documents",children:n.jsx("p",{children:"No documents available."})})}),h&&jt.createPortal(n.jsx("div",{className:"form-popup-overlay",children:n.jsxs("div",{className:"form-popup",onClick:S=>S.stopPropagation(),children:[n.jsxs("div",{className:"popup-header",children:[n.jsx("h3",{children:"Add Document"}),n.jsx("button",{className:"close-btn",onClick:()=>m(!1),children:""})]}),n.jsx("div",{className:"history-content",children:n.jsxs("form",{onSubmit:g,className:"upload-form",children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"documentName",children:"Document Name:"}),n.jsx("input",{type:"text",id:"documentName",name:"documentName",placeholder:"e.g., Enrollment Contract, Medical Certificate",required:!0})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"documentFile",children:"Select file:"}),n.jsx("input",{type:"file",id:"documentFile",name:"documentFile",accept:".pdf,.doc,.docx,.jpg,.jpeg,.png",required:!0}),n.jsx("small",{children:"Accepted formats: PDF, DOC, DOCX, JPG, PNG (Max: 10MB)"})]}),n.jsxs("div",{className:"form-actions",children:[n.jsx("button",{type:"submit",disabled:f,children:f?"Adding...":"Add Document"}),n.jsx("button",{type:"button",onClick:()=>m(!1),children:"Cancel"})]})]})})]})}),document.body)]})},EN=({studentId:l,history:s,isAdmin:o,onUpdate:c,showMessage:d})=>{const[h,m]=b.useState(!1),[f,y]=b.useState(!1),[g,v]=b.useState(""),[x,S]=b.useState(null),R=async L=>{var ee,I;L.preventDefault();const k=new FormData(L.target),P={type:k.get("eventType"),date:k.get("eventDate"),description:k.get("description"),paymentStatus:k.get("paymentStatus")||"not_paid"};P.type==="receipt"?(P.month=k.get("month"),P.year=parseInt(k.get("year"))):P.type==="donation_receipt"&&(P.donorName=k.get("donorName"),P.donationAmount=parseFloat(k.get("donationAmount")));const U=k.get("receiptFile");try{y(!0);const ce=await Fe.addHistoryEvent(l,P);if(U&&U.size>0&&(P.type==="receipt"||P.type==="donation_receipt")){if(U.size>10*1024*1024){d("Invoice file size must be less than 10MB","error");return}let X;if(P.type==="receipt"){const oe=ce.history.filter(_=>_.type==="receipt"&&_.month===P.month&&_.year===P.year);X=oe[oe.length-1]}else if(P.type==="donation_receipt"){const oe=ce.history.filter(_=>_.type==="donation_receipt"&&_.donorName===P.donorName&&_.donationAmount===P.donationAmount);X=oe[oe.length-1]}if(X){await Fe.uploadInvoiceFile(l,X._id,U);const oe=await Fe.getByStudentId(l);c(oe)}}else c(ce);m(!1),d("History event added successfully")}catch(ce){d(((I=(ee=ce.response)==null?void 0:ee.data)==null?void 0:I.error)||"Failed to add history event","error")}finally{y(!1)}},N=async L=>{var k,P;if(window.confirm("Are you sure you want to remove this event?"))try{const U=await Fe.removeHistoryEvent(l,L);c(U),d("History event removed successfully")}catch(U){d(((P=(k=U.response)==null?void 0:k.data)==null?void 0:P.error)||"Failed to remove history event","error")}},w=async L=>{var k,P,U;if(L.downloadUrl)try{if(L.downloadUrl&&L.downloadUrl.includes("cloudinary.com")){window.open(L.downloadUrl,"_blank");return}const ee=await Fe.getSecureInvoiceUrl(l,L._id||L.id),I=document.createElement("a");I.href=ee,I.download=`${L.type}_${L.month||""}_${L.year||new Date(L.date).getFullYear()}.pdf`,I.target="_blank",document.body.appendChild(I),I.click(),document.body.removeChild(I)}catch(ee){(U=(P=(k=ee.response)==null?void 0:k.data)==null?void 0:P.error)!=null&&U.includes("legacy storage")?d("This invoice uses legacy storage and needs to be re-uploaded by an administrator for secure access","error"):d("Failed to download invoice","error")}},E=async(L,k)=>{var P,U;if(!(!k||k.size===0)){if(k.size>10*1024*1024){d("Invoice file size must be less than 10MB","error");return}try{S(L),await Fe.uploadInvoiceFile(l,L,k);const ee=await Fe.getByStudentId(l);c(ee),d("Invoice uploaded successfully")}catch(ee){d(((U=(P=ee.response)==null?void 0:P.data)==null?void 0:U.error)||"Failed to upload invoice","error")}finally{S(null)}}},O=async L=>{var k,P;if(window.confirm("Are you sure you want to delete this invoice?"))try{S(L),await Fe.deleteInvoiceFile(l,L);const U=await Fe.getByStudentId(l);c(U),d("Invoice deleted successfully")}catch(U){d(((P=(k=U.response)==null?void 0:k.data)==null?void 0:P.error)||"Failed to delete invoice","error")}finally{S(null)}},H=L=>{switch(L){case"enrollment_start":return"";case"receipt":return"";case"donation_receipt":return"";case"enrollment_end":return"";default:return""}},z=L=>{switch(L.type){case"enrollment_start":return"Enrollment Start";case"receipt":return`Invoice - ${L.month} ${L.year}`;case"donation_receipt":return`Donation Receipt - ${L.donorName}`;case"enrollment_end":return"Expected Enrollment End";default:return L.description||"Event"}},J=L=>L==="paid"?"payment-status paid":"payment-status not-paid",W=s?[...s].sort((L,k)=>new Date(L.date)-new Date(k.date)):[];return n.jsxs("div",{className:"dashboard-section",children:[n.jsxs("div",{className:"section-header",children:[n.jsx("h2",{children:"History"}),o&&n.jsx("button",{className:"section-action-btn",onClick:()=>m(!0),disabled:f,children:"Add Event"})]}),n.jsx("div",{className:"section-content",children:W.length>0?n.jsx("div",{className:"history-timeline",children:W.map((L,k)=>n.jsxs("div",{className:"timeline-item",children:[n.jsx("div",{className:"timeline-marker",children:n.jsx("span",{className:"timeline-icon",children:H(L.type)})}),n.jsxs("div",{className:"timeline-content",children:[n.jsxs("div",{className:"event-header",children:[n.jsx("h3",{className:"event-title",children:z(L)}),n.jsx("span",{className:"event-date",children:new Date(L.date).toLocaleDateString("de-DE",{year:"numeric",month:"2-digit",day:"2-digit"})})]}),L.description&&n.jsx("p",{className:"event-description",children:L.description}),L.type==="donation_receipt"&&n.jsxs("div",{className:"donation-info",children:[n.jsxs("p",{className:"donation-amount",children:["Amount: $",L.donationAmount]}),n.jsx("p",{className:"donation-thanks",style:{fontStyle:"italic",color:"#666"},children:"Thank you for supporting us! "})]}),n.jsxs("div",{className:"event-footer",children:[L.type==="receipt"&&n.jsx("span",{className:J(L.paymentStatus),children:L.paymentStatus==="paid"?n.jsx("span",{className:"success-text",children:" Paid"}):n.jsx("span",{className:"fail-text",children:" Not Paid"})}),n.jsxs("div",{className:"event-actions",children:[L.downloadUrl&&n.jsx("button",{className:"small-btn",onClick:()=>w(L),title:"Download document",children:"Download"}),o&&(L.type==="receipt"||L.type==="donation_receipt")&&!L.downloadUrl&&n.jsxs("div",{className:"invoice-upload",children:[n.jsx("input",{type:"file",id:`upload-${L._id}`,accept:".pdf,.jpg,.jpeg,.png",className:"hidden",onChange:P=>{const U=P.target.files[0];U&&E(L._id,U)}}),n.jsx("button",{className:"small-btn",onClick:()=>document.getElementById(`upload-${L._id}`).click(),title:L.type==="donation_receipt"?"Upload donation receipt":"Upload invoice",disabled:x===L._id,children:x===L._id?"Uploading...":L.type==="donation_receipt"?"Upload Receipt":"Upload Invoice"})]}),o&&(L.type==="receipt"||L.type==="donation_receipt")&&L.downloadUrl&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"invoice-replace",children:[n.jsx("input",{type:"file",id:`replace-${L._id}`,accept:".pdf,.jpg,.jpeg,.png",className:"hidden",onChange:P=>{const U=P.target.files[0];U&&E(L._id,U)}}),n.jsx("button",{className:"small-btn",onClick:()=>document.getElementById(`replace-${L._id}`).click(),title:L.type==="donation_receipt"?"Replace donation receipt":"Replace invoice",disabled:x===L._id,children:x===L._id?"Replacing...":L.type==="donation_receipt"?"Replace Receipt":"Replace Invoice"})]}),n.jsx("button",{className:"small-btn delete-btn",onClick:()=>O(L._id),title:L.type==="donation_receipt"?"Delete donation receipt":"Delete invoice",disabled:x===L._id,children:L.type==="donation_receipt"?"Delete Receipt":"Delete Invoice"})]}),o&&n.jsx("button",{className:"small-btn delete-btn",onClick:()=>N(L._id),title:"Remove event",children:"Remove"})]})]})]})]},L._id||`${L.type}-${L.date}-${k}`))}):n.jsx("div",{className:"no-history",children:n.jsx("p",{children:"No history events yet."})})}),h&&jt.createPortal(n.jsx("div",{className:"form-popup-overlay",children:n.jsxs("div",{className:"form-popup",onClick:L=>L.stopPropagation(),children:[n.jsxs("div",{className:"popup-header",children:[n.jsx("h3",{children:"Add History Event"}),n.jsx("button",{className:"close-btn",onClick:()=>m(!1),children:""})]}),n.jsx("div",{className:"history-content",children:n.jsxs("form",{onSubmit:R,className:"event-form",children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"eventType",children:"Event Type:"}),n.jsxs("select",{id:"eventType",name:"eventType",required:!0,value:g,onChange:L=>v(L.target.value),children:[n.jsx("option",{value:"",children:"Select event type"}),n.jsx("option",{value:"enrollment_start",children:"Enrollment Start"}),n.jsx("option",{value:"receipt",children:"Receipt"}),n.jsx("option",{value:"donation_receipt",children:"Donation Receipt"}),n.jsx("option",{value:"enrollment_end",children:"Expected Enrollment End"})]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"eventDate",children:"Date:"}),n.jsx("input",{type:"date",id:"eventDate",name:"eventDate",required:!0})]}),g==="receipt"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"month",children:"Month:"}),n.jsx("select",{id:"month",name:"month",required:!0,children:["January","February","March","April","May","June","July","August","September","October","November","December"].map(L=>n.jsx("option",{value:L,children:L},L))})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"year",children:"Year:"}),n.jsx("input",{type:"number",id:"year",name:"year",min:"2020",max:"2030",required:!0})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"paymentStatus",children:"Payment Status:"}),n.jsxs("select",{id:"paymentStatus",name:"paymentStatus",defaultValue:"not_paid",children:[n.jsx("option",{value:"not_paid",children:"Not Paid"}),n.jsx("option",{value:"paid",children:"Paid"})]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"receiptFile",children:"Invoice File (Optional):"}),n.jsx("input",{type:"file",id:"receiptFile",name:"receiptFile",accept:".pdf,.jpg,.jpeg,.png"}),n.jsx("small",{children:"Accepted formats: PDF, JPG, PNG (Max: 10MB)"})]})]}),g==="donation_receipt"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"donorName",children:"Donor Name:"}),n.jsx("input",{type:"text",id:"donorName",name:"donorName",placeholder:"e.g., John Smith",required:!0})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"donationAmount",children:"Donation Amount:"}),n.jsx("input",{type:"number",id:"donationAmount",name:"donationAmount",step:"0.01",min:"0.01",placeholder:"e.g., 100.00",required:!0})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"receiptFile",children:"Donation Receipt File (Optional):"}),n.jsx("input",{type:"file",id:"receiptFile",name:"receiptFile",accept:".pdf,.jpg,.jpeg,.png"}),n.jsx("small",{children:"Accepted formats: PDF, JPG, PNG (Max: 10MB)"})]}),n.jsx("div",{className:"donation-thank-you",children:n.jsx("p",{style:{fontStyle:"italic",color:"#666",textAlign:"center",margin:"10px 0"},children:"Thank you for supporting us! "})})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"description",children:"Description (Optional):"}),n.jsx("textarea",{id:"description",name:"description",rows:"3",placeholder:"Additional details..."})]}),n.jsxs("div",{className:"form-actions",children:[n.jsx("button",{type:"submit",disabled:f,children:f?"Adding...":"Add Event"}),n.jsx("button",{type:"button",onClick:()=>m(!1),children:"Cancel"})]})]})})]})}),document.body)]})},CN=({studentId:l,user:s,showMessage:o})=>{const c=ta(),[d,h]=b.useState([]),[m,f]=b.useState(!0);b.useEffect(()=>{l&&(async()=>{try{f(!0);const N=await Ae.getWishlist(l);h(N)}catch{o("Failed to load wishlist","error")}finally{f(!1)}})()},[l,o]);const y=async R=>{var N,w;if(window.confirm("Are you sure you want to remove this book from the wishlist?"))try{await Ae.removeFromWishlist(l,R),h(E=>E.filter(O=>(O.bookId._id||O.bookId.id)!==R)),o("Book removed from wishlist successfully")}catch(E){o(((w=(N=E.response)==null?void 0:N.data)==null?void 0:w.error)||"Failed to remove book from wishlist","error")}},g=async R=>{var N,w;try{await Ze.lend(R),o("Book borrowed successfully for 3 weeks");const E=await Ae.getWishlist(l);h(E)}catch(E){o(((w=(N=E.response)==null?void 0:N.data)==null?void 0:w.error)||"Failed to borrow book","error")}},v=async R=>{var N,w;try{await Ze.returnBook(R),o("Book returned successfully");const E=await Ae.getWishlist(l);h(E)}catch(E){o(((w=(N=E.response)==null?void 0:N.data)==null?void 0:w.error)||"Failed to return book","error")}},x=R=>R?new Date(R).toLocaleDateString("de-DE",{year:"numeric",month:"2-digit",day:"2-digit"}):"Unknown date",S=R=>{c("/library",{state:{searchTerm:R.title}})};return m?n.jsxs("div",{className:"dashboard-section",children:[n.jsx("div",{className:"section-header",children:n.jsx("h2",{children:"Reading Wishlist"})}),n.jsx("div",{className:"section-content",children:n.jsx("div",{className:"loading",children:"Loading wishlist..."})})]}):n.jsxs("div",{className:"dashboard-section",children:[n.jsxs("div",{className:"section-header",children:[n.jsx("h2",{children:"Reading Wishlist"}),n.jsxs("div",{className:"wishlist-count",children:[d.length," book",d.length!==1?"s":""]})]}),n.jsx("div",{className:"section-content",children:d.length>0?n.jsx("div",{className:"wishlist-grid",children:d.map(R=>{var J,W;const N=R.bookId,w=N._id||N.id,E=!((J=N.lending)!=null&&J.isLent),O=s&&((W=N.lending)==null?void 0:W.borrower)&&String(N.lending.borrower._id||N.lending.borrower.id||N.lending.borrower).trim()===String(s.id).trim(),H=s&&s.role!=="admin"&&s.role!=="tutor"&&E,z=s&&(s.role==="admin"||s.role==="tutor")||s&&O;return n.jsxs("div",{className:"wishlist-item clickable-book-card",onClick:()=>S(N),children:[n.jsx("div",{className:"wishlist-book-image",children:n.jsx("img",{src:N.url||"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTAFBy_9Wwc7vUhLMgzzACgvfPcWQOw297s2Q&s",alt:`${N.title} cover`,onError:L=>{L.target.src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTAFBy_9Wwc7vUhLMgzzACgvfPcWQOw297s2Q&s"}})}),n.jsxs("div",{className:"wishlist-book-info",children:[n.jsx("h4",{className:"wishlist-book-title",children:N.title}),n.jsxs("p",{className:"wishlist-book-author",children:["by ",N.author]}),n.jsxs("div",{className:"wishlist-book-details",children:[N.language&&n.jsx("span",{className:"book-badge language-badge",children:N.language}),N.difficulty&&n.jsx("span",{className:"book-badge difficulty-badge",children:N.difficulty})]}),n.jsxs("div",{className:"wishlist-date",children:["Added ",x(R.addedDate)]})]}),n.jsxs("div",{className:"wishlist-actions",children:[H&&n.jsxs("button",{className:"btn-borrow small",onClick:L=>{L.stopPropagation(),g(w)},title:"Borrow book",children:[n.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),n.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"})]}),"Borrow"]}),z&&!E&&n.jsxs("button",{className:"btn-borrow small outlined",onClick:L=>{L.stopPropagation(),v(w)},title:"Return book",children:[n.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("path",{d:"M9 14l-5-5 5-5"}),n.jsx("path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5v0a5.5 5.5 0 0 1-5.5 5.5H13"})]}),"Return"]}),n.jsxs("button",{className:"btn-borrow small outlined remove",onClick:L=>{L.stopPropagation(),y(w)},title:"Remove from wishlist",children:[n.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("path",{d:"M18 6L6 18"}),n.jsx("path",{d:"M6 6l12 12"})]}),"Remove"]})]})]},w)})}):n.jsxs("div",{className:"no-wishlist",children:[n.jsx("p",{children:"No books in the wishlist yet."}),n.jsx("p",{className:"hint",children:"Books can be added to the wishlist from the library."})]})})]})},DN=({user:l,setMessage:s,setClassName:o})=>{const c=ta(),{studentId:d}=rv(),[h,m]=b.useState(null),[f,y]=b.useState(null),[g,v]=b.useState(!0),[x,S]=b.useState(null),R=(l==null?void 0:l.role)==="admin",N=(l==null?void 0:l.role)==="tutor",w=(l==null?void 0:l.role)==="admin"||(l==null?void 0:l.role)==="tutor",{imageUrl:E,loading:O}=ar(f!=null&&f.profilePicture?d:null),H=b.useCallback(async()=>{var L,k;try{if(v(!0),!(l!=null&&l.token)){v(!1);return}Ae.setToken(l.token),Fe.setToken(l.token);const U=(await Ae.getAll()).find(ce=>ce.id===d);if(!U){S("Student not found"),s("Student not found"),o("error"),setTimeout(()=>s(null),5e3);return}if(y(U),!(U.userId.toString()===(l==null?void 0:l.id))&&!w){S("Access denied: You can only view your own dashboard");return}const I=await Fe.getByStudentId(d);m(I)}catch(P){((L=P.response)==null?void 0:L.status)===403?S("Access denied: You can only view your own dashboard"):((k=P.response)==null?void 0:k.status)===404?S("Student not found"):S("Failed to load dashboard"),s("Error fetching student dashboard"),o("error"),setTimeout(()=>s(null),5e3)}finally{v(!1)}},[d,l,w,s,o]);b.useEffect(()=>{H(l)},[H,l]);const z=L=>{m(L)},J=(L,k="success")=>{s(L),o(k),setTimeout(()=>{s(null),o("error")},5e3)};if(!l)return n.jsx("div",{className:"dashboard-container",children:"Please log in to view dashboard"});if(g)return n.jsx("div",{className:"dashboard-container",children:n.jsx("div",{className:"loading",children:"Loading dashboard..."})});if(x)return n.jsxs("div",{className:"dashboard-container",children:[n.jsx("div",{className:"text-error text-center py-8",children:x}),n.jsx("div",{className:"text-center",children:n.jsx("button",{onClick:()=>c(-1),children:"Go Back"})})]});if(!h||!f)return n.jsx("div",{className:"dashboard-container",children:"Dashboard not found"});const W=`${f.firstName} ${f.lastName}`;return n.jsxs("div",{className:"dashboard-container",children:[n.jsxs("div",{className:"dashboard-header",children:[n.jsxs("div",{className:"dashboard-header-content",children:[f.profilePicture&&(E||N&&f.profilePicture)?n.jsx("img",{src:E||f.profilePicture,alt:W,className:"student-avatar student-avatar-large"}):O?n.jsx("div",{className:"student-avatar student-avatar-large placeholder",children:n.jsx("div",{className:"loading",children:"Loading..."})}):n.jsx("div",{className:"student-avatar student-avatar-large placeholder",children:n.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),n.jsx("circle",{cx:"12",cy:"7",r:"4"})]})}),n.jsx("div",{className:"dashboard-student-info",children:n.jsxs("h1",{children:["Dashboard - ",W]})})]}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("button",{className:"outlined",onClick:()=>c("/"),children:" Back to Home"}),n.jsx("button",{onClick:()=>c("/students",{state:{selectedStudent:f,mode:"view"}}),className:"outlined",children:"View Student"}),n.jsx("button",{className:"outlined",onClick:()=>c("/students",{state:{selectedStudent:f,mode:"edit"}}),children:"Edit Student"})]})]}),n.jsxs("div",{className:"dashboard-content",children:[n.jsx(CN,{studentId:d,user:l,showMessage:J}),n.jsx(SN,{studentId:d,portfolios:h.portfolios,isAdmin:w,onUpdate:z,showMessage:J}),(R||f&&f.userId&&f.userId.toString()===(l==null?void 0:l.id))&&n.jsx(wN,{studentId:d,documents:h.documents,isAdmin:R,onUpdate:z,showMessage:J}),(R||f&&f.userId&&f.userId.toString()===(l==null?void 0:l.id))&&n.jsx(EN,{studentId:d,history:h.history,isAdmin:R,onUpdate:z,showMessage:J})]})]})},TN=({event:l,user:s,onEditSignup:o,onDeleteSignup:c,isLoading:d=!1})=>{const[h,m]=b.useState(new Set),f=(s==null?void 0:s.role)==="admin",y=x=>{const S=new Set(h);S.has(x)?S.delete(x):S.add(x),m(S)},g=x=>{var S;return f||((S=x.userId)==null?void 0:S._id)===(s==null?void 0:s.id)||x.userId===(s==null?void 0:s.id)},v=x=>new Date(x).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return!(l!=null&&l.signups)||l.signups.length===0?n.jsx("div",{className:"signup-list empty",children:n.jsx("p",{children:"No signups yet for this event."})}):n.jsxs("div",{className:"signup-list",children:[n.jsxs("h4",{children:["Event Signups (",l.signups.length,")"]}),n.jsx("div",{className:"signups",children:l.signups.map(x=>{var w,E;const S=h.has(x._id),R=g(x),N=((w=x.userId)==null?void 0:w._id)===(s==null?void 0:s.id)||x.userId===(s==null?void 0:s.id);return n.jsxs("div",{className:`signup-item ${N?"own-signup":""}`,children:[n.jsxs("div",{className:"signup-header",children:[n.jsxs("div",{className:"signup-info",children:[n.jsxs("h5",{className:"signup-user",children:[x.userName||((E=x.userId)==null?void 0:E.name)||"Unknown User",N&&n.jsx("span",{className:"own-badge",children:"You"})]}),n.jsx("p",{className:"signup-responsibility",children:x.responsibility}),n.jsxs("span",{className:"signup-date",children:["Signed up: ",v(x.createdAt)]})]}),R&&n.jsxs("div",{className:"signup-actions",children:[n.jsx("button",{className:"inverted small-btn",onClick:()=>o(x),disabled:d,title:"Edit signup",children:"Edit"}),n.jsx("button",{className:"delete-btn small-btn",onClick:()=>c(x),disabled:d,title:"Delete signup",children:"Delete"})]})]}),x.notes&&n.jsxs("div",{className:"signup-notes",children:[n.jsxs("button",{className:"notes-toggle",onClick:()=>y(x._id),children:["Notes ",S?"":""]}),S&&n.jsx("div",{className:"notes-content",children:x.notes})]})]},x._id)})}),l.maxSignups&&n.jsx("div",{className:"signup-limit-info",children:n.jsxs("p",{children:[l.signups.length," / ",l.maxSignups," signups",l.signups.length>=l.maxSignups&&n.jsx("span",{className:"limit-reached",children:" - Limit reached"})]})})]})},AN=({event:l,user:s,onAddSignup:o,onUpdateSignup:c,onDeleteSignup:d,onUpdateEvent:h,onDeleteEvent:m,isLoading:f=!1})=>{var U,ee,I,ce,X,oe;const[y,g]=b.useState(!1),[v,x]=b.useState(null),[S,R]=b.useState(!1),N=(s==null?void 0:s.role)==="admin",w=(U=l==null?void 0:l.signups)==null?void 0:U.find(_=>{var T,q;return(((T=_.userId)==null?void 0:T.id)||((q=_.userId)==null?void 0:q._id)||_.userId)===(s==null?void 0:s.id)}),E=l.maxSignups&&((ee=l.signups)==null?void 0:ee.length)>=l.maxSignups,O=new Date(l.eventDate)<new Date,H=s&&!w&&!E&&!O&&l.isActive,z=_=>{const T=new Date(_),q=new Date,te=T.toDateString()===q.toDateString(),ie=T.toDateString()===new Date(q.getTime()+1440*60*1e3).toDateString();let D="";te?D="Today":ie?D="Tomorrow":D=T.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"});const $=T.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0});return`${D} at ${$}`},J=async _=>{await o(l._id,_)},W=_=>{x(_),g(!0)},L=async _=>{v&&(await c(l._id,v._id,_),x(null))},k=async _=>{window.confirm("Are you sure you want to delete this signup?")&&await d(l._id,_._id)},P=async()=>{window.confirm(`Are you sure you want to delete the event "${l.eventTitle}"? This will remove all signups as well.`)&&await m(l._id)};return n.jsxs("div",{className:`event-signup-card ${O?"past-event":""}`,children:[n.jsxs("div",{className:"event-signup-header",children:[n.jsxs("div",{className:"event-signup-info",children:[n.jsx("h3",{className:"event-signup-title",children:l.eventTitle}),n.jsx("p",{className:"event-signup-date",children:z(l.eventDate)}),l.eventDescription&&n.jsx("p",{className:"event-signup-description",children:l.eventDescription}),l.googleCalendarLink&&n.jsx("p",{className:"event-signup-calendar-link",children:n.jsx("a",{href:l.googleCalendarLink,target:"_blank",rel:"noopener noreferrer",className:"google-calendar-link",children:" View in Google Calendar"})})]}),N&&n.jsxs("div",{className:"admin-actions",children:[n.jsx("button",{className:"inverted small-btn",onClick:()=>h&&h(l),disabled:f,title:"Edit event",children:"Edit"}),n.jsx("button",{className:"delete-btn small-btn",onClick:P,disabled:f,title:"Delete event",children:"Delete"})]})]}),n.jsxs("div",{className:"event-signup-info",children:[n.jsxs("div",{className:"signup-stats",children:[n.jsxs("span",{className:"signup-count",children:[((I=l.signups)==null?void 0:I.length)||0,l.maxSignups&&` / ${l.maxSignups}`,"signup",(((ce=l.signups)==null?void 0:ce.length)||0)!==1?"s":""]}),E&&n.jsx("span",{className:"event-full",children:"Full"}),O&&n.jsx("span",{className:"event-past",children:"Past Event"}),!l.isActive&&n.jsx("span",{className:"event-inactive",children:"Inactive"})]}),n.jsxs("div",{className:"event-signup-actions",children:[H&&n.jsx("button",{className:"small-btn",onClick:()=>g(!0),disabled:f,children:"Sign Up"}),w&&n.jsx("button",{className:"outlined small-btn",onClick:()=>k(w),disabled:f,children:"Remove Sign Up"}),((X=l.signups)==null?void 0:X.length)>0&&n.jsxs("button",{className:"outlined small-btn",onClick:()=>R(!S),children:[S?"Hide":"Show"," Signups"]})]})]}),S&&((oe=l.signups)==null?void 0:oe.length)>0&&n.jsx("div",{className:"signups-section",children:n.jsx(TN,{event:l,user:s,onEditSignup:W,onDeleteSignup:k,isLoading:f})}),n.jsx(tp,{isOpen:y,onClose:()=>{g(!1),x(null)},onSubmit:v?L:J,event:l,existingSignup:v,isLoading:f})]})},kN=({isOpen:l,onClose:s,onSubmit:o,existingEvent:c=null,isLoading:d=!1})=>{const[h,m]=b.useState({eventTitle:"",eventDate:"",eventDescription:"",googleCalendarLink:"",maxSignups:"",isActive:!0}),[f,y]=b.useState({});b.useEffect(()=>{l&&(m(c?{eventTitle:c.eventTitle,eventDate:new Date(c.eventDate).toISOString().slice(0,16),eventDescription:c.eventDescription||"",googleCalendarLink:c.googleCalendarLink||"",maxSignups:c.maxSignups||"",isActive:c.isActive!==!1}:{eventTitle:"",eventDate:"",eventDescription:"",googleCalendarLink:"",maxSignups:"",isActive:!0}),y({}))},[l,c]);const g=S=>{const{name:R,value:N,type:w,checked:E}=S.target;m(O=>({...O,[R]:w==="checkbox"?E:N}))},v=async S=>{S.preventDefault();const R={};if(h.eventTitle.trim()||(R.eventTitle="Event title is required"),h.eventDate||(R.eventDate="Event date is required"),Object.keys(R).length>0){y(R);return}const N={eventTitle:h.eventTitle.trim(),eventDate:h.eventDate,eventDescription:h.eventDescription.trim(),googleCalendarLink:h.googleCalendarLink.trim(),maxSignups:h.maxSignups?parseInt(h.maxSignups):null,isActive:h.isActive};try{await o(N),s()}catch{}},x=()=>{d||s()};return l?jt.createPortal(n.jsx("div",{className:"modal-overlay",children:n.jsxs("div",{className:"modal-content",onClick:S=>S.stopPropagation(),children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h3",{children:c?"Edit Event":"Create New Event"}),n.jsx("button",{className:"close-button",onClick:x,disabled:d,children:""})]}),n.jsx("div",{className:"modal-body",children:n.jsxs("form",{onSubmit:v,className:"event-form",children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"eventTitle",children:"Event Title *"}),n.jsx("input",{type:"text",id:"eventTitle",name:"eventTitle",value:h.eventTitle,onChange:g,placeholder:"Event title",disabled:d,className:f.eventTitle?"error":"",required:!0}),f.eventTitle&&n.jsx("span",{className:"error-message",children:f.eventTitle})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"eventDate",children:"Event Date & Time *"}),n.jsx("input",{type:"datetime-local",id:"eventDate",name:"eventDate",value:h.eventDate,onChange:g,disabled:d,className:f.eventDate?"error":"",required:!0}),f.eventDate&&n.jsx("span",{className:"error-message",children:f.eventDate})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"eventDescription",children:"Description"}),n.jsx("textarea",{id:"eventDescription",name:"eventDescription",value:h.eventDescription,onChange:g,placeholder:"Optional event description",rows:3,disabled:d})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"googleCalendarLink",children:"Google Calendar Link"}),n.jsx("input",{type:"url",id:"googleCalendarLink",name:"googleCalendarLink",value:h.googleCalendarLink,onChange:g,placeholder:"https://calendar.google.com/event?eid=...",disabled:d}),n.jsx("small",{children:"Optional link to the corresponding Google Calendar event"})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"maxSignups",children:"Maximum Signups"}),n.jsx("input",{type:"number",id:"maxSignups",name:"maxSignups",value:h.maxSignups,onChange:g,placeholder:"Leave empty for unlimited",min:"1",disabled:d}),n.jsx("small",{children:"Leave empty for unlimited signups"})]}),n.jsx("div",{className:"form-group",children:n.jsxs("div",{className:"checkbox-group",children:[n.jsx("input",{type:"checkbox",id:"isActive",name:"isActive",checked:h.isActive,onChange:g,disabled:d}),n.jsx("label",{htmlFor:"isActive",children:"Event is active (allows signups)"})]})}),n.jsxs("div",{className:"form-actions",children:[n.jsxs("button",{type:"submit",disabled:d,children:[d&&n.jsx("span",{className:"loading",style:{marginRight:"8px"}}),d?"Saving...":c?"Update Event":"Create Event"]}),n.jsx("button",{type:"button",onClick:x,disabled:d,children:"Cancel"})]})]})})]})}),document.body):null},RN=({isOpen:l,onClose:s,onUpload:o,isLoading:c=!1})=>{const[d,h]=b.useState(null),[m,f]=b.useState(!1),[y,g]=b.useState(""),[v,x]=b.useState(!0),[S,R]=b.useState([]),N=b.useRef(null),w=k=>{k.preventDefault(),k.stopPropagation(),k.type==="dragenter"||k.type==="dragover"?f(!0):k.type==="dragleave"&&f(!1)},E=k=>{k.preventDefault(),k.stopPropagation(),f(!1);const P=k.dataTransfer.files;P&&P[0]&&H(P[0])},O=k=>{k.target.files&&k.target.files[0]&&H(k.target.files[0])},H=k=>{if(!k.name.endsWith(".ics")){R(["Please upload an ICS calendar file"]);return}if(k.size>5*1024*1024){R(["File size must be less than 5MB"]);return}h(k),R([])},z=async k=>{var U,ee;if(k.preventDefault(),!d){R(["Please select an ICS file"]);return}const P=new FormData;P.append("icsFile",d),y&&P.append("maxSignups",y),P.append("isActive",v);try{await o(P),J()}catch(I){R([((ee=(U=I.response)==null?void 0:U.data)==null?void 0:ee.error)||"Failed to upload ICS file"])}},J=()=>{c||(h(null),g(""),x(!0),R([]),s())},W=()=>{var k;(k=N.current)==null||k.click()},L=()=>{h(null),R([])};return l?jt.createPortal(n.jsx("div",{className:"modal-overlay",children:n.jsxs("div",{className:"modal-content",onClick:k=>k.stopPropagation(),children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h3",{children:"Upload ICS Calendar File"}),n.jsx("button",{className:"close-button",onClick:J,disabled:c,children:""})]}),n.jsxs("div",{className:"modal-body",children:[n.jsx("div",{className:"upload-info",children:n.jsx("p",{children:"Upload an ICS calendar file to create signup events. Multi-day events will automatically be split into separate signup events for each day."})}),n.jsxs("form",{onSubmit:z,className:"ics-upload-form",children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"ICS Calendar File *"}),n.jsxs("div",{className:`drop-zone ${m?"drag-active":""} ${d?"has-file":""}`,onDragEnter:w,onDragLeave:w,onDragOver:w,onDrop:E,onClick:W,children:[n.jsx("input",{ref:N,type:"file",accept:".ics",onChange:O,style:{display:"none"},disabled:c}),d?n.jsxs("div",{className:"file-selected",children:[n.jsxs("div",{className:"file-info",children:[n.jsx("span",{className:"file-icon",children:""}),n.jsxs("div",{className:"file-details",children:[n.jsx("span",{className:"file-name",children:d.name}),n.jsxs("span",{className:"file-size",children:[(d.size/1024).toFixed(1)," KB"]})]})]}),n.jsx("button",{type:"button",className:"delete-btn",onClick:k=>{k.stopPropagation(),L()},disabled:c,children:""})]}):n.jsxs("div",{className:"drop-zone-content",children:[n.jsx("span",{className:"upload-icon",children:""}),n.jsxs("p",{children:[n.jsx("strong",{children:"Click to select"})," or drag and drop your ICS file here"]}),n.jsx("small",{children:"Accepts .ics calendar files up to 5MB"})]})]}),S.length>0&&n.jsx("div",{className:"error-messages",children:S.map((k,P)=>n.jsx("span",{className:"error-message",children:k},P))})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"maxSignups",children:"Default Maximum Signups per Event"}),n.jsx("input",{type:"number",id:"maxSignups",value:y,onChange:k=>g(k.target.value),placeholder:"Leave empty for unlimited signups",min:"1",disabled:c}),n.jsx("small",{children:"This will be applied to all events created from the ICS file"})]}),n.jsx("div",{className:"form-group",children:n.jsxs("div",{className:"checkbox-group",children:[n.jsx("input",{type:"checkbox",id:"isActive",checked:v,onChange:k=>x(k.target.checked),disabled:c}),n.jsx("label",{htmlFor:"isActive",children:"Events are active (allow signups)"})]})}),n.jsxs("div",{className:"form-actions",children:[n.jsxs("button",{type:"submit",disabled:c||!d,children:[c&&n.jsx("span",{className:"loading",style:{marginRight:"8px"}}),c?"Uploading...":"Upload & Create Events"]}),n.jsx("button",{type:"button",onClick:J,disabled:c,children:"Cancel"})]})]})]})]})}),document.body):null},UN=({user:l})=>{const s=dn(),[o,c]=b.useState(!1),[d,h]=b.useState([]),[m,f]=b.useState(!0),[y,g]=b.useState(""),[v,x]=b.useState(""),[S,R]=b.useState(!1),[N,w]=b.useState(null),[E,O]=b.useState(!1);b.useEffect(()=>{const X=()=>{c(window.innerWidth<=768)};return X(),window.addEventListener("resize",X),()=>window.removeEventListener("resize",X)},[]),b.useEffect(()=>{l?H():f(!1)},[l]),b.useEffect(()=>{if(s.hash&&!m){const X=s.hash.substring(1),oe=document.getElementById(X);oe&&setTimeout(()=>{oe.scrollIntoView({behavior:"smooth",block:"start"})},300)}},[s.hash,m]);const H=async()=>{try{f(!0);const X=await mt.getAll();h(X)}catch{g("Failed to load events"),x("error")}finally{f(!1)}},z=async(X,oe)=>{try{const _=await mt.addSignup(X,oe);h(d.map(T=>T._id===X?_:T)),g("Successfully signed up for event!"),x("success")}catch{g("Failed to sign up for event"),x("error")}},J=async(X,oe,_)=>{try{const T=await mt.updateSignup(X,oe,_);h(d.map(q=>q._id===X?T:q)),g("Signup updated successfully!"),x("success")}catch{g("Failed to update signup"),x("error")}},W=async(X,oe)=>{try{const _=await mt.removeSignup(X,oe);h(d.map(T=>T._id===X?_:T)),g("Signup removed successfully!"),x("success")}catch{g("Failed to remove signup"),x("error")}},L=async X=>{try{const oe=await mt.create(X);h([...d,oe]),g("Event created successfully!"),x("success")}catch{g("Failed to create event"),x("error")}},k=async X=>{w(X),R(!0)},P=async X=>{try{const oe=await mt.update(N._id,X);h(d.map(_=>_._id===N._id?oe:_)),g("Event updated successfully!"),x("success"),w(null)}catch{g("Failed to update event"),x("error")}},U=async X=>{var oe,_;try{const T=await mt.uploadIcs(X);H();const{createdEvents:q,errors:te}=T;q&&q.length>0?(g(`Successfully created ${q.length} events from ICS file!`),x("success"),te&&te.length>0&&setTimeout(()=>{g(`Created ${q.length} events, but ${te.length} events had errors.`),x("warning")},3e3)):(g("No new events were created. Events may already exist."),x("warning"))}catch(T){g(((_=(oe=T.response)==null?void 0:oe.data)==null?void 0:_.error)||"Failed to upload ICS file"),x("error")}},ee=async X=>{try{await mt.remove(X),h(d.filter(oe=>oe._id!==X)),g("Event deleted successfully!"),x("success")}catch{g("Failed to delete event"),x("error")}};return n.jsxs("div",{className:"calendar-page",children:[n.jsxs("div",{className:"calendar-header",children:[n.jsx("h1",{children:"School Calendar"}),n.jsx("p",{children:"View upcoming events and important dates"})]}),n.jsx("div",{className:"calendar-container",children:n.jsx("div",{className:"calendar-wrapper",children:n.jsx("iframe",{src:o?"https://calendar.google.com/calendar/embed?height=600&wkst=2&ctz=Europe%2FLisbon&title=Campus%20da%20Terra%20Mobile&showPrint=0&showTitle=0&showTz=0&showCalendars=0&mode=AGENDA&src=Y19hZWI4ZDgxOTg1MjUzNDY0ZGVmYjMwMDRkZTlkNDhlNGQyZmE4MjNlZTkyMzc0ZDRiNWViYjBiZDlmYTY0ZGM4QGdyb3VwLmNhbGVuZGFyLmdvb2dsZS5jb20&src=Y18xNDlkMjQxMDkxYTJjYWFhMDM0OTUxYmNhYjllNTJjNjU1ZGQ4MjY1MTMzZGVlOWI4ZjQ3Y2JiMTQ0MDRhYjgxQGdyb3VwLmNhbGVuZGFyLmdvb2dsZS5jb20&color=%23f6bf26&color=%23a79b8e":"https://calendar.google.com/calendar/embed?height=600&wkst=2&ctz=Europe%2FLisbon&src=Y19hZWI4ZDgxOTg1MjUzNDY0ZGVmYjMwMDRkZTlkNDhlNGQyZmE4MjNlZTkyMzc0ZDRiNWViYjBiZDlmYTY0ZGM4QGdyb3VwLmNhbGVuZGFyLmdvb2dsZS5jb20&src=Y18xNDlkMjQxMDkxYTJjYWFhMDM0OTUxYmNhYjllNTJjNjU1ZGQ4MjY1MTMzZGVlOWI4ZjQ3Y2JiMTQ0MDRhYjgxQGdyb3VwLmNhbGVuZGFyLmdvb2dsZS5jb20&color=%23f6bf26&color=%23009688",className:"calendar-iframe",frameBorder:"0",scrolling:"no",title:"School Calendar"})})}),(m||d.length>0||(l==null?void 0:l.role)==="admin")&&n.jsxs("div",{id:"events-signup-section",className:"events-signup-section",children:[n.jsxs("div",{className:"section-header",children:[n.jsxs("div",{className:"section-title-area",children:[n.jsx("h2",{children:"Event Signups"}),n.jsx("p",{children:"Sign up for school events and activities"})]}),(l==null?void 0:l.role)==="admin"&&n.jsxs("div",{className:"section-actions",children:[n.jsx("button",{className:"outlined",onClick:()=>O(!0),disabled:m,title:"Upload ICS calendar file to create multiple events",children:"Upload ICS"}),n.jsx("button",{onClick:()=>R(!0),disabled:m,children:"Add Event"})]})]}),y&&n.jsx("div",{className:v,children:y}),m?n.jsx("div",{className:"loading",children:"Loading events..."}):n.jsx("div",{className:"events-list",children:d.map(X=>n.jsx(AN,{event:X,user:l,onAddSignup:z,onUpdateSignup:J,onDeleteSignup:W,onUpdateEvent:k,onDeleteEvent:ee,isLoading:m},X._id))})]}),n.jsx(kN,{isOpen:S,onClose:()=>{R(!1),w(null)},onSubmit:N?P:L,existingEvent:N,isLoading:m}),n.jsx(RN,{isOpen:E,onClose:()=>O(!1),onUpload:U,isLoading:m})]})},ON=async({username:l,password:s,rememberMe:o})=>(await de.post("/login",{username:l,password:s,rememberMe:o})).data,_N={login:ON},BN=({message:l,type:s})=>{if(l===null)return null;const o=s||"error";return n.jsx("div",{className:o,children:l})},LN=()=>n.jsx("footer",{className:"footer-container",children:n.jsxs("div",{className:"copyright",children:[" Campus da Terra ",new Date().getFullYear()]})}),zN=()=>{const[l,s]=b.useState(null),[o,c]=b.useState(""),[d,h]=b.useState(""),[m,f]=b.useState(!1),[y,g]=b.useState(null),[v,x]=b.useState("error"),S=b.useCallback((N="Logged out successfully")=>{window.localStorage.removeItem("loggedlibraryUser"),s(null),rn(null),Ze.setToken(null),Be.setToken(null),Ae.setToken(null),Fe.setToken(null),vt.setToken(null),mt.setToken(null),g(N),x("success"),window.location.href="/",setTimeout(()=>{g(null),x("error")},5e3)},[]);b.useEffect(()=>{const N=window.localStorage.getItem("loggedlibraryUser");if(N){const w=JSON.parse(N);s(w),rn(w.token),Ze.setToken(w.token),Be.setToken(w.token),Ae.setToken(w.token),Fe.setToken(w.token),vt.setToken(w.token),mt.setToken(w.token)}},[S]);const R=async N=>{N.preventDefault();try{const w=await _N.login({username:o,password:d,rememberMe:m});return window.localStorage.setItem("loggedlibraryUser",JSON.stringify(w)),rn(w.token),Ze.setToken(w.token),Be.setToken(w.token),Ae.setToken(w.token),Fe.setToken(w.token),vt.setToken(w.token),mt.setToken(w.token),s(w),c(""),h(""),f(!1),g("Login successful"),x("success"),setTimeout(()=>{g(null),x("error")},5e3),!0}catch{return g("Wrong username or password"),setTimeout(()=>{g(null)},5e3),!1}};return n.jsxs("div",{children:[n.jsx(ty,{user:l,handleLogin:R,username:o,setUsername:c,password:d,setPassword:h,rememberMe:m,setRememberMe:f,handleLogout:S}),n.jsx(BN,{message:y,type:v}),n.jsx("main",{className:"main-content",children:n.jsxs(Nv,{children:[n.jsx(ln,{path:"/",element:n.jsx(Bb,{user:l,setMessage:g,setClassName:x,handleLogin:R,username:o,setUsername:c,password:d,setPassword:h,rememberMe:m,setRememberMe:f})}),n.jsx(ln,{path:"/library",element:n.jsx(Ib,{user:l,setMessage:g,setClassName:x})}),n.jsx(ln,{path:"/documents",element:n.jsx(dN,{user:l,setMessage:g,setClassName:x})}),n.jsx(ln,{path:"/students",element:n.jsx(fN,{user:l,setMessage:g,setClassName:x})}),n.jsx(ln,{path:"/dashboard/:studentId",element:n.jsx(DN,{user:l,setMessage:g,setClassName:x})}),n.jsx(ln,{path:"/users",element:n.jsx(mN,{user:l,setMessage:g,setClassName:x})}),n.jsx(ln,{path:"/admin",element:n.jsx(yN,{user:l,setMessage:g,setClassName:x})}),n.jsx(ln,{path:"/profile",element:n.jsx(jN,{user:l,setUser:s,setMessage:g,setClassName:x})}),n.jsx(ln,{path:"/calendar",element:n.jsx(UN,{user:l})})]})}),n.jsx(LN,{})]})},MN=()=>n.jsx(Qv,{children:n.jsx(zN,{})});Rx.createRoot(document.getElementById("root")).render(n.jsx(wx.StrictMode,{children:n.jsx(MN,{})}));
